!function(){"use strict";function e(e){this.animationDuration=.6,this.squares=[],this.colors=[2500134,14803398],this.index=0,this.nbRepeat=0,this.elementParent=e}e.prototype.init=function(){var e=this;return this.scene=new THREE.Scene,this.initCamera(),this.initRenderer(),this.initLights(),this.createSquares(),this.render(),function(t){t(e.elementParent)}},e.prototype.initCamera=function(){this.camera=new THREE.OrthographicCamera(this.elementParent.offsetWidth/-2,this.elementParent.offsetWidth/2,this.elementParent.offsetHeight/2,this.elementParent.offsetHeight/-2,1,1e3),this.camera.position.y=500,this.camera.position.z=500,this.camera.position.x=500,this.camera.updateProjectionMatrix(),this.camera.lookAt(this.scene.position)},e.prototype.initRenderer=function(){this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.elementParent.offsetWidth,this.elementParent.offsetHeight),this.renderer.setClearColor(2500134,1),this.elementParent.appendChild(this.renderer.domElement)},e.prototype.initLights=function(){var e=new THREE.DirectionalLight(16777215,1);e.position.set(0,100,0),this.scene.add(e),e=new THREE.DirectionalLight(16777215,1),e.position.set(100,0,0),this.scene.add(e),e=new THREE.DirectionalLight(16777215,1),e.position.set(0,0,100),this.scene.add(e)},e.prototype.createSquares=function(){this.squareGroup=new THREE.Group,this.scene.add(this.squareGroup),this.row1=new THREE.Group,this.squareGroup.add(this.row1),this.squarePivot=new THREE.Object3D,this.squareGroup.add(this.squarePivot),this.row3=new THREE.Group,this.squareGroup.add(this.row3),this.tl=new TimelineMax({repeat:-1,delay:.5,onRepeat:this.onRepeatAnimation.bind(this)});for(var e=0;3>e;++e)for(var t=0;3>t;++t)for(var i=0;3>i;++i)this.index++,this.geometry=new THREE.BoxGeometry(50,50,50),this.material=new THREE.MeshLambertMaterial({color:this.colors[this.index%2],shading:THREE.FlatShading}),this.square=new THREE.Mesh(this.geometry,this.material),this.square.position.x=50*(i-1),this.square.position.y=50*(t-1),this.square.position.z=50*(e-1),this.squares.push(this.square),this.squareGroup.add(this.square),2===i?(this.row1.add(this.square),this.tl.to(this.square.position,this.animationDuration,{x:50*(i-1)+20,ease:Expo.easeIn},0),this.tl.to(this.square.position,this.animationDuration,{x:50*(i-1),ease:Expo.easeOut},this.animationDuration)):0===i?(this.row3.add(this.square),this.tl.to(this.square.position,this.animationDuration,{x:50*(i-1)-20,ease:Expo.easeIn},0),this.tl.to(this.square.position,this.animationDuration,{x:50*(i-1),ease:Expo.easeOut},this.animationDuration)):(this.squarePivot.add(this.square),this.tl.fromTo(this.squarePivot.rotation,1.6*this.animationDuration,{x:0},{x:Math.PI/2,ease:Expo.easeInOut},.45*this.animationDuration))},e.prototype.onRepeatAnimation=function(){0===this.nbRepeat?(this.squareGroup.rotation.y=Math.PI/2,this.squareGroup.rotation.z=0):1==this.nbRepeat?(this.squareGroup.rotation.y=0,this.squareGroup.rotation.z=Math.PI/2):(this.squareGroup.rotation.y=0,this.squareGroup.rotation.z=0),this.nbRepeat=this.nbRepeat+1>2?0:this.nbRepeat+1},e.prototype.render=function(){requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera)},window.Gif=e}(window);var THREE={REVISION:"71"};"object"==typeof module&&(module.exports=THREE),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:+e}),THREE.log=function(){console.log.apply(console,arguments)},THREE.warn=function(){console.warn.apply(console,arguments)},THREE.error=function(){console.error.apply(console,arguments)},THREE.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.MinEquation=103,THREE.MaxEquation=104,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=300,THREE.CubeReflectionMapping=301,THREE.CubeRefractionMapping=302,THREE.EquirectangularReflectionMapping=303,THREE.EquirectangularRefractionMapping=304,THREE.SphericalReflectionMapping=305,THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.HalfFloatType=1025,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGBEFormat=THREE.RGBAFormat,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.RGB_PVRTC_4BPPV1_Format=2100,THREE.RGB_PVRTC_2BPPV1_Format=2101,THREE.RGBA_PVRTC_4BPPV1_Format=2102,THREE.RGBA_PVRTC_2BPPV1_Format=2103,THREE.Projector=function(){THREE.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){THREE.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){THREE.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){THREE.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},THREE.CanvasRenderer=function(){THREE.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i;else{var r=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e};t=.5>=i?i*(1+t):i+t-i*t,i=2*i-t,this.r=r(i,t,e+1/3),this.g=r(i,t,e),this.b=r(i,t,e-1/3)}return this},setStyle:function(e){return/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)?(e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e),this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,this):/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)?(e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e),this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,this):/^\#([0-9a-f]{6})$/i.test(e)?(e=/^\#([0-9a-f]{6})$/i.exec(e),this.setHex(parseInt(e[1],16)),this):/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)?(e=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e),this.setHex(parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3],16)),this):/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e=e||{h:0,s:0,l:0};var t,i=this.r,r=this.g,n=this.b,a=Math.max(i,r,n),o=Math.min(i,r,n),s=(o+a)/2;if(o===a)o=t=0;else{var h=a-o,o=.5>=s?h/(a+o):h/(2-a-o);switch(a){case i:t=(r-n)/h+(n>r?6:0);break;case r:t=(n-i)/h+2;break;case n:t=(i-r)/h+4}t/=6}return e.h=t,e.s=o,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this.onChangeCallback(),this},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1==e instanceof THREE.Euler)throw Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i=Math.cos(e._x/2),r=Math.cos(e._y/2),n=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=a*r*n+i*o*s,this._y=i*o*n-a*r*s,this._z=i*r*s+a*o*n,this._w=i*r*n-a*o*s):"YXZ"===e.order?(this._x=a*r*n+i*o*s,this._y=i*o*n-a*r*s,this._z=i*r*s-a*o*n,this._w=i*r*n+a*o*s):"ZXY"===e.order?(this._x=a*r*n-i*o*s,this._y=i*o*n+a*r*s,this._z=i*r*s+a*o*n,this._w=i*r*n-a*o*s):"ZYX"===e.order?(this._x=a*r*n-i*o*s,this._y=i*o*n+a*r*s,this._z=i*r*s-a*o*n,this._w=i*r*n+a*o*s):"YZX"===e.order?(this._x=a*r*n+i*o*s,this._y=i*o*n+a*r*s,this._z=i*r*s-a*o*n,this._w=i*r*n-a*o*s):"XZY"===e.order&&(this._x=a*r*n-i*o*s,this._y=i*o*n-a*r*s,this._z=i*r*s+a*o*n,this._w=i*r*n+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var r=t[8],n=t[1],a=t[5],o=t[9],s=t[2],h=t[6],t=t[10],l=i+a+t;return l>0?(i=.5/Math.sqrt(l+1),this._w=.25/i,this._x=(h-o)*i,this._y=(r-s)*i,this._z=(n-e)*i):i>a&&i>t?(i=2*Math.sqrt(1+i-a-t),this._w=(h-o)/i,this._x=.25*i,this._y=(e+n)/i,this._z=(r+s)/i):a>t?(i=2*Math.sqrt(1+a-i-t),this._w=(r-s)/i,this._x=(e+n)/i,this._y=.25*i,this._z=(o+h)/i):(i=2*Math.sqrt(1+t-i-a),this._w=(n-e)/i,this._x=(r+s)/i,this._y=(o+h)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector3),t=i.dot(r)+1,1e-6>t?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize(),this}}(),inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,a=e._w,o=t._x,s=t._y,h=t._z,l=t._w;return this._x=i*l+a*o+r*h-n*s,this._y=r*l+a*s+n*o-i*h,this._z=n*l+a*h+i*s-r*o,this._w=a*l-i*o-r*s-n*h,this.onChangeCallback(),this},multiplyVector3:function(e){return THREE.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,r=this._y,n=this._z,a=this._w,o=a*e._w+i*e._x+r*e._y+n*e._z;if(0>o?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=n,this;var s=Math.acos(o),h=Math.sqrt(1-o*o);return.001>Math.abs(h)?(this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this):(o=Math.sin((1-t)*s)/h,s=Math.sin(t*s)/h,this._w=a*o+this._w*s,this._x=i*o+this._x*s,this._y=r*o+this._y*s,this._z=n*o+this._z*s,this.onChangeCallback(),this)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,i,r){return i.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e):this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(i,i),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1==t instanceof THREE.Euler&&THREE.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,i){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,i)),this}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6]*r,this.y=e[1]*t+e[4]*i+e[7]*r,this.z=e[2]*t+e[5]*i+e[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*r+e[12],this.y=e[1]*t+e[5]*i+e[9]*r+e[13],this.z=e[2]*t+e[6]*i+e[10]*r+e[14],this},applyProjection:function(e){var t=this.x,i=this.y,r=this.z;e=e.elements;var n=1/(e[3]*t+e[7]*i+e[11]*r+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*r+e[12])*n,this.y=(e[1]*t+e[5]*i+e[9]*r+e[13])*n,this.z=(e[2]*t+e[6]*i+e[10]*r+e[14])*n,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,a=e.y,o=e.z;e=e.w;var s=e*t+a*r-o*i,h=e*i+o*t-n*r,l=e*r+n*i-a*t,t=-n*t-a*i-o*r;return this.x=s*e+t*-n+h*-o-l*-a,this.y=h*e+t*-a+l*-n-s*-o,this.z=l*e+t*-o+s*-a-h*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new THREE.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*r,this.y=e[1]*t+e[5]*i+e[9]*r,this.z=e[2]*t+e[6]*i+e[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e):this.z=this.y=this.x=0,this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(i,i,i),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e),this},cross:function(e,t){if(void 0!==t)return THREE.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-i*e.z,this.z=i*e.y-r*e.x,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-n*o,this.y=n*a-i*s,this.z=i*o-r*a,this},projectOnVector:function(){var e,t;return function(i){return void 0===e&&(e=new THREE.Vector3),e.copy(i).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/(this.length()*e.length()),Math.acos(THREE.Math.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return e=this.z-e.z,t*t+i*i+e*e},setEulerFromRotationMatrix:function(){THREE.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){THREE.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return THREE.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return THREE.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return THREE.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length();return e=this.set(e.elements[8],e.elements[9],e.elements[10]).length(),this.x=t,this.y=i,this.z=e,this},setFromMatrixColumn:function(e,t){var i=4*e,r=t.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(THREE.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*r+e[12]*n,this.y=e[1]*t+e[5]*i+e[9]*r+e[13]*n,this.z=e[2]*t+e[6]*i+e[10]*r+e[14]*n,this.w=e[3]*t+e[7]*i+e[11]*r+e[15]*n,this},divideScalar:function(e){return 0!==e?(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.z=this.y=this.x=0,this.w=1),this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r;e=e.elements;var n=e[0];r=e[4];var a=e[8],o=e[1],s=e[5],h=e[9];i=e[2],t=e[6];var l=e[10];return.01>Math.abs(r-o)&&.01>Math.abs(a-i)&&.01>Math.abs(h-t)?.1>Math.abs(r+o)&&.1>Math.abs(a+i)&&.1>Math.abs(h+t)&&.1>Math.abs(n+s+l-3)?(this.set(1,0,0,0),this):(e=Math.PI,n=(n+1)/2,s=(s+1)/2,l=(l+1)/2,r=(r+o)/4,a=(a+i)/4,h=(h+t)/4,n>s&&n>l?.01>n?(t=0,r=i=.707106781):(t=Math.sqrt(n),i=r/t,r=a/t):s>l?.01>s?(t=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),t=r/i,r=h/i):.01>l?(i=t=.707106781,r=0):(r=Math.sqrt(l),t=a/r,i=h/r),this.set(t,i,r,e),this):(e=Math.sqrt((t-h)*(t-h)+(a-i)*(a-i)+(o-r)*(o-r)),.001>Math.abs(e)&&(e=1),this.x=(t-h)/e,this.y=(a-i)/e,this.z=(o-r)/e,this.w=Math.acos((n+s+l-1)/2),this)
},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(i,i,i,i),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e),this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,i){return void 0===i&&(i=0),t=t*e.itemSize+i,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var r=THREE.Math.clamp,n=e.elements;e=n[0];var a=n[4],o=n[8],s=n[1],h=n[5],l=n[9],c=n[2],u=n[6],n=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(-l,n),this._z=Math.atan2(-a,e)):(this._x=Math.atan2(u,h),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(o,n),this._z=Math.atan2(s,h)):(this._y=Math.atan2(-c,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(-c,n),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-r(c,-1,1)),.99999>Math.abs(c)?(this._x=Math.atan2(u,n),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-a,h))):"YZX"===t?(this._z=Math.asin(r(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-l,h),this._y=Math.atan2(-c,e)):(this._x=0,this._y=Math.atan2(o,n))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(u,h),this._y=Math.atan2(o,e)):(this._x=Math.atan2(-l,n),this._y=0)):THREE.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,i,r){return void 0===e&&(e=new THREE.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,r),this}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new THREE.Quaternion;return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new THREE.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){return(e||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new THREE.Vector3;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),n=t.dot(e)/n;return r&&(n=THREE.Math.clamp(n,0,1)),n}}(),closestPointToPoint:function(e,t,i){return e=this.closestPointToPointParameter(e,t),i=i||new THREE.Vector3,this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){return(e||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){return(t||new THREE.Vector2).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){return(t||new THREE.Vector2).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var i=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof THREE.Geometry)for(var n=r.vertices,r=0,a=n.length;a>r;r++)e.copy(n[r]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e);else if(r instanceof THREE.BufferGeometry&&void 0!==r.attributes.position)for(n=r.attributes.position.array,r=0,a=n.length;a>r;r+=3)e.set(n[r],n[r+1],n[r+2]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){return(e||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){return(e||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){return(t||new THREE.Vector3).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){return(t||new THREE.Vector3).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){return t=t||new THREE.Sphere,t.center=this.center(),t.radius=.5*this.size(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&THREE.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,i,r,n,a,o,s,h){var l=this.elements;return l[0]=e,l[3]=t,l[6]=i,l[1]=r,l[4]=n,l[7]=a,l[2]=o,l[5]=s,l[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){return e=e.elements,this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(e){return THREE.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return THREE.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var n=0;r>n;n+=3,i+=3)e.x=t[i],e.y=t[i+1],e.z=t[i+2],e.applyMatrix3(this),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],o=e[5],s=e[6],h=e[7],e=e[8];return t*a*e-t*o*h-i*n*e+i*o*s+r*n*h-r*a*s},getInverse:function(e,t){var i=e.elements,r=this.elements;if(r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4],i=i[0]*r[0]+i[1]*r[3]+i[2]*r[6],0===i){if(t)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return THREE.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){return(new THREE.Matrix3).fromArray(this.elements)}},THREE.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&THREE.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,i,r,n,a,o,s,h,l,c,u,p,f,d,E){var m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=n,m[5]=a,m[9]=o,m[13]=s,m[2]=h,m[6]=l,m[10]=c,m[14]=u,m[3]=p,m[7]=f,m[11]=d,m[15]=E,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return THREE.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,i){var r=this.elements;return e.set(r[0],r[1],r[2]),t.set(r[4],r[5],r[6]),i.set(r[8],r[9],r[10]),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var i=this.elements;t=t.elements;var r=1/e.set(t[0],t[1],t[2]).length(),n=1/e.set(t[4],t[5],t[6]).length(),a=1/e.set(t[8],t[9],t[10]).length();return i[0]=t[0]*r,i[1]=t[1]*r,i[2]=t[2]*r,i[4]=t[4]*n,i[5]=t[5]*n,i[6]=t[6]*n,i[8]=t[8]*a,i[9]=t[9]*a,i[10]=t[10]*a,this}}(),makeRotationFromEuler:function(e){!1==e instanceof THREE.Euler&&THREE.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,r=e.y,n=e.z,a=Math.cos(i),i=Math.sin(i),o=Math.cos(r),r=Math.sin(r),s=Math.cos(n),n=Math.sin(n);if("XYZ"===e.order){e=a*s;var h=a*n,l=i*s,c=i*n;t[0]=o*s,t[4]=-o*n,t[8]=r,t[1]=h+l*r,t[5]=e-c*r,t[9]=-i*o,t[2]=c-e*r,t[6]=l+h*r,t[10]=a*o}else"YXZ"===e.order?(e=o*s,h=o*n,l=r*s,c=r*n,t[0]=e+c*i,t[4]=l*i-h,t[8]=a*r,t[1]=a*n,t[5]=a*s,t[9]=-i,t[2]=h*i-l,t[6]=c+e*i,t[10]=a*o):"ZXY"===e.order?(e=o*s,h=o*n,l=r*s,c=r*n,t[0]=e-c*i,t[4]=-a*n,t[8]=l+h*i,t[1]=h+l*i,t[5]=a*s,t[9]=c-e*i,t[2]=-a*r,t[6]=i,t[10]=a*o):"ZYX"===e.order?(e=a*s,h=a*n,l=i*s,c=i*n,t[0]=o*s,t[4]=l*r-h,t[8]=e*r+c,t[1]=o*n,t[5]=c*r+e,t[9]=h*r-l,t[2]=-r,t[6]=i*o,t[10]=a*o):"YZX"===e.order?(e=a*o,h=a*r,l=i*o,c=i*r,t[0]=o*s,t[4]=c-e*n,t[8]=l*n+h,t[1]=n,t[5]=a*s,t[9]=-i*s,t[2]=-r*s,t[6]=h*n+l,t[10]=e-c*n):"XZY"===e.order&&(e=a*o,h=a*r,l=i*o,c=i*r,t[0]=o*s,t[4]=-n,t[8]=r*s,t[1]=e*n+c,t[5]=a*s,t[9]=h*n-l,t[2]=l*n-h,t[6]=i*s,t[10]=c*n+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return THREE.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z,a=e.w,o=i+i,s=r+r,h=n+n;e=i*o;var l=i*s,i=i*h,c=r*s,r=r*h,n=n*h,o=a*o,s=a*s,a=a*h;return t[0]=1-(c+n),t[4]=l-a,t[8]=i+s,t[1]=l+a,t[5]=1-(e+n),t[9]=r-o,t[2]=i-s,t[6]=r+o,t[10]=1-(e+c),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,a){var o=this.elements;return i.subVectors(r,n).normalize(),0===i.length()&&(i.z=1),e.crossVectors(a,i).normalize(),0===e.length()&&(i.x+=1e-4,e.crossVectors(a,i).normalize()),t.crossVectors(i,e),o[0]=e.x,o[4]=t.x,o[8]=i.x,o[1]=e.y,o[5]=t.y,o[9]=i.y,o[2]=e.z,o[6]=t.z,o[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(THREE.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,a=i[0],o=i[4],s=i[8],h=i[12],l=i[1],c=i[5],u=i[9],p=i[13],f=i[2],d=i[6],E=i[10],m=i[14],g=i[3],T=i[7],v=i[11],i=i[15],y=r[0],R=r[4],_=r[8],x=r[12],H=r[1],b=r[5],w=r[9],M=r[13],S=r[2],A=r[6],C=r[10],P=r[14],L=r[3],F=r[7],D=r[11],r=r[15];return n[0]=a*y+o*H+s*S+h*L,n[4]=a*R+o*b+s*A+h*F,n[8]=a*_+o*w+s*C+h*D,n[12]=a*x+o*M+s*P+h*r,n[1]=l*y+c*H+u*S+p*L,n[5]=l*R+c*b+u*A+p*F,n[9]=l*_+c*w+u*C+p*D,n[13]=l*x+c*M+u*P+p*r,n[2]=f*y+d*H+E*S+m*L,n[6]=f*R+d*b+E*A+m*F,n[10]=f*_+d*w+E*C+m*D,n[14]=f*x+d*M+E*P+m*r,n[3]=g*y+T*H+v*S+i*L,n[7]=g*R+T*b+v*A+i*F,n[11]=g*_+T*w+v*C+i*D,n[15]=g*x+T*M+v*P+i*r,this},multiplyToArray:function(e,t,i){var r=this.elements;return this.multiplyMatrices(e,t),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return THREE.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToVector3Array:function(){var e=new THREE.Vector3;return function(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);for(var n=0;r>n;n+=3,i+=3)e.x=t[i],e.y=t[i+1],e.z=t[i+2],e.applyMatrix4(this),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z;return t}}(),rotateAxis:function(e){THREE.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return THREE.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],a=e[1],o=e[5],s=e[9],h=e[13],l=e[2],c=e[6],u=e[10],p=e[14];return e[3]*(+n*s*c-r*h*c-n*o*u+i*h*u+r*o*p-i*s*p)+e[7]*(+t*s*p-t*h*u+n*a*u-r*a*p+r*h*l-n*s*l)+e[11]*(+t*h*c-t*o*p-n*a*c+i*a*p+n*o*l-i*h*l)+e[15]*(-r*o*l-t*s*c+t*o*u+r*a*c-i*a*u+i*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){THREE.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],a=r[4],o=r[8],s=r[12],h=r[1],l=r[5],c=r[9],u=r[13],p=r[2],f=r[6],d=r[10],E=r[14],m=r[3],g=r[7],T=r[11],r=r[15];if(i[0]=c*E*g-u*d*g+u*f*T-l*E*T-c*f*r+l*d*r,i[4]=s*d*g-o*E*g-s*f*T+a*E*T+o*f*r-a*d*r,i[8]=o*u*g-s*c*g+s*l*T-a*u*T-o*l*r+a*c*r,i[12]=s*c*f-o*u*f-s*l*d+a*u*d+o*l*E-a*c*E,i[1]=u*d*m-c*E*m-u*p*T+h*E*T+c*p*r-h*d*r,i[5]=o*E*m-s*d*m+s*p*T-n*E*T-o*p*r+n*d*r,i[9]=s*c*m-o*u*m-s*h*T+n*u*T+o*h*r-n*c*r,i[13]=o*u*p-s*c*p+s*h*d-n*u*d-o*h*E+n*c*E,i[2]=l*E*m-u*f*m+u*p*g-h*E*g-l*p*r+h*f*r,i[6]=s*f*m-a*E*m-s*p*g+n*E*g+a*p*r-n*f*r,i[10]=a*u*m-s*l*m+s*h*g-n*u*g-a*h*r+n*l*r,i[14]=s*l*p-a*u*p-s*h*f+n*u*f+a*h*E-n*l*E,i[3]=c*f*m-l*d*m-c*p*g+h*d*g+l*p*T-h*f*T,i[7]=a*d*m-o*f*m+o*p*g-n*d*g-a*p*T+n*f*T,i[11]=o*l*m-a*c*m-o*h*g+n*c*g+a*h*T-n*l*T,i[15]=a*c*p-o*l*p+o*h*f-n*c*f-a*h*d+n*l*d,i=n*i[0]+h*i[4]+p*i[8]+m*i[12],0==i){if(t)throw Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return THREE.warn("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/i),this},translate:function(){THREE.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){THREE.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){THREE.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){THREE.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){THREE.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,r=e.y;return e=e.z,t[0]*=i,t[4]*=r,t[8]*=e,t[1]*=i,t[5]*=r,t[9]*=e,t[2]*=i,t[6]*=r,t[10]*=e,t[3]*=i,t[7]*=r,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],Math.max(e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10])))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,a=e.x,o=e.y,s=e.z,h=n*a,l=n*o;return this.set(h*a+i,h*o-r*s,h*s+r*o,0,h*o+r*s,l*o+i,l*s-r*a,0,h*s-r*o,l*s+r*a,n*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(i,r,n){var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),h=e.set(a[8],a[9],a[10]).length();0>this.determinant()&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],t.elements.set(this.elements),i=1/o;var a=1/s,l=1/h;return t.elements[0]*=i,t.elements[1]*=i,t.elements[2]*=i,t.elements[4]*=a,t.elements[5]*=a,t.elements[6]*=a,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,r.setFromRotationMatrix(t),n.x=o,n.y=s,n.z=h,this}}(),makeFrustum:function(e,t,i,r,n,a){var o=this.elements;return o[0]=2*n/(t-e),o[4]=0,o[8]=(t+e)/(t-e),o[12]=0,o[1]=0,o[5]=2*n/(r-i),o[9]=(r+i)/(r-i),o[13]=0,o[2]=0,o[6]=0,o[10]=-(a+n)/(a-n),o[14]=-2*a*n/(a-n),o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,i,r){e=i*Math.tan(THREE.Math.degToRad(.5*e));var n=-e;return this.makeFrustum(n*t,e*t,n,e,i,r)},makeOrthographic:function(e,t,i,r,n,a){var o=this.elements,s=t-e,h=i-r,l=a-n;return o[0]=2/s,o[4]=0,o[8]=0,o[12]=-((t+e)/s),o[1]=0,o[5]=2/h,o[9]=0,o[13]=-((i+r)/h),o[2]=0,o[6]=0,o[10]=-2/l,o[14]=-((a+n)/l),o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){return(new THREE.Matrix4).fromArray(this.elements)}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new THREE.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new THREE.Vector3;i.subVectors(e,this.origin);var r=i.dot(this.direction);return 0>r?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,a,o){e.copy(r).add(n).multiplyScalar(.5),t.copy(n).sub(r).normalize(),i.copy(this.origin).sub(e);var s,h=.5*r.distanceTo(n),l=-this.direction.dot(t),c=i.dot(this.direction),u=-i.dot(t),p=i.lengthSq(),f=Math.abs(1-l*l);return f>0?(r=l*u-c,n=l*c-u,s=h*f,r>=0?n>=-s?s>=n?(h=1/f,r*=h,n*=h,l=r*(r+l*n+2*c)+n*(l*r+n+2*u)+p):(n=h,r=Math.max(0,-(l*n+c)),l=-r*r+n*(n+2*u)+p):(n=-h,r=Math.max(0,-(l*n+c)),l=-r*r+n*(n+2*u)+p):-s>=n?(r=Math.max(0,-(-l*h+c)),n=r>0?-h:Math.min(Math.max(-h,-u),h),l=-r*r+n*(n+2*u)+p):s>=n?(r=0,n=Math.min(Math.max(-h,-u),h),l=n*(n+2*u)+p):(r=Math.max(0,-(l*h+c)),n=r>0?h:Math.min(Math.max(-h,-u),h),l=-r*r+n*(n+2*u)+p)):(n=l>0?-h:h,r=Math.max(0,-(l*n+c)),l=-r*r+n*(n+2*u)+p),a&&a.copy(this.direction).multiplyScalar(r).add(this.origin),o&&o.copy(t).multiplyScalar(n).add(e),l}}(),isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},intersectSphere:function(){var e=new THREE.Vector3;return function(t,i){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),n=e.dot(e)-r*r,a=t.radius*t.radius;return n>a?null:(a=Math.sqrt(a-n),n=r-a,r+=a,0>n&&0>r?null:0>n?this.at(r,i):this.at(n,i))}}(),isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0==t?0==e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,e>=0?e:null)},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var i,r,n,a,o;r=1/this.direction.x,a=1/this.direction.y,o=1/this.direction.z;var s=this.origin;return r>=0?(i=(e.min.x-s.x)*r,r*=e.max.x-s.x):(i=(e.max.x-s.x)*r,r*=e.min.x-s.x),a>=0?(n=(e.min.y-s.y)*a,a*=e.max.y-s.y):(n=(e.max.y-s.y)*a,a*=e.min.y-s.y),i>a||n>r?null:((n>i||i!==i)&&(i=n),(r>a||r!==r)&&(r=a),o>=0?(n=(e.min.z-s.z)*o,o*=e.max.z-s.z):(n=(e.max.z-s.z)*o,o*=e.min.z-s.z),i>o||n>r?null:((n>i||i!==i)&&(i=n),(r>o||r!==r)&&(r=o),0>r?null:this.at(i>=0?i:r,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3;return function(n,a,o,s,h){if(t.subVectors(a,n),i.subVectors(o,n),r.crossVectors(t,i),a=this.direction.dot(r),a>0){if(s)return null;s=1}else{if(!(0>a))return null;s=-1,a=-a}return e.subVectors(this.origin,n),n=s*this.direction.dot(i.crossVectors(e,i)),0>n?null:(o=s*this.direction.dot(t.cross(e)),0>o||n+o>a?null:(n=-s*e.dot(r),0>n?null:this.at(n/a,h)))}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,i){var r=this.center;void 0!==i?r.copy(i):e.setFromPoints(t).center(r);for(var n=0,a=0,o=t.length;o>a;a++)n=Math.max(n,r.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){return e=e||new THREE.Box3,e.set(this.center,this.center),e.expandByScalar(this.radius),e
},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,i,r,n,a){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==a?a:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,i,r,n,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(a),this},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],h=i[6],l=i[7],c=i[8],u=i[9],p=i[10],f=i[11],d=i[12],E=i[13],m=i[14],i=i[15];return t[0].setComponents(a-e,l-o,f-c,i-d).normalize(),t[1].setComponents(a+e,l+o,f+c,i+d).normalize(),t[2].setComponents(a+r,l+s,f+u,i+E).normalize(),t[3].setComponents(a-r,l-s,f-u,i-E).normalize(),t[4].setComponents(a-n,l-h,f-p,i-m).normalize(),t[5].setComponents(a+n,l+h,f+p,i+m).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var r=0;6>r;r++)if(t[r].distanceToPoint(i)<e)return!1;return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){for(var r=this.planes,n=0;6>n;n++){var a=r[n];e.x=0<a.normal.x?i.min.x:i.max.x,t.x=0<a.normal.x?i.max.x:i.min.x,e.y=0<a.normal.y?i.min.y:i.max.y,t.y=0<a.normal.y?i.max.y:i.min.y,e.z=0<a.normal.z?i.min.z:i.max.z,t.z=0<a.normal.z?i.max.z:i.min.z;var o=a.distanceToPoint(e),a=a.distanceToPoint(t);if(0>o&&0>a)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(0>t[i].distanceToPoint(e))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r,n){return r=e.subVectors(n,r).cross(t.subVectors(i,r)).normalize(),this.setFromNormalAndCoplanarPoint(r,i),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e);return(t||new THREE.Vector3).copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&e>0||0>e&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,i){var r=i||new THREE.Vector3,n=t.delta(e),a=this.normal.dot(n);return 0!=a?(a=-(t.start.dot(this.normal)+this.constant)/a,0>a||a>1?void 0:r.copy(n).multiplyScalar(a).add(t.start)):0==this.distanceToPoint(t.start)?r.copy(t.start):void 0}}(),coplanarPoint:function(e){return(e||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Matrix3;return function(r,n){var a=n||i.getNormalMatrix(r),a=e.copy(this.normal).applyMatrix3(a),o=this.coplanarPoint(t);return o.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(a,o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,i[n]=t[19==n?3&e|8:e]);return i.join("")}}(),clamp:function(e,t,i){return t>e?t:e>i?i:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return Math.floor(this.randFloat(e,t))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},THREE.Spline=function(e){function t(e,t,i,r,n,a,o){return e=.5*(i-e),r=.5*(r-t),(2*(t-i)+e+r)*o+(-3*(t-i)-2*e-r)*a+e*n+t}this.points=e;var i,r,n,a,o,s,h,l,c,u=[],p={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,r=Math.floor(i),n=i-r,u[0]=0===r?r:r-1,u[1]=r,u[2]=r>this.points.length-2?this.points.length-1:r+1,u[3]=r>this.points.length-3?this.points.length-1:r+2,s=this.points[u[0]],h=this.points[u[1]],l=this.points[u[2]],c=this.points[u[3]],a=n*n,o=n*a,p.x=t(s.x,h.x,l.x,c.x,n,a,o),p.y=t(s.y,h.y,l.y,c.y,n,a,o),p.z=t(s.z,h.z,l.z,c.z,n,a,o),p},this.getControlPointsArray=function(){var e,t,i=this.points.length,r=[];for(e=0;i>e;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,i,r,n=t=t=0,a=new THREE.Vector3,o=new THREE.Vector3,s=[],h=0;for(s[0]=0,e||(e=100),i=this.points.length*e,a.copy(this.points[0]),e=1;i>e;e++)t=e/i,r=this.getPoint(t),o.copy(r),h+=o.distanceTo(a),a.copy(r),t*=this.points.length-1,t=Math.floor(t),t!=n&&(s[t]=h,n=t);return s[s.length]=h,{chunks:s,total:h}},this.reparametrizeByArcLength=function(e){var t,i,r,n,a,o,s=[],h=new THREE.Vector3,l=this.getLength();for(s.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(i=l.chunks[t]-l.chunks[t-1],o=Math.ceil(e*i/l.total),n=(t-1)/(this.points.length-1),a=t/(this.points.length-1),i=1;o-1>i;i++)r=n+1/o*i*(a-n),r=this.getPoint(r),s.push(h.copy(r).clone());s.push(h.copy(this.points[t]).clone())}this.points=s}},THREE.Triangle=function(e,t,i){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,i,r,n){return n=n||new THREE.Vector3,n.subVectors(r,i),e.subVectors(t,i),n.cross(e),t=n.lengthSq(),t>0?n.multiplyScalar(1/Math.sqrt(t)):n.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,a,o,s){e.subVectors(o,n),t.subVectors(a,n),i.subVectors(r,n),r=e.dot(e),n=e.dot(t),a=e.dot(i);var h=t.dot(t);o=t.dot(i);var l=r*h-n*n;return s=s||new THREE.Vector3,0==l?s.set(-2,-1,-1):(l=1/l,h=(h*a-n*o)*l,r=(r*o-n*a)*l,s.set(1-h-r,r,h))}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,i,r,n){return t=THREE.Triangle.barycoordFromPoint(t,i,r,n,e),0<=t.x&&0<=t.y&&1>=t.x+t.y}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),e=.001*(t-this.oldTime);this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=[],r=t.length,n=0;r>n;n++)i[n]=t[n];for(n=0;r>n;n++)i[n].call(this,e)}}}},function(e){e.Raycaster=function(t,i,r,n){this.ray=new e.Ray(t,i),this.near=r||0,this.far=n||1/0,this.params={Sprite:{},Mesh:{},PointCloud:{threshold:1},LOD:{},Line:{}}};var t=function(e,t){return e.distance-t.distance},i=function(e,t,r,n){if(e.raycast(t,r),!0===n){e=e.children,n=0;for(var a=e.length;a>n;n++)i(e[n],t,r,!0)}};e.Raycaster.prototype={constructor:e.Raycaster,precision:1e-4,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,i){i instanceof e.PerspectiveCamera?(this.ray.origin.copy(i.position),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(i.position).normalize()):i instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld)):e.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var n=[];return i(e,this,n,r),n.sort(t),n},intersectObjects:function(r,n){var a=[];if(!1==r instanceof Array)return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),a;for(var o=0,s=r.length;s>o;o++)i(r[o],this,a,n);return a.sort(t),a}}}(THREE),THREE.Object3D=function(){Object.defineProperty(this,"id",{value:THREE.Object3DIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=void 0,this.children=[],this.up=THREE.Object3D.DefaultUp.clone();var e=new THREE.Vector3,t=new THREE.Euler,i=new THREE.Quaternion,r=new THREE.Vector3(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:r}}),this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},THREE.Object3D.DefaultUp=new THREE.Vector3(0,1,0),THREE.Object3D.prototype={constructor:THREE.Object3D,get eulerOrder(){return THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order},set eulerOrder(e){THREE.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."),this.rotation.order=e},get useQuaternion(){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){THREE.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translate:function(e,t){return THREE.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(THREE.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof THREE.Object3D?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):THREE.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);t=this.children.indexOf(e),-1!==t&&(e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1))},getChildByName:function(e){return THREE.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}},getWorldPosition:function(e){return e=e||new THREE.Vector3,this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){return i=i||new THREE.Quaternion,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Euler,this.getWorldQuaternion(e),t.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new THREE.Vector3,t=new THREE.Quaternion;return function(i){return i=i||new THREE.Vector3,this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverseVisible(e)}},traverseAncestors:function(e){this.parent&&(e(this.parent),this.parent.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===e)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(){var e={metadata:{version:4.3,type:"Object",generator:"ObjectExporter"}},t={},i={},r=function(t){if(void 0===e.materials&&(e.materials=[]),void 0===i[t.uuid]){var r=t.toJSON();delete r.metadata,i[t.uuid]=r,e.materials.push(r)}return t.uuid},n=function(i){var a={};if(a.uuid=i.uuid,a.type=i.type,""!==i.name&&(a.name=i.name),"{}"!==JSON.stringify(i.userData)&&(a.userData=i.userData),!0!==i.visible&&(a.visible=i.visible),i instanceof THREE.PerspectiveCamera)a.fov=i.fov,a.aspect=i.aspect,a.near=i.near,a.far=i.far;else if(i instanceof THREE.OrthographicCamera)a.left=i.left,a.right=i.right,a.top=i.top,a.bottom=i.bottom,a.near=i.near,a.far=i.far;else if(i instanceof THREE.AmbientLight)a.color=i.color.getHex();else if(i instanceof THREE.DirectionalLight)a.color=i.color.getHex(),a.intensity=i.intensity;else if(i instanceof THREE.PointLight)a.color=i.color.getHex(),a.intensity=i.intensity,a.distance=i.distance,a.decay=i.decay;else if(i instanceof THREE.SpotLight)a.color=i.color.getHex(),a.intensity=i.intensity,a.distance=i.distance,a.angle=i.angle,a.exponent=i.exponent,a.decay=i.decay;else if(i instanceof THREE.HemisphereLight)a.color=i.color.getHex(),a.groundColor=i.groundColor.getHex();else if(i instanceof THREE.Mesh||i instanceof THREE.Line||i instanceof THREE.PointCloud){var o=i.geometry;if(void 0===e.geometries&&(e.geometries=[]),void 0===t[o.uuid]){var s=o.toJSON();delete s.metadata,t[o.uuid]=s,e.geometries.push(s)}a.geometry=o.uuid,a.material=r(i.material),i instanceof THREE.Line&&(a.mode=i.mode)}else i instanceof THREE.Sprite&&(a.material=r(i.material));if(a.matrix=i.matrix.toArray(),0<i.children.length)for(a.children=[],o=0;o<i.children.length;o++)a.children.push(n(i.children[o]));return a};return e.object=n(this),e},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),!0===t)for(var i=0;i<this.children.length;i++)e.add(this.children[i].clone());return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Face3=function(e,t,i,r,n,a){this.a=e,this.b=t,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==a?a:0},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.materialIndex=this.materialIndex;for(var t=0,i=this.vertexNormals.length;i>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,i=this.vertexColors.length;i>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,i=this.vertexTangents.length;i>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,i,r,n,a,o){return THREE.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,i,n,a,o)},THREE.BufferAttribute=function(e,t){this.array=e,this.itemSize=t,this.needsUpdate=!1},THREE.BufferAttribute.prototype={constructor:THREE.BufferAttribute,get length(){return this.array.length},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var r=0,n=this.itemSize;n>r;r++)this.array[e+r]=t.array[i+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},setX:function(e,t){return this.array[e*this.itemSize]=t,this},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e*=this.itemSize,this.array[e]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this},clone:function(){return new THREE.BufferAttribute(new this.array.constructor(this.array),this.itemSize)}},THREE.Int8Attribute=function(e,t){return THREE.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8Attribute=function(e,t){return THREE.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint8ClampedAttribute=function(e,t){return THREE.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int16Attribute=function(e,t){return THREE.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint16Attribute=function(e,t){return THREE.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Int32Attribute=function(e,t){return THREE.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Uint32Attribute=function(e,t){return THREE.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float32Attribute=function(e,t){return THREE.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.Float64Attribute=function(e,t){return THREE.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."),new THREE.BufferAttribute(e,t)},THREE.DynamicBufferAttribute=function(e,t){THREE.BufferAttribute.call(this,e,t),this.updateRange={offset:0,count:-1}},THREE.DynamicBufferAttribute.prototype=Object.create(THREE.BufferAttribute.prototype),THREE.DynamicBufferAttribute.prototype.constructor=THREE.DynamicBufferAttribute,THREE.DynamicBufferAttribute.prototype.clone=function(){return new THREE.DynamicBufferAttribute(new this.array.constructor(this.array),this.itemSize)},THREE.BufferGeometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.attributes={},this.attributesKeys=[],this.offsets=this.drawcalls=[],this.boundingSphere=this.boundingBox=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t,i){!1==t instanceof THREE.BufferAttribute?(THREE.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.attributes[e]={array:t,itemSize:i}):(this.attributes[e]=t,this.attributesKeys=Object.keys(this.attributes))},getAttribute:function(e){return this.attributes[e]},addDrawCall:function(e,t,i){this.drawcalls.push({start:e,count:t,index:void 0!==i?i:0})},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new THREE.Matrix3).getNormalMatrix(e).applyToVector3Array(t.array),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere()},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(e)),e},fromGeometry:function(e,t){t=t||{vertexColors:THREE.NoColors};var i=e.vertices,r=e.faces,n=e.faceVertexUvs,a=t.vertexColors,o=0<n[0].length,s=3==r[0].vertexNormals.length,h=new Float32Array(9*r.length);this.addAttribute("position",new THREE.BufferAttribute(h,3));var l=new Float32Array(9*r.length);if(this.addAttribute("normal",new THREE.BufferAttribute(l,3)),a!==THREE.NoColors){var c=new Float32Array(9*r.length);this.addAttribute("color",new THREE.BufferAttribute(c,3))}if(!0===o){var u=new Float32Array(6*r.length);this.addAttribute("uv",new THREE.BufferAttribute(u,2))}for(var p=0,f=0,d=0;p<r.length;p++,f+=6,d+=9){var E=r[p],m=i[E.a],g=i[E.b],T=i[E.c];h[d]=m.x,h[d+1]=m.y,h[d+2]=m.z,h[d+3]=g.x,h[d+4]=g.y,h[d+5]=g.z,h[d+6]=T.x,h[d+7]=T.y,h[d+8]=T.z,!0===s?(m=E.vertexNormals[0],g=E.vertexNormals[1],T=E.vertexNormals[2],l[d]=m.x,l[d+1]=m.y,l[d+2]=m.z,l[d+3]=g.x,l[d+4]=g.y,l[d+5]=g.z,l[d+6]=T.x,l[d+7]=T.y,l[d+8]=T.z):(m=E.normal,l[d]=m.x,l[d+1]=m.y,l[d+2]=m.z,l[d+3]=m.x,l[d+4]=m.y,l[d+5]=m.z,l[d+6]=m.x,l[d+7]=m.y,l[d+8]=m.z),a===THREE.FaceColors?(E=E.color,c[d]=E.r,c[d+1]=E.g,c[d+2]=E.b,c[d+3]=E.r,c[d+4]=E.g,c[d+5]=E.b,c[d+6]=E.r,c[d+7]=E.g,c[d+8]=E.b):a===THREE.VertexColors&&(m=E.vertexColors[0],g=E.vertexColors[1],E=E.vertexColors[2],c[d]=m.r,c[d+1]=m.g,c[d+2]=m.b,c[d+3]=g.r,c[d+4]=g.g,c[d+5]=g.b,c[d+6]=E.r,c[d+7]=E.g,c[d+8]=E.b),!0===o&&(E=n[0][p][0],m=n[0][p][1],g=n[0][p][2],u[f]=E.x,u[f+1]=E.y,u[f+2]=m.x,u[f+3]=m.y,u[f+4]=g.x,u[f+5]=g.y)}return this.computeBoundingSphere(),this},computeBoundingBox:function(){var e=new THREE.Vector3;return function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.attributes.position.array;if(t){var i=this.boundingBox;i.makeEmpty();for(var r=0,n=t.length;n>r;r+=3)e.set(t[r],t[r+1],t[r+2]),i.expandByPoint(e)}(void 0===t||0===t.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&THREE.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')}}(),computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){e.makeEmpty();for(var r=this.boundingSphere.center,n=0,a=i.length;a>n;n+=3)t.set(i[n],i[n+1],i[n+2]),e.expandByPoint(t);e.center(r);for(var o=0,n=0,a=i.length;a>n;n+=3)t.set(i[n],i[n+1],i[n+2]),o=Math.max(o,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&THREE.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.attributes;if(e.position){var t=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(t.length),3));else for(var i=e.normal.array,r=0,n=i.length;n>r;r++)i[r]=0;var a,o,s,i=e.normal.array,h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,p=new THREE.Vector3;if(e.index)for(var f=e.index.array,d=0<this.offsets.length?this.offsets:[{start:0,count:f.length,index:0}],E=0,m=d.length;m>E;++E){n=d[E].start,a=d[E].count;for(var g=d[E].index,r=n,n=n+a;n>r;r+=3)a=3*(g+f[r]),o=3*(g+f[r+1]),s=3*(g+f[r+2]),h.fromArray(t,a),l.fromArray(t,o),c.fromArray(t,s),u.subVectors(c,l),p.subVectors(h,l),u.cross(p),i[a]+=u.x,i[a+1]+=u.y,i[a+2]+=u.z,i[o]+=u.x,i[o+1]+=u.y,i[o+2]+=u.z,i[s]+=u.x,i[s+1]+=u.y,i[s+2]+=u.z}else for(r=0,n=t.length;n>r;r+=9)h.fromArray(t,r),l.fromArray(t,r+3),c.fromArray(t,r+6),u.subVectors(c,l),p.subVectors(h,l),u.cross(p),i[r]=u.x,i[r+1]=u.y,i[r+2]=u.z,i[r+3]=u.x,i[r+4]=u.y,i[r+5]=u.z,i[r+6]=u.x,i[r+7]=u.y,i[r+8]=u.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},computeTangents:function(){function e(e,t,i){M.fromArray(r,3*e),S.fromArray(r,3*t),A.fromArray(r,3*i),C.fromArray(a,2*e),P.fromArray(a,2*t),L.fromArray(a,2*i),u=S.x-M.x,p=A.x-M.x,f=S.y-M.y,d=A.y-M.y,E=S.z-M.z,m=A.z-M.z,g=P.x-C.x,T=L.x-C.x,v=P.y-C.y,y=L.y-C.y,R=1/(g*y-T*v),F.set((y*u-v*p)*R,(y*f-v*d)*R,(y*E-v*m)*R),D.set((g*p-T*u)*R,(g*d-T*f)*R,(g*m-T*E)*R),h[e].add(F),h[t].add(F),h[i].add(F),l[e].add(D),l[t].add(D),l[i].add(D)}function t(e){I.fromArray(n,3*e),G.copy(I),O=h[e],z.copy(O),z.sub(I.multiplyScalar(I.dot(O))).normalize(),N.crossVectors(G,O),V=N.dot(l[e]),k=0>V?-1:1,s[4*e]=z.x,s[4*e+1]=z.y,s[4*e+2]=z.z,s[4*e+3]=k}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)THREE.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var i=this.attributes.index.array,r=this.attributes.position.array,n=this.attributes.normal.array,a=this.attributes.uv.array,o=r.length/3;void 0===this.attributes.tangent&&this.addAttribute("tangent",new THREE.BufferAttribute(new Float32Array(4*o),4));for(var s=this.attributes.tangent.array,h=[],l=[],c=0;o>c;c++)h[c]=new THREE.Vector3,l[c]=new THREE.Vector3;var u,p,f,d,E,m,g,T,v,y,R,_,x,H,b,w,M=new THREE.Vector3,S=new THREE.Vector3,A=new THREE.Vector3,C=new THREE.Vector2,P=new THREE.Vector2,L=new THREE.Vector2,F=new THREE.Vector3,D=new THREE.Vector3;0===this.drawcalls.length&&this.addDrawCall(0,i.length,0);var U=this.drawcalls,c=0;for(x=U.length;x>c;++c){_=U[c].start,H=U[c].count;var B=U[c].index,o=_;for(_+=H;_>o;o+=3)H=B+i[o],b=B+i[o+1],w=B+i[o+2],e(H,b,w)}var k,O,V,z=new THREE.Vector3,N=new THREE.Vector3,I=new THREE.Vector3,G=new THREE.Vector3,c=0;for(x=U.length;x>c;++c)for(_=U[c].start,H=U[c].count,B=U[c].index,o=_,_+=H;_>o;o+=3)H=B+i[o],b=B+i[o+1],w=B+i[o+2],t(H),t(b),t(w)}},computeOffsets:function(e){void 0===e&&(e=65535);for(var t=this.attributes.index.array,i=this.attributes.position.array,r=t.length/3,n=new Uint16Array(t.length),a=0,o=0,s=[{start:0,count:0,index:0}],h=s[0],l=0,c=0,u=new Int32Array(6),p=new Int32Array(i.length),f=new Int32Array(i.length),d=0;d<i.length;d++)p[d]=-1,f[d]=-1;
for(i=0;r>i;i++){for(var E=c=0;3>E;E++)d=t[3*i+E],-1==p[d]?(u[2*E]=d,u[2*E+1]=-1,c++):p[d]<h.index?(u[2*E]=d,u[2*E+1]=-1,l++):(u[2*E]=d,u[2*E+1]=p[d]);if(o+c>h.index+e)for(h={start:a,count:0,index:o},s.push(h),c=0;6>c;c+=2)E=u[c+1],E>-1&&E<h.index&&(u[c+1]=-1);for(c=0;6>c;c+=2)d=u[c],E=u[c+1],-1===E&&(E=o++),p[d]=E,f[E]=d,n[a++]=E-h.index,h.count++}return this.reorderBuffers(n,f,o),this.drawcalls=this.offsets=s},merge:function(e,t){if(!1!=e instanceof THREE.BufferGeometry){void 0===t&&(t=0);var i,r=this.attributes;for(i in r)if(void 0!==e.attributes[i])for(var n=r[i].array,a=e.attributes[i],o=a.array,s=0,a=a.itemSize*t;s<o.length;s++,a++)n[a]=o[s];return this}THREE.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,i,r=this.attributes.normal.array,n=0,a=r.length;a>n;n+=3)e=r[n],t=r[n+1],i=r[n+2],e=1/Math.sqrt(e*e+t*t+i*i),r[n]*=e,r[n+1]*=e,r[n+2]*=e},reorderBuffers:function(e,t,i){var r,n={};for(r in this.attributes)"index"!=r&&(n[r]=new this.attributes[r].array.constructor(this.attributes[r].itemSize*i));for(var a=0;i>a;a++){var o=t[a];for(r in this.attributes)if("index"!=r)for(var s=this.attributes[r].array,h=this.attributes[r].itemSize,l=n[r],c=0;h>c;c++)l[a*h+c]=s[o*h+c]}this.attributes.index.array=e;for(r in this.attributes)"index"!=r&&(this.attributes[r].array=n[r],this.attributes[r].numItems=this.attributes[r].itemSize*i)},toJSON:function(){var e,t={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type,data:{attributes:{}}},i=this.attributes,r=this.offsets,n=this.boundingSphere;for(e in i){var a=i[e],o=Array.prototype.slice.call(a.array);t.data.attributes[e]={itemSize:a.itemSize,type:a.array.constructor.name,array:o}}return 0<r.length&&(t.data.offsets=JSON.parse(JSON.stringify(r))),null!==n&&(t.data.boundingSphere={center:n.center.toArray(),radius:n.radius}),t},clone:function(){var e,t=new THREE.BufferGeometry;for(e in this.attributes)t.addAttribute(e,this.attributes[e].clone());e=0;for(var i=this.offsets.length;i>e;e++){var r=this.offsets[e];t.offsets.push({start:r.start,index:r.index,count:r.count})}return t},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Geometry=function(){Object.defineProperty(this,"id",{value:THREE.GeometryIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.hasTangents=!1,this.dynamic=!0,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),i=0,r=this.vertices.length;r>i;i++)this.vertices[i].applyMatrix4(e);for(i=0,r=this.faces.length;r>i;i++){e=this.faces[i],e.normal.applyMatrix3(t).normalize();for(var n=0,a=e.vertexNormals.length;a>n;n++)e.vertexNormals[n].applyMatrix3(t).normalize()}null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0},fromBufferGeometry:function(e){for(var t=this,i=e.attributes,r=i.position.array,n=void 0!==i.index?i.index.array:void 0,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,h=[],l=[],c=i=0;i<r.length;i+=3,c+=2)t.vertices.push(new THREE.Vector3(r[i],r[i+1],r[i+2])),void 0!==a&&h.push(new THREE.Vector3(a[i],a[i+1],a[i+2])),void 0!==o&&t.colors.push(new THREE.Color(o[i],o[i+1],o[i+2])),void 0!==s&&l.push(new THREE.Vector2(s[c],s[c+1]));var u=function(e,i,r){var n=void 0!==a?[h[e].clone(),h[i].clone(),h[r].clone()]:[],c=void 0!==o?[t.colors[e].clone(),t.colors[i].clone(),t.colors[r].clone()]:[];t.faces.push(new THREE.Face3(e,i,r,n,c)),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[i].clone(),l[r].clone()])};if(void 0!==n)if(r=e.drawcalls,0<r.length)for(i=0;i<r.length;i++)for(var c=r[i],p=c.start,f=c.count,d=c.index,c=p,p=p+f;p>c;c+=3)u(d+n[c],d+n[c+1],d+n[c+2]);else for(i=0;i<n.length;i+=3)u(n[i],n[i+1],n[i+2]);else for(i=0;i<r.length/3;i+=3)u(i,i+1,i+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.applyMatrix((new THREE.Matrix4).setPosition(e)),e},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,i=0,r=this.faces.length;r>i;i++){var n=this.faces[i],a=this.vertices[n.a],o=this.vertices[n.b];e.subVectors(this.vertices[n.c],o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r;for(r=Array(this.vertices.length),t=0,i=this.vertices.length;i>t;t++)r[t]=new THREE.Vector3;if(e){var n,a,o,s=new THREE.Vector3,h=new THREE.Vector3;for(e=0,t=this.faces.length;t>e;e++)i=this.faces[e],n=this.vertices[i.a],a=this.vertices[i.b],o=this.vertices[i.c],s.subVectors(o,a),h.subVectors(n,a),s.cross(h),r[i.a].add(s),r[i.b].add(s),r[i.c].add(s)}else for(e=0,t=this.faces.length;t>e;e++)i=this.faces[e],r[i.a].add(i.normal),r[i.b].add(i.normal),r[i.c].add(i.normal);for(t=0,i=this.vertices.length;i>t;t++)r[t].normalize();for(e=0,t=this.faces.length;t>e;e++)i=this.faces[e],i.vertexNormals[0]=r[i.a].clone(),i.vertexNormals[1]=r[i.b].clone(),i.vertexNormals[2]=r[i.c].clone()},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;r>i;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;t>e;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new THREE.Geometry;for(a.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[],n=this.morphNormals[e].faceNormals;var o,s,h=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;r>i;i++)o=new THREE.Vector3,s={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},n.push(o),h.push(s)}for(h=this.morphNormals[e],a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),i=0,r=this.faces.length;r>i;i++)n=this.faces[i],o=h.faceNormals[i],s=h.vertexNormals[i],o.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){var e,t,i,r,n,a,o,s,h,l,c,u,p,f,d,E,m,g=[],T=[];i=new THREE.Vector3;var v=new THREE.Vector3,y=new THREE.Vector3,R=new THREE.Vector3,_=new THREE.Vector3;for(e=0,t=this.vertices.length;t>e;e++)g[e]=new THREE.Vector3,T[e]=new THREE.Vector3;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],a=this.faceVertexUvs[0][e],r=n.a,m=n.b,n=n.c,o=this.vertices[r],s=this.vertices[m],h=this.vertices[n],l=a[0],c=a[1],u=a[2],a=s.x-o.x,p=h.x-o.x,f=s.y-o.y,d=h.y-o.y,s=s.z-o.z,o=h.z-o.z,h=c.x-l.x,E=u.x-l.x,c=c.y-l.y,l=u.y-l.y,u=1/(h*l-E*c),i.set((l*a-c*p)*u,(l*f-c*d)*u,(l*s-c*o)*u),v.set((h*p-E*a)*u,(h*d-E*f)*u,(h*o-E*s)*u),g[r].add(i),g[m].add(i),g[n].add(i),T[r].add(v),T[m].add(v),T[n].add(v);for(v=["a","b","c","d"],e=0,t=this.faces.length;t>e;e++)for(n=this.faces[e],i=0;i<Math.min(n.vertexNormals.length,3);i++)_.copy(n.vertexNormals[i]),r=n[v[i]],m=g[r],y.copy(m),y.sub(_.multiplyScalar(_.dot(m))).normalize(),R.crossVectors(n.vertexNormals[i],m),r=R.dot(T[r]),r=0>r?-1:1,n.vertexTangents[i]=new THREE.Vector4(y.x,y.y,y.z,r);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,r=t.length;r>i;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(!1==e instanceof THREE.Geometry)THREE.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);else{var r,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,h=e.faces,l=this.faceVertexUvs[0];e=e.faceVertexUvs[0],void 0===i&&(i=0),void 0!==t&&(r=(new THREE.Matrix3).getNormalMatrix(t));for(var c=0,u=o.length;u>c;c++){var p=o[c].clone();void 0!==t&&p.applyMatrix4(t),a.push(p)}for(c=0,u=h.length;u>c;c++){var f,o=h[c],d=o.vertexNormals,E=o.vertexColors,p=new THREE.Face3(o.a+n,o.b+n,o.c+n);for(p.normal.copy(o.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize(),t=0,a=d.length;a>t;t++)f=d[t].clone(),void 0!==r&&f.applyMatrix3(r).normalize(),p.vertexNormals.push(f);for(p.color.copy(o.color),t=0,a=E.length;a>t;t++)f=E[t],p.vertexColors.push(f.clone());p.materialIndex=o.materialIndex+i,s.push(p)}for(c=0,u=e.length;u>c;c++)if(i=e[c],r=[],void 0!==i){for(t=0,a=i.length;a>t;t++)r.push(i[t].clone());l.push(r)}}},mergeMesh:function(e){!1==e instanceof THREE.Mesh?THREE.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,i,r={},n=[],a=[],o=Math.pow(10,4);for(t=0,i=this.vertices.length;i>t;t++)e=this.vertices[t],e=Math.round(e.x*o)+"_"+Math.round(e.y*o)+"_"+Math.round(e.z*o),void 0===r[e]?(r[e]=t,n.push(this.vertices[t]),a[t]=n.length-1):a[t]=a[r[e]];for(r=[],t=0,i=this.faces.length;i>t;t++)for(o=this.faces[t],o.a=a[o.a],o.b=a[o.b],o.c=a[o.c],o=[o.a,o.b,o.c],e=0;3>e;e++)if(o[e]==o[(e+1)%3]){r.push(t);break}for(t=r.length-1;t>=0;t--)for(o=r[t],this.faces.splice(o,1),a=0,i=this.faceVertexUvs.length;i>a;a++)this.faceVertexUvs[a].splice(o,1);return t=this.vertices.length-n.length,this.vertices=n,t},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=h.length/3,h.push(e.x,e.y,e.z),l[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=c.length,c.push(e.getHex()),u[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]?f[t]:(f[t]=p.length/2,p.push(e.x,e.y),f[t])}var n={metadata:{version:4,type:"BufferGeometry",generator:"BufferGeometryExporter"},uuid:this.uuid,type:this.type};if(""!==this.name&&(n.name=this.name),void 0!==this.parameters){var a,o=this.parameters;for(a in o)void 0!==o[a]&&(n[a]=o[a]);return n}for(o=[],a=0;a<this.vertices.length;a++){var s=this.vertices[a];o.push(s.x,s.y,s.z)}var s=[],h=[],l={},c=[],u={},p=[],f={};for(a=0;a<this.faces.length;a++){var d=this.faces[a],E=void 0!==this.faceVertexUvs[0][a],m=0<d.normal.length(),g=0<d.vertexNormals.length,T=1!==d.color.r||1!==d.color.g||1!==d.color.b,v=0<d.vertexColors.length,y=0,y=e(y,0,0),y=e(y,1,!1),y=e(y,2,!1),y=e(y,3,E),y=e(y,4,m),y=e(y,5,g),y=e(y,6,T),y=e(y,7,v);s.push(y),s.push(d.a,d.b,d.c),E&&(E=this.faceVertexUvs[0][a],s.push(r(E[0]),r(E[1]),r(E[2]))),m&&s.push(t(d.normal)),g&&(m=d.vertexNormals,s.push(t(m[0]),t(m[1]),t(m[2]))),T&&s.push(i(d.color)),v&&(d=d.vertexColors,s.push(i(d[0]),i(d[1]),i(d[2])))}return n.data={},n.data.vertices=o,n.data.normals=h,0<c.length&&(n.data.colors=c),0<p.length&&(n.data.uvs=[p]),n.data.faces=s,n},clone:function(){for(var e=new THREE.Geometry,t=this.vertices,i=0,r=t.length;r>i;i++)e.vertices.push(t[i].clone());for(t=this.faces,i=0,r=t.length;r>i;i++)e.faces.push(t[i].clone());for(i=0,r=this.faceVertexUvs.length;r>i;i++){t=this.faceVertexUvs[i],void 0===e.faceVertexUvs[i]&&(e.faceVertexUvs[i]=[]);for(var n=0,a=t.length;a>n;n++){for(var o=t[n],s=[],h=0,l=o.length;l>h;h++)s.push(o[h].clone());e.faceVertexUvs[i].push(s)}}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Camera=function(){THREE.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.getWorldDirection=function(){var e=new THREE.Quaternion;return function(t){return t=t||new THREE.Vector3,this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.CubeCamera=function(e,t,i){THREE.Object3D.call(this),this.type="CubeCamera";var r=new THREE.PerspectiveCamera(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new THREE.Vector3(1,0,0)),this.add(r);var n=new THREE.PerspectiveCamera(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new THREE.Vector3(-1,0,0)),this.add(n);var a=new THREE.PerspectiveCamera(90,1,e,t);a.up.set(0,0,1),a.lookAt(new THREE.Vector3(0,1,0)),this.add(a);var o=new THREE.PerspectiveCamera(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new THREE.Vector3(0,-1,0)),this.add(o);var s=new THREE.PerspectiveCamera(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(0,0,1)),this.add(s);var h=new THREE.PerspectiveCamera(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new THREE.Vector3(0,0,-1)),this.add(h),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,l=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,r,i),i.activeCubeFace=1,e.render(t,n,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,o,i),i.activeCubeFace=4,e.render(t,s,i),i.generateMipmaps=l,i.activeCubeFace=5,e.render(t,h,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CubeCamera.prototype.constructor=THREE.CubeCamera,THREE.OrthographicCamera=function(e,t,i,r,n,a){THREE.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;this.projectionMatrix.makeOrthographic(i-e,i+e,r+t,r-t,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.PerspectiveCamera=function(e,t,i,r){THREE.Camera.call(this),this.type="PerspectiveCamera",this.zoom=1,this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,r,n,a){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=r,this.width=n,this.height=a,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var e=THREE.Math.radToDeg(2*Math.atan(Math.tan(.5*THREE.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var t=this.fullWidth/this.fullHeight,e=Math.tan(THREE.Math.degToRad(.5*e))*this.near,i=-e,r=t*i,t=Math.abs(t*e-r),i=Math.abs(e-i);this.projectionMatrix.makeFrustum(r+this.x*t/this.fullWidth,r+(this.x+this.width)*t/this.fullWidth,e-(this.y+this.height)*i/this.fullHeight,e-this.y*i/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(e,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.zoom=this.zoom,e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e.projectionMatrix.copy(this.projectionMatrix),e},THREE.Light=function(e){THREE.Object3D.call(this),this.type="Light",this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e),this.type="AmbientLight"},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.type="AreaLight",this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.height=this.width=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.AreaLight.prototype.constructor=THREE.AreaLight,THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.type="DirectionalLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraLeft=this.shadowCameraLeft,e.shadowCameraRight=this.shadowCameraRight,e.shadowCameraTop=this.shadowCameraTop,e.shadowCameraBottom=this.shadowCameraBottom,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e.shadowCascade=this.shadowCascade,e.shadowCascadeOffset.copy(this.shadowCascadeOffset),e.shadowCascadeCount=this.shadowCascadeCount,e.shadowCascadeBias=this.shadowCascadeBias.slice(0),e.shadowCascadeWidth=this.shadowCascadeWidth.slice(0),e.shadowCascadeHeight=this.shadowCascadeHeight.slice(0),e.shadowCascadeNearZ=this.shadowCascadeNearZ.slice(0),e.shadowCascadeFarZ=this.shadowCascadeFarZ.slice(0),e},THREE.HemisphereLight=function(e,t,i){THREE.Light.call(this,e),this.type="HemisphereLight",this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.constructor=THREE.HemisphereLight,THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,i,r){THREE.Light.call(this,e),this.type="PointLight",this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e.decay=this.decay,e},THREE.SpotLight=function(e,t,i,r,n,a){THREE.Light.call(this,e),this.type="SpotLight",this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==n?n:10,this.decay=void 0!==a?a:1,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.decay=this.decay,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e.shadowCameraNear=this.shadowCameraNear,e.shadowCameraFar=this.shadowCameraFar,e.shadowCameraFov=this.shadowCameraFov,e.shadowCameraVisible=this.shadowCameraVisible,e.shadowBias=this.shadowBias,e.shadowDarkness=this.shadowDarkness,e.shadowMapWidth=this.shadowMapWidth,e.shadowMapHeight=this.shadowMapHeight,e},THREE.Cache={files:{},add:function(e,t){this.files[e]=t},get:function(e){return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},THREE.Loader=function(e){this.statusDomElement=(this.showStatus=e)?THREE.Loader.prototype.addStatusElement():null,this.imageLoader=new THREE.ImageLoader,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ",t=e.total?t+((100*e.loaded/e.total).toFixed(0)+"%"):t+((e.loaded/1024).toFixed(2)+" KB");this.statusDomElement.innerHTML=t},extractUrlBase:function(e){return e=e.split("/"),1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(e,t){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t);return i},needsTangents:function(e){for(var t=0,i=e.length;i>t;t++)if(e[t]instanceof THREE.ShaderMaterial)return!0;return!1},createMaterial:function(e,t){function i(e){return e=Math.log(e)/Math.LN2,Math.pow(2,Math.round(e))}function r(e,r,n,o,s,h,l){var c,u=t+n,p=THREE.Loader.Handlers.get(u);null!==p?c=p.load(u):(c=new THREE.Texture,p=a.imageLoader,p.crossOrigin=a.crossOrigin,p.load(u,function(e){if(!1===THREE.Math.isPowerOfTwo(e.width)||!1===THREE.Math.isPowerOfTwo(e.height)){var t=i(e.width),r=i(e.height),n=document.createElement("canvas");n.width=t,n.height=r,n.getContext("2d").drawImage(e,0,0,t,r),c.image=n}else c.image=e;c.needsUpdate=!0})),c.sourceFile=n,o&&(c.repeat.set(o[0],o[1]),1!==o[0]&&(c.wrapS=THREE.RepeatWrapping),1!==o[1]&&(c.wrapT=THREE.RepeatWrapping)),s&&c.offset.set(s[0],s[1]),h&&(n={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping},void 0!==n[h[0]]&&(c.wrapS=n[h[0]]),void 0!==n[h[1]]&&(c.wrapT=n[h[1]])),l&&(c.anisotropy=l),e[r]=c}function n(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a=this,o="MeshLambertMaterial",s={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var h=e.shading.toLowerCase();"phong"===h?o="MeshPhongMaterial":"basic"===h&&(o="MeshBasicMaterial")}return void 0!==e.blending&&void 0!==THREE[e.blending]&&(s.blending=THREE[e.blending]),void 0!==e.transparent&&(s.transparent=e.transparent),void 0!==e.opacity&&1>e.opacity&&(s.transparent=!0),void 0!==e.depthTest&&(s.depthTest=e.depthTest),void 0!==e.depthWrite&&(s.depthWrite=e.depthWrite),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.flipSided&&(s.side=THREE.BackSide),void 0!==e.doubleSided&&(s.side=THREE.DoubleSide),void 0!==e.wireframe&&(s.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?s.vertexColors=THREE.FaceColors:e.vertexColors&&(s.vertexColors=THREE.VertexColors)),e.colorDiffuse?s.color=n(e.colorDiffuse):e.DbgColor&&(s.color=e.DbgColor),e.colorSpecular&&(s.specular=n(e.colorSpecular)),e.colorEmissive&&(s.emissive=n(e.colorEmissive)),void 0!==e.transparency&&(console.warn("THREE.Loader: transparency has been renamed to opacity"),e.opacity=e.transparency),void 0!==e.opacity&&(s.opacity=e.opacity),e.specularCoef&&(s.shininess=e.specularCoef),e.mapDiffuse&&t&&r(s,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&r(s,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&r(s,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&r(s,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&r(s,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapAlpha&&t&&r(s,"alphaMap",e.mapAlpha,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy),e.mapBumpScale&&(s.bumpScale=e.mapBumpScale),e.mapNormalFactor&&(s.normalScale=new THREE.Vector2(e.mapNormalFactor,e.mapNormalFactor)),o=new THREE[o](s),void 0!==e.DbgName&&(o.name=e.DbgName),o}},THREE.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=0,i=this.handlers.length;i>t;t+=2){var r=this.handlers[t+1];if(this.handlers[t].test(e))return r}return null}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,i,r){var n=this,a=THREE.Cache.get(e);void 0!==a?t&&t(a):(a=new XMLHttpRequest,a.open("GET",e,!0),a.addEventListener("load",function(){THREE.Cache.add(e,this.response),t&&t(this.response),n.manager.itemEnd(e)},!1),void 0!==i&&a.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),void 0!==this.responseType&&(a.responseType=this.responseType),a.send(null),n.manager.itemStart(e))},setResponseType:function(e){this.responseType=e},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,i,r){var n=this,a=THREE.Cache.get(e);return void 0===a?(a=document.createElement("img"),a.addEventListener("load",function(){THREE.Cache.add(e,this),t&&t(this),n.manager.itemEnd(e)},!1),void 0!==i&&a.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&a.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.src=e,n.manager.itemStart(e),a):void t(a)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.constructor=THREE.JSONLoader,THREE.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,i,r,n){var a=new XMLHttpRequest,o=0;a.onreadystatechange=function(){if(a.readyState===a.DONE)if(200===a.status||0===a.status){if(a.responseText){var s=JSON.parse(a.responseText),h=s.metadata;if(void 0!==h){if("object"===h.type)return void THREE.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===h.type)return void THREE.error("THREE.JSONLoader: "+t+" seems to be a Scene. Use THREE.SceneLoader instead.")}s=e.parse(s,r),i(s.geometry,s.materials)}else THREE.error("THREE.JSONLoader: "+t+" seems to be unreachable or the file is empty.");e.onLoadComplete()}else THREE.error("THREE.JSONLoader: Couldn't load "+t+" ("+a.status+")");else a.readyState===a.LOADING?n&&(0===o&&(o=a.getResponseHeader("Content-Length")),n({total:o,loaded:a.responseText.length})):a.readyState===a.HEADERS_RECEIVED&&void 0!==n&&(o=a.getResponseHeader("Content-Length"))},a.open("GET",t,!0),a.withCredentials=this.withCredentials,a.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){var i=new THREE.Geometry,r=void 0!==e.scale?1/e.scale:1;return function(t){var r,n,a,o,s,h,l,c,u,p,f,d,E,m=e.faces;h=e.vertices;var g=e.normals,T=e.colors,v=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&v++;for(r=0;v>r;r++)i.faceVertexUvs[r]=[]}for(o=0,s=h.length;s>o;)r=new THREE.Vector3,r.x=h[o++]*t,r.y=h[o++]*t,r.z=h[o++]*t,i.vertices.push(r);for(o=0,s=m.length;s>o;)if(t=m[o++],u=1&t,a=2&t,r=8&t,l=16&t,p=32&t,h=64&t,t&=128,u){if(u=new THREE.Face3,u.a=m[o],u.b=m[o+1],u.c=m[o+3],f=new THREE.Face3,f.a=m[o+1],f.b=m[o+2],f.c=m[o+3],o+=4,a&&(a=m[o++],u.materialIndex=a,f.materialIndex=a),a=i.faces.length,r)for(r=0;v>r;r++)for(d=e.uvs[r],i.faceVertexUvs[r][a]=[],i.faceVertexUvs[r][a+1]=[],n=0;4>n;n++)c=m[o++],E=d[2*c],c=d[2*c+1],E=new THREE.Vector2(E,c),2!==n&&i.faceVertexUvs[r][a].push(E),0!==n&&i.faceVertexUvs[r][a+1].push(E);if(l&&(l=3*m[o++],u.normal.set(g[l++],g[l++],g[l]),f.normal.copy(u.normal)),p)for(r=0;4>r;r++)l=3*m[o++],p=new THREE.Vector3(g[l++],g[l++],g[l]),2!==r&&u.vertexNormals.push(p),0!==r&&f.vertexNormals.push(p);if(h&&(h=m[o++],h=T[h],u.color.setHex(h),f.color.setHex(h)),t)for(r=0;4>r;r++)h=m[o++],h=T[h],2!==r&&u.vertexColors.push(new THREE.Color(h)),0!==r&&f.vertexColors.push(new THREE.Color(h));i.faces.push(u),i.faces.push(f)}else{if(u=new THREE.Face3,u.a=m[o++],u.b=m[o++],u.c=m[o++],a&&(a=m[o++],u.materialIndex=a),a=i.faces.length,r)for(r=0;v>r;r++)for(d=e.uvs[r],i.faceVertexUvs[r][a]=[],n=0;3>n;n++)c=m[o++],E=d[2*c],c=d[2*c+1],E=new THREE.Vector2(E,c),i.faceVertexUvs[r][a].push(E);if(l&&(l=3*m[o++],u.normal.set(g[l++],g[l++],g[l])),p)for(r=0;3>r;r++)l=3*m[o++],p=new THREE.Vector3(g[l++],g[l++],g[l]),u.vertexNormals.push(p);if(h&&(h=m[o++],u.color.setHex(T[h])),t)for(r=0;3>r;r++)h=m[o++],u.vertexColors.push(new THREE.Color(T[h]));i.faces.push(u)}}(r),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;
if(e.skinWeights)for(var r=0,n=e.skinWeights.length;n>r;r+=t)i.skinWeights.push(new THREE.Vector4(e.skinWeights[r],t>1?e.skinWeights[r+1]:0,t>2?e.skinWeights[r+2]:0,t>3?e.skinWeights[r+3]:0));if(e.skinIndices)for(r=0,n=e.skinIndices.length;n>r;r+=t)i.skinIndices.push(new THREE.Vector4(e.skinIndices[r],t>1?e.skinIndices[r+1]:0,t>2?e.skinIndices[r+2]:0,t>3?e.skinIndices[r+3]:0));i.bones=e.bones,i.bones&&0<i.bones.length&&(i.skinWeights.length!==i.skinIndices.length||i.skinIndices.length!==i.vertices.length)&&THREE.warn("THREE.JSONLoader: When skinning, number of vertices ("+i.vertices.length+"), skinIndices ("+i.skinIndices.length+"), and skinWeights ("+i.skinWeights.length+") should match."),i.animation=e.animation,i.animations=e.animations}(),function(t){if(void 0!==e.morphTargets){var r,n,a,o,s,h;for(r=0,n=e.morphTargets.length;n>r;r++)for(i.morphTargets[r]={},i.morphTargets[r].name=e.morphTargets[r].name,i.morphTargets[r].vertices=[],s=i.morphTargets[r].vertices,h=e.morphTargets[r].vertices,a=0,o=h.length;o>a;a+=3){var l=new THREE.Vector3;l.x=h[a]*t,l.y=h[a+1]*t,l.z=h[a+2]*t,s.push(l)}}if(void 0!==e.morphColors)for(r=0,n=e.morphColors.length;n>r;r++)for(i.morphColors[r]={},i.morphColors[r].name=e.morphColors[r].name,i.morphColors[r].colors=[],o=i.morphColors[r].colors,s=e.morphColors[r].colors,t=0,a=s.length;a>t;t+=3)h=new THREE.Color(16755200),h.setRGB(s[t],s[t+1],s[t+2]),o.push(h)}(r),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:i}:(r=this.initMaterials(e.materials,t),this.needsTangents(r)&&i.computeTangents(),{geometry:i,materials:r})},THREE.LoadingManager=function(e,t,i){var r=this,n=0,a=0;this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(){a++},this.itemEnd=function(e){n++,void 0!==r.onProgress&&r.onProgress(e,n,a),n===a&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t,i,r){var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t,i=new THREE.BufferGeometry,r=e.data.attributes;for(t in r){var n=r[t],a=new self[n.type](n.array);i.addAttribute(t,new THREE.BufferAttribute(a,n.itemSize))}return r=e.data.offsets,void 0!==r&&(i.offsets=JSON.parse(JSON.stringify(r))),e=e.data.boundingSphere,void 0!==e&&(r=new THREE.Vector3,void 0!==e.center&&r.fromArray(e.center),i.boundingSphere=new THREE.Sphere(r,e.radius)),i}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t,i,r){var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.materials)for(var i=0,r=e.materials.length;r>i;i++)t.materials.push(this.parse(e.materials[i]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.texturePath=""},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t,i,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this,a=new THREE.XHRLoader(n.manager);a.setCrossOrigin(this.crossOrigin),a.load(e,function(e){n.parse(JSON.parse(e),t)},i,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(n)}),r=this.parseTextures(e.textures,r),r=this.parseMaterials(e.materials,r),n=this.parseObject(e.object,i,r);return void 0!==e.images&&0!==e.images.length||void 0===t||t(n),n},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new THREE.JSONLoader,r=new THREE.BufferGeometryLoader,n=0,a=e.length;a>n;n++){var o,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new THREE[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"CubeGeometry":o=new THREE.BoxGeometry(s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":o=new THREE.CircleGeometry(s.radius,s.segments);break;case"CylinderGeometry":o=new THREE.CylinderGeometry(s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded);break;case"SphereGeometry":o=new THREE.SphereGeometry(s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"IcosahedronGeometry":o=new THREE.IcosahedronGeometry(s.radius,s.detail);break;case"TorusGeometry":o=new THREE.TorusGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":o=new THREE.TorusKnotGeometry(s.radius,s.tube,s.radialSegments,s.tubularSegments,s.p,s.q,s.heightScale);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":o=i.parse(s.data).geometry}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var i={};if(void 0!==e)for(var r=function(e){return void 0===t[e]&&THREE.warn("THREE.ObjectLoader: Undefined texture",e),t[e]},n=new THREE.MaterialLoader,a=0,o=e.length;o>a;a++){var s=e[a],h=n.parse(s);h.uuid=s.uuid,void 0!==s.name&&(h.name=s.name),void 0!==s.map&&(h.map=r(s.map)),void 0!==s.bumpMap&&(h.bumpMap=r(s.bumpMap),s.bumpScale&&(h.bumpScale=new THREE.Vector2(s.bumpScale,s.bumpScale))),void 0!==s.alphaMap&&(h.alphaMap=r(s.alphaMap)),void 0!==s.envMap&&(h.envMap=r(s.envMap)),void 0!==s.normalMap&&(h.normalMap=r(s.normalMap),s.normalScale&&(h.normalScale=new THREE.Vector2(s.normalScale,s.normalScale))),void 0!==s.lightMap&&(h.lightMap=r(s.lightMap)),void 0!==s.specularMap&&(h.specularMap=r(s.specularMap)),i[s.uuid]=h}return i},parseImages:function(e,t){var i=this,r={};if(void 0!==e&&0<e.length){var n=new THREE.LoadingManager(t),a=new THREE.ImageLoader(n);a.setCrossOrigin(this.crossOrigin);for(var n=function(e){return i.manager.itemStart(e),a.load(e,function(){i.manager.itemEnd(e)})},o=0,s=e.length;s>o;o++){var h=e[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:i.texturePath+h.url;r[h.uuid]=n(l)}}return r},parseTextures:function(e,t){var i={};if(void 0!==e)for(var r=0,n=e.length;n>r;r++){var a=e[r];void 0===a.image&&THREE.warn('THREE.ObjectLoader: No "image" speficied for',a.uuid),void 0===t[a.image]&&THREE.warn("THREE.ObjectLoader: Undefined image",a.image);var o=new THREE.Texture(t[a.image]);o.needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.repeat&&(o.repeat=new THREE.Vector2(a.repeat[0],a.repeat[1])),void 0!==a.minFilter&&(o.minFilter=THREE[a.minFilter]),void 0!==a.magFilter&&(o.magFilter=THREE[a.magFilter]),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),a.wrap instanceof Array&&(o.wrapS=THREE[a.wrap[0]],o.wrapT=THREE[a.wrap[1]]),i[a.uuid]=o}return i},parseObject:function(){var e=new THREE.Matrix4;return function(t,i,r){var n;n=function(e){return void 0===i[e]&&THREE.warn("THREE.ObjectLoader: Undefined geometry",e),i[e]};var a=function(e){return void 0===r[e]&&THREE.warn("THREE.ObjectLoader: Undefined material",e),r[e]};switch(t.type){case"Scene":n=new THREE.Scene;break;case"PerspectiveCamera":n=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":n=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new THREE.AmbientLight(t.color);break;case"DirectionalLight":n=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":n=new THREE.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":n=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent,t.decay);break;case"HemisphereLight":n=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":n=new THREE.Mesh(n(t.geometry),a(t.material));break;case"Line":n=new THREE.Line(n(t.geometry),a(t.material),t.mode);break;case"PointCloud":n=new THREE.PointCloud(n(t.geometry),a(t.material));break;case"Sprite":n=new THREE.Sprite(a(t.material));break;case"Group":n=new THREE.Group;break;default:n=new THREE.Object3D}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var o in t.children)n.add(this.parseObject(t.children[o],i,r));return n}}()},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t,i,r){var n=new THREE.ImageLoader(this.manager);n.setCrossOrigin(this.crossOrigin),n.load(e,function(e){e=new THREE.Texture(e),e.needsUpdate=!0,void 0!==t&&t(e)},i,r)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.DataTextureLoader=THREE.BinaryTextureLoader=function(){this._parser=null},THREE.BinaryTextureLoader.prototype={constructor:THREE.BinaryTextureLoader,load:function(e,t,i,r){var n=this,a=new THREE.DataTexture,o=new THREE.XHRLoader;return o.setResponseType("arraybuffer"),o.load(e,function(e){(e=n._parser(e))&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:THREE.ClampToEdgeWrapping,a.wrapT=void 0!==e.wrapT?e.wrapT:THREE.ClampToEdgeWrapping,a.magFilter=void 0!==e.magFilter?e.magFilter:THREE.LinearFilter,a.minFilter=void 0!==e.minFilter?e.minFilter:THREE.LinearMipMapLinearFilter,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps),1===e.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.needsUpdate=!0,t&&t(a,e))},i,r),a}},THREE.CompressedTextureLoader=function(){this._parser=null},THREE.CompressedTextureLoader.prototype={constructor:THREE.CompressedTextureLoader,load:function(e,t,i){var r=this,n=[],a=new THREE.CompressedTexture;a.image=n;var o=new THREE.XHRLoader;if(o.setResponseType("arraybuffer"),e instanceof Array){var s=0;i=function(i){o.load(e[i],function(e){e=r._parser(e,!0),n[i]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},s+=1,6===s&&(1==e.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=e.format,a.needsUpdate=!0,t&&t(a))})};for(var h=0,l=e.length;l>h;++h)i(h)}else o.load(e,function(e){if(e=r._parser(e,!0),e.isCubemap)for(var i=e.mipmaps.length/e.mipmapCount,o=0;i>o;o++){n[o]={mipmaps:[]};for(var s=0;s<e.mipmapCount;s++)n[o].mipmaps.push(e.mipmaps[o*e.mipmapCount+s]),n[o].format=e.format,n[o].width=e.width,n[o].height=e.height}else a.image.width=e.width,a.image.height=e.height,a.mipmaps=e.mipmaps;1===e.mipmapCount&&(a.minFilter=THREE.LinearFilter),a.format=e.format,a.needsUpdate=!0,t&&t(a)});return a}},THREE.Material=function(){Object.defineProperty(this,"id",{value:THREE.MaterialIdCount++}),this.uuid=THREE.Math.generateUUID(),this.name="",this.type="Material",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.colorWrite=this.depthWrite=this.depthTest=!0,this.polygonOffset=!1,this.overdraw=this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0,this._needsUpdate=this.visible=!0},THREE.Material.prototype={constructor:THREE.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0===i)THREE.warn("THREE.Material: '"+t+"' parameter is undefined.");else if(t in this){var r=this[t];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):this[t]="overdraw"==t?Number(i):i}}},toJSON:function(){var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type};return""!==this.name&&(e.name=this.name),this instanceof THREE.MeshBasicMaterial?(e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshLambertMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshPhongMaterial?(e.color=this.color.getHex(),e.emissive=this.emissive.getHex(),e.specular=this.specular.getHex(),e.shininess=this.shininess,this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.shading!==THREE.SmoothShading&&(e.shading=this.shading),this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshNormalMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.MeshDepthMaterial?(this.blending!==THREE.NormalBlending&&(e.blending=this.blending),this.side!==THREE.FrontSide&&(e.side=this.side)):this instanceof THREE.PointCloudMaterial?(e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.color=this.color.getHex(),this.vertexColors!==THREE.NoColors&&(e.vertexColors=this.vertexColors),this.blending!==THREE.NormalBlending&&(e.blending=this.blending)):this instanceof THREE.ShaderMaterial?(e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader):this instanceof THREE.SpriteMaterial&&(e.color=this.color.getHex()),1>this.opacity&&(e.opacity=this.opacity),!1!==this.transparent&&(e.transparent=this.transparent),!1!==this.wireframe&&(e.wireframe=this.wireframe),e},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.blendSrcAlpha=this.blendSrcAlpha,e.blendDstAlpha=this.blendDstAlpha,e.blendEquationAlpha=this.blendEquationAlpha,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.type="LineBasicMaterial",this.color=new THREE.Color(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.type="LineDashedMaterial",this.color=new THREE.Color(16777215),this.scale=this.linewidth=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.constructor=THREE.LineDashedMaterial,THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.type="MeshBasicMaterial",this.color=new THREE.Color(16777215),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.type="MeshLambertMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.envMap=this.alphaMap=this.specularMap=this.lightMap=this.map=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.type="MeshPhongMaterial",this.color=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.wrapAround=this.metal=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.bumpMap=this.lightMap=this.map=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.envMap=this.alphaMap=this.specularMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.alphaMap=this.alphaMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.type="MeshDepthMaterial",this.wireframe=this.morphTargets=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.uuid=THREE.Math.generateUUID(),this.type="MeshFaceMaterial",this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype={constructor:THREE.MeshFaceMaterial,toJSON:function(){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},t=0,i=this.materials.length;i>t;t++)e.materials.push(this.materials[t].toJSON());return e},clone:function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e}},THREE.PointCloudMaterial=function(e){THREE.Material.call(this),this.type="PointCloudMaterial",this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=THREE.NoColors,this.fog=!0,this.setValues(e)},THREE.PointCloudMaterial.prototype=Object.create(THREE.Material.prototype),THREE.PointCloudMaterial.prototype.constructor=THREE.PointCloudMaterial,THREE.PointCloudMaterial.prototype.clone=function(){var e=new THREE.PointCloudMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=function(e){return THREE.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ParticleSystemMaterial=function(e){return THREE.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."),new THREE.PointCloudMaterial(e)},THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.attributes=null,this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.vertexColors=THREE.NoColors,this.morphNormals=this.morphTargets=this.skinning=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.RawShaderMaterial=function(e){THREE.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},THREE.RawShaderMaterial.prototype=Object.create(THREE.ShaderMaterial.prototype),THREE.RawShaderMaterial.prototype.constructor=THREE.RawShaderMaterial,THREE.RawShaderMaterial.prototype.clone=function(){var e=new THREE.RawShaderMaterial;return THREE.ShaderMaterial.prototype.clone.call(this,e),e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.type="SpriteMaterial",this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.constructor=THREE.SpriteMaterial,THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.Texture=function(e,t,i,r,n,a,o,s,h){Object.defineProperty(this,"id",{value:THREE.TextureIdCount++}),this.uuid=THREE.Math.generateUUID(),this.sourceFile=this.name="",this.image=void 0!==e?e:THREE.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:THREE.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==a?a:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==h?h:1,this.format=void 0!==o?o:THREE.RGBAFormat,this.type=void 0!==s?s:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.DEFAULT_IMAGE=void 0,THREE.Texture.DEFAULT_MAPPING=THREE.UVMapping,THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CubeTexture=function(e,t,i,r,n,a,o,s,h){t=void 0!==t?t:THREE.CubeReflectionMapping,THREE.Texture.call(this,e,t,i,r,n,a,o,s,h),this.images=e},THREE.CubeTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CubeTexture.prototype.constructor=THREE.CubeTexture,THREE.CubeTexture.clone=function(e){return void 0===e&&(e=new THREE.CubeTexture),THREE.Texture.prototype.clone.call(this,e),e.images=this.images,e},THREE.CompressedTexture=function(e,t,i,r,n,a,o,s,h,l,c){THREE.Texture.call(this,null,a,o,s,h,l,r,n,c),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=this.flipY=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.constructor=THREE.CompressedTexture,THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,i,r,n,a,o,s,h,l,c){THREE.Texture.call(this,null,a,o,s,h,l,r,n,c),this.image={data:e,width:t,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.VideoTexture=function(e,t,i,r,n,a,o,s,h){THREE.Texture.call(this,e,t,i,r,n,a,o,s,h),this.generateMipmaps=!1;var l=this,c=function(){requestAnimationFrame(c),e.readyState===e.HAVE_ENOUGH_DATA&&(l.needsUpdate=!0)};c()},THREE.VideoTexture.prototype=Object.create(THREE.Texture.prototype),THREE.VideoTexture.prototype.constructor=THREE.VideoTexture,THREE.Group=function(){THREE.Object3D.call(this),this.type="Group"},THREE.Group.prototype=Object.create(THREE.Object3D.prototype),THREE.Group.prototype.constructor=THREE.Group,THREE.PointCloud=function(e,t){THREE.Object3D.call(this),this.type="PointCloud",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.PointCloudMaterial({color:16777215*Math.random()})},THREE.PointCloud.prototype=Object.create(THREE.Object3D.prototype),THREE.PointCloud.prototype.constructor=THREE.PointCloud,THREE.PointCloud.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray;return function(i,r){var n=this,a=n.geometry,o=i.params.PointCloud.threshold;if(e.getInverse(this.matrixWorld),t.copy(i.ray).applyMatrix4(e),null===a.boundingBox||!1!==t.isIntersectionBox(a.boundingBox)){var s=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=new THREE.Vector3,o=function(e,a){var o=t.distanceToPoint(e);if(s>o){var h=t.closestPointToPoint(e);h.applyMatrix4(n.matrixWorld);var l=i.ray.origin.distanceTo(h);r.push({distance:l,distanceToRay:o,point:h.clone(),index:a,face:null,object:n})}};if(a instanceof THREE.BufferGeometry){var l=a.attributes,c=l.position.array;if(void 0!==l.index){var l=l.index.array,u=a.offsets;0===u.length&&(u=[{start:0,count:l.length,index:0}]);for(var p=0,f=u.length;f>p;++p)for(var d=u[p].start,E=u[p].index,a=d,d=d+u[p].count;d>a;a++){var m=E+l[a];h.fromArray(c,3*m),o(h,m)}}else for(l=c.length/3,a=0;l>a;a++)h.set(c[3*a],c[3*a+1],c[3*a+2]),o(h,a)}else for(h=this.geometry.vertices,a=0;a<h.length;a++)o(h[a],a)
}}}(),THREE.PointCloud.prototype.clone=function(e){return void 0===e&&(e=new THREE.PointCloud(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){return THREE.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."),new THREE.PointCloud(e,t)},THREE.Line=function(e,t,i){THREE.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.mode=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.constructor=THREE.Line,THREE.Line.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,i=new THREE.Sphere;return function(r,n){var a=r.linePrecision,a=a*a,o=this.geometry;if(null===o.boundingSphere&&o.computeBoundingSphere(),i.copy(o.boundingSphere),i.applyMatrix4(this.matrixWorld),!1!==r.ray.isIntersectionSphere(i)){e.getInverse(this.matrixWorld),t.copy(r.ray).applyMatrix4(e);var s=new THREE.Vector3,h=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,u=this.mode===THREE.LineStrip?1:2;if(o instanceof THREE.BufferGeometry){var p=o.attributes;if(void 0!==p.index){var f=p.index.array,p=p.position.array,d=o.offsets;0===d.length&&(d=[{start:0,count:f.length,index:0}]);for(var E=0;E<d.length;E++)for(var m=d[E].start,g=d[E].count,T=d[E].index,o=m;m+g-1>o;o+=u){var v=T+f[o+1];s.fromArray(p,3*(T+f[o])),h.fromArray(p,3*v),v=t.distanceSqToSegment(s,h,c,l),v>a||(v=t.origin.distanceTo(c),v<r.near||v>r.far||n.push({distance:v,point:l.clone().applyMatrix4(this.matrixWorld),index:o,offsetIndex:E,face:null,faceIndex:null,object:this}))}}else for(p=p.position.array,o=0;o<p.length/3-1;o+=u)s.fromArray(p,3*o),h.fromArray(p,3*o+3),v=t.distanceSqToSegment(s,h,c,l),v>a||(v=t.origin.distanceTo(c),v<r.near||v>r.far||n.push({distance:v,point:l.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this}))}else if(o instanceof THREE.Geometry)for(s=o.vertices,h=s.length,o=0;h-1>o;o+=u)v=t.distanceSqToSegment(s[o],s[o+1],c,l),v>a||(v=t.origin.distanceTo(c),v<r.near||v>r.far||n.push({distance:v,point:l.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this}))}}}(),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.mode)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(THREE.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.raycast=function(){var e=new THREE.Matrix4,t=new THREE.Ray,i=new THREE.Sphere,r=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3;return function(o,s){var h=this.geometry;if(null===h.boundingSphere&&h.computeBoundingSphere(),i.copy(h.boundingSphere),i.applyMatrix4(this.matrixWorld),!1!==o.ray.isIntersectionSphere(i)&&(e.getInverse(this.matrixWorld),t.copy(o.ray).applyMatrix4(e),null===h.boundingBox||!1!==t.isIntersectionBox(h.boundingBox)))if(h instanceof THREE.BufferGeometry){var l=this.material;if(void 0!==l){var c,u,p=h.attributes,f=o.precision;if(void 0!==p.index){var d=p.index.array,E=p.position.array,m=h.offsets;0===m.length&&(m=[{start:0,count:d.length,index:0}]);for(var g=0,T=m.length;T>g;++g)for(var p=m[g].start,v=m[g].index,h=p,y=p+m[g].count;y>h;h+=3){p=v+d[h],c=v+d[h+1],u=v+d[h+2],r.fromArray(E,3*p),n.fromArray(E,3*c),a.fromArray(E,3*u);var R=l.side===THREE.BackSide?t.intersectTriangle(a,n,r,!0):t.intersectTriangle(r,n,a,l.side!==THREE.DoubleSide);if(null!==R){R.applyMatrix4(this.matrixWorld);var _=o.ray.origin.distanceTo(R);f>_||_<o.near||_>o.far||s.push({distance:_,point:R,face:new THREE.Face3(p,c,u,THREE.Triangle.normal(r,n,a)),faceIndex:null,object:this})}}}else for(E=p.position.array,d=h=0,y=E.length;y>h;h+=3,d+=9)p=h,c=h+1,u=h+2,r.fromArray(E,d),n.fromArray(E,d+3),a.fromArray(E,d+6),R=l.side===THREE.BackSide?t.intersectTriangle(a,n,r,!0):t.intersectTriangle(r,n,a,l.side!==THREE.DoubleSide),null!==R&&(R.applyMatrix4(this.matrixWorld),_=o.ray.origin.distanceTo(R),f>_||_<o.near||_>o.far||s.push({distance:_,point:R,face:new THREE.Face3(p,c,u,THREE.Triangle.normal(r,n,a)),faceIndex:null,object:this}))}}else if(h instanceof THREE.Geometry)for(d=this.material instanceof THREE.MeshFaceMaterial,E=!0===d?this.material.materials:null,f=o.precision,m=h.vertices,g=0,T=h.faces.length;T>g;g++)if(v=h.faces[g],l=!0===d?E[v.materialIndex]:this.material,void 0!==l){if(p=m[v.a],c=m[v.b],u=m[v.c],!0===l.morphTargets){R=h.morphTargets,_=this.morphTargetInfluences,r.set(0,0,0),n.set(0,0,0),a.set(0,0,0);for(var y=0,x=R.length;x>y;y++){var H=_[y];if(0!==H){var b=R[y].vertices;r.x+=(b[v.a].x-p.x)*H,r.y+=(b[v.a].y-p.y)*H,r.z+=(b[v.a].z-p.z)*H,n.x+=(b[v.b].x-c.x)*H,n.y+=(b[v.b].y-c.y)*H,n.z+=(b[v.b].z-c.z)*H,a.x+=(b[v.c].x-u.x)*H,a.y+=(b[v.c].y-u.y)*H,a.z+=(b[v.c].z-u.z)*H}}r.add(p),n.add(c),a.add(u),p=r,c=n,u=a}R=l.side===THREE.BackSide?t.intersectTriangle(u,c,p,!0):t.intersectTriangle(p,c,u,l.side!==THREE.DoubleSide),null!==R&&(R.applyMatrix4(this.matrixWorld),_=o.ray.origin.distanceTo(R),f>_||_<o.near||_>o.far||s.push({distance:_,point:R,face:v,faceIndex:g,object:this}))}}}(),THREE.Mesh.prototype.clone=function(e,t){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e,t),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.type="Bone",this.skin=e},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.constructor=THREE.Bone,THREE.Skeleton=function(e,t,i){if(this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new THREE.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=e=256<this.bones.length?64:64<this.bones.length?32:16<this.bones.length?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(THREE.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[],t=0,e=this.bones.length;e>t;t++)this.boneInverses.push(new THREE.Matrix4)},THREE.Skeleton.prototype.calculateInverses=function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var i=new THREE.Matrix4;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},THREE.Skeleton.prototype.pose=function(){for(var e,t=0,i=this.bones.length;i>t;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;i>t;t++)(e=this.bones[t])&&(e.parent?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},THREE.Skeleton.prototype.update=function(){var e=new THREE.Matrix4;return function(){for(var t=0,i=this.bones.length;i>t;t++)e.multiplyMatrices(this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix,this.boneInverses[t]),e.flattenToArrayOffset(this.boneMatrices,16*t);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh=function(e,t,i){if(THREE.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new THREE.Matrix4,this.bindMatrixInverse=new THREE.Matrix4,e=[],this.geometry&&void 0!==this.geometry.bones){for(var r,n,a,o,s=0,h=this.geometry.bones.length;h>s;++s)r=this.geometry.bones[s],n=r.pos,a=r.rotq,o=r.scl,t=new THREE.Bone(this),e.push(t),t.name=r.name,t.position.set(n[0],n[1],n[2]),t.quaternion.set(a[0],a[1],a[2],a[3]),void 0!==o?t.scale.set(o[0],o[1],o[2]):t.scale.set(1,1,1);for(s=0,h=this.geometry.bones.length;h>s;++s)r=this.geometry.bones[s],-1!==r.parent?e[r.parent].add(e[s]):this.add(e[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new THREE.Skeleton(e,void 0,i))},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.constructor=THREE.SkinnedMesh,THREE.SkinnedMesh.prototype.bind=function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},THREE.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();1/0!==i?t.multiplyScalar(i):t.set(1)}},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){THREE.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):THREE.warn("THREE.SkinnedMesh unreckognized bindMode: "+this.bindMode)},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.type="MorphAnimMesh",this.duration=1e3,this.mirroredLoop=!1,this.currentKeyframe=this.lastKeyframe=this.time=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.constructor=THREE.MorphAnimMesh,THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,i=e.animations,r=/([a-z]+)_?(\d+)/,n=0,a=e.morphTargets.length;a>n;n++){var o=e.morphTargets[n].name.match(r);if(o&&1<o.length){o=o[1],i[o]||(i[o]={start:1/0,end:-1/0});var s=i[o];n<s.start&&(s.start=n),n>s.end&&(s.end=n),t||(t=o)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e];i?(this.setFrameRange(i.start,i.end),this.duration=(i.end-i.start)/t*1e3,this.time=0):THREE.warn("THREE.MorphAnimMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||0>this.time)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),0>this.time&&(this.time=0,this.directionBackwards=!1)):(this.time%=this.duration,0>this.time&&(this.time+=this.duration)),e=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1),e!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[e]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=e),t=this.time%t/t,this.directionBackwards&&(t=1-t),this.morphTargetInfluences[this.currentKeyframe]=t,this.morphTargetInfluences[this.lastKeyframe]=1-t},THREE.MorphAnimMesh.prototype.interpolateTargets=function(e,t,i){for(var r=this.morphTargetInfluences,n=0,a=r.length;a>n;n++)r[n]=0;e>-1&&(r[e]=1-i),t>-1&&(r[t]=i)},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;i>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,i)}}(),THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){if(1<this.objects.length){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),i=e.distanceTo(t),this.objects[0].object.visible=!0;for(var r=1,n=this.objects.length;n>r&&i>=this.objects[r].distance;r++)this.objects[r-1].object.visible=!1,this.objects[r].object.visible=!0;for(;n>r;r++)this.objects[r].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,i=this.objects.length;i>t;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new Uint16Array([0,1,2,0,2,3]),t=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),i=new Float32Array([0,0,1,0,1,1,0,1]),r=new THREE.BufferGeometry;return r.addAttribute("index",new THREE.BufferAttribute(e,1)),r.addAttribute("position",new THREE.BufferAttribute(t,3)),r.addAttribute("uv",new THREE.BufferAttribute(i,2)),function(e){THREE.Object3D.call(this),this.type="Sprite",this.geometry=r,this.material=void 0!==e?e:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.raycast=function(){var e=new THREE.Vector3;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceToPoint(e);r>this.scale.x||i.push({distance:r,point:this.position,face:null,object:this})}}(),THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.LensFlare=function(e,t,i,r,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,r,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.constructor=THREE.LensFlare,THREE.LensFlare.prototype.add=function(e,t,i,r,n,a){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===a&&(a=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:a,color:n,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;i>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.Scene=function(){THREE.Object3D.call(this),this.type="Scene",this.overrideMaterial=this.fog=null,this.autoUpdate=!0},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,i){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.ShaderChunk={},THREE.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n	float distance = dot( planeNormal, point-pointOnPlane );\n	return point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n	}\n	return 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n	return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\n",THREE.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",THREE.ShaderChunk.lights_lambert_vertex="vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n",THREE.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n",THREE.ShaderChunk.default_vertex="#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",THREE.ShaderChunk.map_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif",THREE.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif",THREE.ShaderChunk.lightmap_pars_vertex="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif",THREE.ShaderChunk.lights_phong_fragment="#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n			// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n",THREE.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif",THREE.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif",THREE.ShaderChunk.envmap_pars_fragment="#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",THREE.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n",THREE.ShaderChunk.lights_phong_pars_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n",THREE.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif",THREE.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif",THREE.ShaderChunk.lights_phong_vertex="#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif",THREE.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif",THREE.ShaderChunk.lightmap_vertex="#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif",THREE.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n",THREE.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n",THREE.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n	vColor.xyz = inputToLinear( color.xyz );\n\n#endif",THREE.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n",THREE.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n",THREE.ShaderChunk.linear_to_gamma_fragment="\n	outgoingLight = linearToOutput( outgoingLight );\n",THREE.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif",THREE.ShaderChunk.lights_lambert_pars_vertex="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n",THREE.ShaderChunk.map_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n",THREE.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif",THREE.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif",THREE.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif",THREE.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif",THREE.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n		fogFactor = whiteCompliment( fogFactor );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif",THREE.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n",THREE.ShaderChunk.defaultnormal_vertex="#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",THREE.ShaderChunk.lights_phong_pars_fragment="uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n",THREE.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",THREE.ShaderChunk.map_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",THREE.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\n	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif",THREE.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif",THREE.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif",THREE.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif",THREE.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_fragment="#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n	shadowColor = inputToLinear( shadowColor );\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n",THREE.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif",THREE.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n",THREE.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif",THREE.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",THREE.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n",THREE.UniformsUtils={merge:function(e){for(var t={},i=0;i<e.length;i++){var r,n=this.clone(e[i]);
for(r in n)t[r]=n[r]}return t},clone:function(e){var t,i={};for(t in e){i[t]={};for(var r in e[t]){var n=e[t][r];i[t][r]=n instanceof THREE.Color||n instanceof THREE.Vector2||n instanceof THREE.Vector3||n instanceof THREE.Vector4||n instanceof THREE.Matrix4||n instanceof THREE.Texture?n.clone():n instanceof Array?n.slice():n}}return i}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},pointLightDecay:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]},spotLightDecay:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"	#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"	#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"	#ifdef DOUBLE_SIDED\n		if ( gl_FrontFacing )\n			outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n		else\n			outgoingLight += diffuseColor.rgb * vLightBack + emissive;\n	#else\n		outgoingLight += diffuseColor.rgb * vLightFront + emissive;\n	#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif",THREE.ShaderChunk.common,THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"	vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.alphamap_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphamap_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n	#else\n		gl_PointSize = size;\n	#endif\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( psColor, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.alphatest_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.common,THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,THREE.ShaderChunk.color_fragment,"	outgoingLight = diffuseColor.rgb;",THREE.ShaderChunk.fog_fragment,"	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float mNear;\nuniform float mFar;\nuniform float opacity;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	float color = 1.0 - smoothstep( mNear, mFar, depth );\n	gl_FragColor = vec4( vec3( color ), opacity );\n}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vNormal;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;",THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"void main() {\nvec3 direction = normalize( vWorldPosition );\nvec2 sampleUV;\nsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\nsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\ngl_FragColor = texture2D( tEquirect, sampleUV );",THREE.ShaderChunk.logdepthbuf_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.logdepthbuf_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragmentShader:[THREE.ShaderChunk.common,THREE.ShaderChunk.logdepthbuf_pars_fragment,"vec4 pack_depth( const in float depth ) {\n	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\n	res -= res.xxyz * bit_mask;\n	return res;\n}\nvoid main() {",THREE.ShaderChunk.logdepthbuf_fragment,"	#ifdef USE_LOGDEPTHBUF_EXT\n		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\n	#else\n		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n	#endif\n}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e){var t=e.geometry;e=e.material;var i=t.vertices.length;if(e.attributes){void 0===t.__webglCustomAttributesList&&(t.__webglCustomAttributesList=[]);for(var r in e.attributes){var n=e.attributes[r];if(!n.__webglInitialized||n.createUniqueBuffers){n.__webglInitialized=!0;var a=1;"v2"===n.type?a=2:"v3"===n.type?a=3:"v4"===n.type?a=4:"c"===n.type&&(a=3),n.size=a,n.array=new Float32Array(i*a),n.buffer=Y.createBuffer(),n.buffer.belongsToAttribute=r,n.needsUpdate=!0}t.__webglCustomAttributesList.push(n)}}}function i(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function r(e,t,i,r){i=i.attributes;var n=t.attributes;t=t.attributesKeys;for(var a=0,o=t.length;o>a;a++){var s=t[a],h=n[s];if(h>=0){var l=i[s];void 0!==l?(s=l.itemSize,Y.bindBuffer(Y.ARRAY_BUFFER,l.buffer),gt.enableAttribute(h),Y.vertexAttribPointer(h,s,Y.FLOAT,!1,0,r*s*4)):void 0!==e.defaultAttributeValues&&(2===e.defaultAttributeValues[s].length?Y.vertexAttrib2fv(h,e.defaultAttributeValues[s]):3===e.defaultAttributeValues[s].length&&Y.vertexAttrib3fv(h,e.defaultAttributeValues[s]))}}gt.disableUnusedAttributes()}function n(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function a(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function o(e,t){return t[0]-e[0]}function s(e){if(!1!==e.visible){if(!(e instanceof THREE.Scene||e instanceof THREE.Group)){void 0===e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,e.addEventListener("removed",Ot));var i=e.geometry;if(void 0!==i&&void 0===i.__webglInit)if(i.__webglInit=!0,i.addEventListener("dispose",Vt),i instanceof THREE.BufferGeometry)K.info.memory.geometries++;else if(e instanceof THREE.Mesh)u(e,i);else if(e instanceof THREE.Line){if(void 0===i.__webglVertexBuffer){i.__webglVertexBuffer=Y.createBuffer(),i.__webglColorBuffer=Y.createBuffer(),i.__webglLineDistanceBuffer=Y.createBuffer(),K.info.memory.geometries++;var r=i.vertices.length;i.__vertexArray=new Float32Array(3*r),i.__colorArray=new Float32Array(3*r),i.__lineDistanceArray=new Float32Array(1*r),i.__webglLineCount=r,t(e),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0,i.lineDistancesNeedUpdate=!0}}else e instanceof THREE.PointCloud&&void 0===i.__webglVertexBuffer&&(i.__webglVertexBuffer=Y.createBuffer(),i.__webglColorBuffer=Y.createBuffer(),K.info.memory.geometries++,r=i.vertices.length,i.__vertexArray=new Float32Array(3*r),i.__colorArray=new Float32Array(3*r),i.__webglParticleCount=r,t(e),i.verticesNeedUpdate=!0,i.colorsNeedUpdate=!0);if(void 0===e.__webglActive)if(e.__webglActive=!0,e instanceof THREE.Mesh){if(i instanceof THREE.BufferGeometry)p(I,i,e);else if(i instanceof THREE.Geometry)for(var i=jt[i.id],r=0,n=i.length;n>r;r++)p(I,i[r],e)}else e instanceof THREE.Line||e instanceof THREE.PointCloud?p(I,i,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&G.push({id:null,object:e,opaque:null,transparent:null,z:0});if(e instanceof THREE.Light)N.push(e);else if(e instanceof THREE.Sprite)X.push(e);else if(e instanceof THREE.LensFlare)q.push(e);else if((i=I[e.id])&&(!1===e.frustumCulled||!0===lt.intersectsObject(e)))for(r=0,n=i.length;n>r;r++){var a=i[r],o=a,h=o.object,l=o.buffer,c=h.geometry,h=h.material;h instanceof THREE.MeshFaceMaterial?(h=h.materials[c instanceof THREE.BufferGeometry?0:l.materialIndex],o.material=h,h.transparent?j.push(o):W.push(o)):h&&(o.material=h,h.transparent?j.push(o):W.push(o)),a.render=!0,!0===K.sortObjects&&(ut.setFromMatrixPosition(e.matrixWorld),ut.applyProjection(ct),a.z=ut.z)}}for(r=0,n=e.children.length;n>r;r++)s(e.children[r])}}function h(e,t,i,r,n){for(var a,o=0,s=e.length;s>o;o++){a=e[o];var h=a.object,l=a.buffer;if(y(h,t),n)a=n;else{if(a=a.material,!a)continue;m(a)}K.setMaterialFaces(a),l instanceof THREE.BufferGeometry?K.renderBufferDirect(t,i,r,a,l,h):K.renderBuffer(t,i,r,a,l,h)}}function l(e,t,i,r,n,a){for(var o,s=0,h=e.length;h>s;s++){o=e[s];var l=o.object;if(l.visible){if(a)o=a;else{if(o=o[t],!o)continue;m(o)}K.renderImmediateObject(i,r,n,o,l)}}}function c(e){var t=e.object.material;t.transparent?(e.transparent=t,e.opaque=null):(e.opaque=t,e.transparent=null)}function u(e,t){var r=e.material,n=!1;if(void 0===jt[t.id]||!0===t.groupsNeedUpdate){delete I[e.id];for(var a,o,s=jt,h=t.id,r=r instanceof THREE.MeshFaceMaterial,l=Tt.get("OES_element_index_uint")?4294967296:65535,n={},c=t.morphTargets.length,u=t.morphNormals.length,f={},d=[],E=0,m=t.faces.length;m>E;E++){a=t.faces[E];var g=r?a.materialIndex:0;g in n||(n[g]={hash:g,counter:0}),a=n[g].hash+"_"+n[g].counter,a in f||(o={id:Xt++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:c,numMorphNormals:u},f[a]=o,d.push(o)),f[a].vertices+3>l&&(n[g].counter+=1,a=n[g].hash+"_"+n[g].counter,a in f||(o={id:Xt++,faces3:[],materialIndex:g,vertices:0,numMorphTargets:c,numMorphNormals:u},f[a]=o,d.push(o))),f[a].faces3.push(E),f[a].vertices+=3}s[h]=d,t.groupsNeedUpdate=!1}for(s=jt[t.id],h=0,r=s.length;r>h;h++){if(l=s[h],void 0===l.__webglVertexBuffer){if(n=l,n.__webglVertexBuffer=Y.createBuffer(),n.__webglNormalBuffer=Y.createBuffer(),n.__webglTangentBuffer=Y.createBuffer(),n.__webglColorBuffer=Y.createBuffer(),n.__webglUVBuffer=Y.createBuffer(),n.__webglUV2Buffer=Y.createBuffer(),n.__webglSkinIndicesBuffer=Y.createBuffer(),n.__webglSkinWeightsBuffer=Y.createBuffer(),n.__webglFaceBuffer=Y.createBuffer(),n.__webglLineBuffer=Y.createBuffer(),u=n.numMorphTargets)for(n.__webglMorphTargetsBuffers=[],c=0;u>c;c++)n.__webglMorphTargetsBuffers.push(Y.createBuffer());if(u=n.numMorphNormals)for(n.__webglMorphNormalsBuffers=[],c=0;u>c;c++)n.__webglMorphNormalsBuffers.push(Y.createBuffer());if(K.info.memory.geometries++,n=l,E=e,m=E.geometry,u=n.faces3,c=3*u.length,f=1*u.length,d=3*u.length,u=i(E,n),n.__vertexArray=new Float32Array(3*c),n.__normalArray=new Float32Array(3*c),n.__colorArray=new Float32Array(3*c),n.__uvArray=new Float32Array(2*c),1<m.faceVertexUvs.length&&(n.__uv2Array=new Float32Array(2*c)),m.hasTangents&&(n.__tangentArray=new Float32Array(4*c)),E.geometry.skinWeights.length&&E.geometry.skinIndices.length&&(n.__skinIndexArray=new Float32Array(4*c),n.__skinWeightArray=new Float32Array(4*c)),E=null!==Tt.get("OES_element_index_uint")&&f>21845?Uint32Array:Uint16Array,n.__typeArray=E,n.__faceArray=new E(3*f),n.__lineArray=new E(2*d),m=n.numMorphTargets)for(n.__morphTargetsArrays=[],E=0;m>E;E++)n.__morphTargetsArrays.push(new Float32Array(3*c));if(m=n.numMorphNormals)for(n.__morphNormalsArrays=[],E=0;m>E;E++)n.__morphNormalsArrays.push(new Float32Array(3*c));if(n.__webglFaceCount=3*f,n.__webglLineCount=2*d,u.attributes)for(f in void 0===n.__webglCustomAttributesList&&(n.__webglCustomAttributesList=[]),f=void 0,u.attributes){var T,d=u.attributes[f],E={};for(T in d)E[T]=d[T];(!E.__webglInitialized||E.createUniqueBuffers)&&(E.__webglInitialized=!0,m=1,"v2"===E.type?m=2:"v3"===E.type?m=3:"v4"===E.type?m=4:"c"===E.type&&(m=3),E.size=m,E.array=new Float32Array(c*m),E.buffer=Y.createBuffer(),E.buffer.belongsToAttribute=f,d.needsUpdate=!0,E.__original=d),n.__webglCustomAttributesList.push(E)}n.__inittedArrays=!0,t.verticesNeedUpdate=!0,t.morphTargetsNeedUpdate=!0,t.elementsNeedUpdate=!0,t.uvsNeedUpdate=!0,t.normalsNeedUpdate=!0,t.tangentsNeedUpdate=!0,n=t.colorsNeedUpdate=!0}else n=!1;(n||void 0===e.__webglActive)&&p(I,l,e)}e.__webglActive=!0}function p(e,t,i){var r=i.id;e[r]=e[r]||[],e[r].push({id:r,buffer:t,object:i,material:null,z:0})}function f(e){var t=e.geometry;if(t instanceof THREE.BufferGeometry)for(var r=t.attributes,n=t.attributesKeys,a=0,o=n.length;o>a;a++){var s=n[a],h=r[s],l="index"===s?Y.ELEMENT_ARRAY_BUFFER:Y.ARRAY_BUFFER;void 0===h.buffer?(h.buffer=Y.createBuffer(),Y.bindBuffer(l,h.buffer),Y.bufferData(l,h.array,h instanceof THREE.DynamicBufferAttribute?Y.DYNAMIC_DRAW:Y.STATIC_DRAW),h.needsUpdate=!1):!0===h.needsUpdate&&(Y.bindBuffer(l,h.buffer),void 0===h.updateRange||-1===h.updateRange.count?Y.bufferSubData(l,0,h.array):0===h.updateRange.count?console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually."):(Y.bufferSubData(l,h.updateRange.offset*h.array.BYTES_PER_ELEMENT,h.array.subarray(h.updateRange.offset,h.updateRange.offset+h.updateRange.count)),h.updateRange.count=0),h.needsUpdate=!1)}else if(e instanceof THREE.Mesh){!0===t.groupsNeedUpdate&&u(e,t);for(var c=jt[t.id],a=0,p=c.length;p>a;a++){var f=c[a],m=i(e,f),g=m.attributes&&d(m);if(t.verticesNeedUpdate||t.morphTargetsNeedUpdate||t.elementsNeedUpdate||t.uvsNeedUpdate||t.normalsNeedUpdate||t.colorsNeedUpdate||t.tangentsNeedUpdate||g){var T=f,v=e,y=Y.DYNAMIC_DRAW,R=!t.dynamic,_=m;if(T.__inittedArrays){var x=!1==_ instanceof THREE.MeshPhongMaterial&&_.shading===THREE.FlatShading,H=void 0,b=void 0,w=void 0,M=void 0,S=void 0,A=void 0,C=void 0,P=void 0,L=void 0,F=void 0,D=void 0,U=void 0,B=void 0,k=void 0,O=void 0,V=void 0,z=void 0,N=void 0,I=void 0,G=void 0,W=void 0,j=void 0,X=void 0,q=void 0,K=void 0,Q=void 0,Z=void 0,J=void 0,$=void 0,et=void 0,tt=void 0,it=void 0,rt=void 0,nt=void 0,at=void 0,ot=void 0,st=void 0,ht=void 0,lt=void 0,ct=void 0,ut=0,pt=0,ft=0,dt=0,Et=0,mt=0,gt=0,Tt=0,vt=0,yt=0,Rt=0,_t=0,xt=void 0,Ht=T.__vertexArray,bt=T.__uvArray,wt=T.__uv2Array,Mt=T.__normalArray,St=T.__tangentArray,At=T.__colorArray,Ct=T.__skinIndexArray,Pt=T.__skinWeightArray,Lt=T.__morphTargetsArrays,Ft=T.__morphNormalsArrays,Dt=T.__webglCustomAttributesList,Ut=void 0,Bt=T.__faceArray,kt=T.__lineArray,Ot=v.geometry,Vt=Ot.elementsNeedUpdate,zt=Ot.uvsNeedUpdate,Nt=Ot.normalsNeedUpdate,It=Ot.tangentsNeedUpdate,Gt=Ot.colorsNeedUpdate,Wt=Ot.morphTargetsNeedUpdate,Xt=Ot.vertices,qt=T.faces3,Yt=Ot.faces,Kt=Ot.faceVertexUvs[0],Qt=Ot.faceVertexUvs[1],Zt=Ot.skinIndices,Jt=Ot.skinWeights,$t=Ot.morphTargets,ei=Ot.morphNormals;if(Ot.verticesNeedUpdate){for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],U=Xt[M.a],B=Xt[M.b],k=Xt[M.c],Ht[pt]=U.x,Ht[pt+1]=U.y,Ht[pt+2]=U.z,Ht[pt+3]=B.x,Ht[pt+4]=B.y,Ht[pt+5]=B.z,Ht[pt+6]=k.x,Ht[pt+7]=k.y,Ht[pt+8]=k.z,pt+=9;Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglVertexBuffer),Y.bufferData(Y.ARRAY_BUFFER,Ht,y)}if(Wt)for(at=0,ot=$t.length;ot>at;at++){for(H=Rt=0,b=qt.length;b>H;H++)lt=qt[H],M=Yt[lt],U=$t[at].vertices[M.a],B=$t[at].vertices[M.b],k=$t[at].vertices[M.c],st=Lt[at],st[Rt]=U.x,st[Rt+1]=U.y,st[Rt+2]=U.z,st[Rt+3]=B.x,st[Rt+4]=B.y,st[Rt+5]=B.z,st[Rt+6]=k.x,st[Rt+7]=k.y,st[Rt+8]=k.z,_.morphNormals&&(x?G=I=N=ei[at].faceNormals[lt]:(ct=ei[at].vertexNormals[lt],N=ct.a,I=ct.b,G=ct.c),ht=Ft[at],ht[Rt]=N.x,ht[Rt+1]=N.y,ht[Rt+2]=N.z,ht[Rt+3]=I.x,ht[Rt+4]=I.y,ht[Rt+5]=I.z,ht[Rt+6]=G.x,ht[Rt+7]=G.y,ht[Rt+8]=G.z),Rt+=9;Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglMorphTargetsBuffers[at]),Y.bufferData(Y.ARRAY_BUFFER,Lt[at],y),_.morphNormals&&(Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglMorphNormalsBuffers[at]),Y.bufferData(Y.ARRAY_BUFFER,Ft[at],y))}if(Jt.length){for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],q=Jt[M.a],K=Jt[M.b],Q=Jt[M.c],Pt[yt]=q.x,Pt[yt+1]=q.y,Pt[yt+2]=q.z,Pt[yt+3]=q.w,Pt[yt+4]=K.x,Pt[yt+5]=K.y,Pt[yt+6]=K.z,Pt[yt+7]=K.w,Pt[yt+8]=Q.x,Pt[yt+9]=Q.y,Pt[yt+10]=Q.z,Pt[yt+11]=Q.w,Z=Zt[M.a],J=Zt[M.b],$=Zt[M.c],Ct[yt]=Z.x,Ct[yt+1]=Z.y,Ct[yt+2]=Z.z,Ct[yt+3]=Z.w,Ct[yt+4]=J.x,Ct[yt+5]=J.y,Ct[yt+6]=J.z,Ct[yt+7]=J.w,Ct[yt+8]=$.x,Ct[yt+9]=$.y,Ct[yt+10]=$.z,Ct[yt+11]=$.w,yt+=12;yt>0&&(Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglSkinIndicesBuffer),Y.bufferData(Y.ARRAY_BUFFER,Ct,y),Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglSkinWeightsBuffer),Y.bufferData(Y.ARRAY_BUFFER,Pt,y))}if(Gt){for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],C=M.vertexColors,P=M.color,3===C.length&&_.vertexColors===THREE.VertexColors?(W=C[0],j=C[1],X=C[2]):X=j=W=P,At[vt]=W.r,At[vt+1]=W.g,At[vt+2]=W.b,At[vt+3]=j.r,At[vt+4]=j.g,At[vt+5]=j.b,At[vt+6]=X.r,At[vt+7]=X.g,At[vt+8]=X.b,vt+=9;vt>0&&(Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglColorBuffer),Y.bufferData(Y.ARRAY_BUFFER,At,y))}if(It&&Ot.hasTangents){for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],L=M.vertexTangents,O=L[0],V=L[1],z=L[2],St[gt]=O.x,St[gt+1]=O.y,St[gt+2]=O.z,St[gt+3]=O.w,St[gt+4]=V.x,St[gt+5]=V.y,St[gt+6]=V.z,St[gt+7]=V.w,St[gt+8]=z.x,St[gt+9]=z.y,St[gt+10]=z.z,St[gt+11]=z.w,gt+=12;Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglTangentBuffer),Y.bufferData(Y.ARRAY_BUFFER,St,y)}if(Nt){for(H=0,b=qt.length;b>H;H++)if(M=Yt[qt[H]],S=M.vertexNormals,A=M.normal,3===S.length&&!1===x)for(et=0;3>et;et++)it=S[et],Mt[mt]=it.x,Mt[mt+1]=it.y,Mt[mt+2]=it.z,mt+=3;else for(et=0;3>et;et++)Mt[mt]=A.x,Mt[mt+1]=A.y,Mt[mt+2]=A.z,mt+=3;Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglNormalBuffer),Y.bufferData(Y.ARRAY_BUFFER,Mt,y)}if(zt&&Kt){for(H=0,b=qt.length;b>H;H++)if(w=qt[H],F=Kt[w],void 0!==F)for(et=0;3>et;et++)rt=F[et],bt[ft]=rt.x,bt[ft+1]=rt.y,ft+=2;ft>0&&(Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglUVBuffer),Y.bufferData(Y.ARRAY_BUFFER,bt,y))}if(zt&&Qt){for(H=0,b=qt.length;b>H;H++)if(w=qt[H],D=Qt[w],void 0!==D)for(et=0;3>et;et++)nt=D[et],wt[dt]=nt.x,wt[dt+1]=nt.y,dt+=2;dt>0&&(Y.bindBuffer(Y.ARRAY_BUFFER,T.__webglUV2Buffer),Y.bufferData(Y.ARRAY_BUFFER,wt,y))}if(Vt){for(H=0,b=qt.length;b>H;H++)Bt[Et]=ut,Bt[Et+1]=ut+1,Bt[Et+2]=ut+2,Et+=3,kt[Tt]=ut,kt[Tt+1]=ut+1,kt[Tt+2]=ut,kt[Tt+3]=ut+2,kt[Tt+4]=ut+1,kt[Tt+5]=ut+2,Tt+=6,ut+=3;Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,T.__webglFaceBuffer),Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,Bt,y),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,T.__webglLineBuffer),Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,kt,y)}if(Dt)for(et=0,tt=Dt.length;tt>et;et++)if(Ut=Dt[et],Ut.__original.needsUpdate){if(_t=0,1===Ut.size){if(void 0===Ut.boundTo||"vertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],Ut.array[_t]=Ut.value[M.a],Ut.array[_t+1]=Ut.value[M.b],Ut.array[_t+2]=Ut.value[M.c],_t+=3;else if("faces"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)xt=Ut.value[qt[H]],Ut.array[_t]=xt,Ut.array[_t+1]=xt,Ut.array[_t+2]=xt,_t+=3}else if(2===Ut.size){if(void 0===Ut.boundTo||"vertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],U=Ut.value[M.a],B=Ut.value[M.b],k=Ut.value[M.c],Ut.array[_t]=U.x,Ut.array[_t+1]=U.y,Ut.array[_t+2]=B.x,Ut.array[_t+3]=B.y,Ut.array[_t+4]=k.x,Ut.array[_t+5]=k.y,_t+=6;else if("faces"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)k=B=U=xt=Ut.value[qt[H]],Ut.array[_t]=U.x,Ut.array[_t+1]=U.y,Ut.array[_t+2]=B.x,Ut.array[_t+3]=B.y,Ut.array[_t+4]=k.x,Ut.array[_t+5]=k.y,_t+=6}else if(3===Ut.size){var ti;if(ti="c"===Ut.type?["r","g","b"]:["x","y","z"],void 0===Ut.boundTo||"vertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],U=Ut.value[M.a],B=Ut.value[M.b],k=Ut.value[M.c],Ut.array[_t]=U[ti[0]],Ut.array[_t+1]=U[ti[1]],Ut.array[_t+2]=U[ti[2]],Ut.array[_t+3]=B[ti[0]],Ut.array[_t+4]=B[ti[1]],Ut.array[_t+5]=B[ti[2]],Ut.array[_t+6]=k[ti[0]],Ut.array[_t+7]=k[ti[1]],Ut.array[_t+8]=k[ti[2]],_t+=9;else if("faces"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)k=B=U=xt=Ut.value[qt[H]],Ut.array[_t]=U[ti[0]],Ut.array[_t+1]=U[ti[1]],Ut.array[_t+2]=U[ti[2]],Ut.array[_t+3]=B[ti[0]],Ut.array[_t+4]=B[ti[1]],Ut.array[_t+5]=B[ti[2]],Ut.array[_t+6]=k[ti[0]],Ut.array[_t+7]=k[ti[1]],Ut.array[_t+8]=k[ti[2]],_t+=9;
else if("faceVertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)xt=Ut.value[qt[H]],U=xt[0],B=xt[1],k=xt[2],Ut.array[_t]=U[ti[0]],Ut.array[_t+1]=U[ti[1]],Ut.array[_t+2]=U[ti[2]],Ut.array[_t+3]=B[ti[0]],Ut.array[_t+4]=B[ti[1]],Ut.array[_t+5]=B[ti[2]],Ut.array[_t+6]=k[ti[0]],Ut.array[_t+7]=k[ti[1]],Ut.array[_t+8]=k[ti[2]],_t+=9}else if(4===Ut.size)if(void 0===Ut.boundTo||"vertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)M=Yt[qt[H]],U=Ut.value[M.a],B=Ut.value[M.b],k=Ut.value[M.c],Ut.array[_t]=U.x,Ut.array[_t+1]=U.y,Ut.array[_t+2]=U.z,Ut.array[_t+3]=U.w,Ut.array[_t+4]=B.x,Ut.array[_t+5]=B.y,Ut.array[_t+6]=B.z,Ut.array[_t+7]=B.w,Ut.array[_t+8]=k.x,Ut.array[_t+9]=k.y,Ut.array[_t+10]=k.z,Ut.array[_t+11]=k.w,_t+=12;else if("faces"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)k=B=U=xt=Ut.value[qt[H]],Ut.array[_t]=U.x,Ut.array[_t+1]=U.y,Ut.array[_t+2]=U.z,Ut.array[_t+3]=U.w,Ut.array[_t+4]=B.x,Ut.array[_t+5]=B.y,Ut.array[_t+6]=B.z,Ut.array[_t+7]=B.w,Ut.array[_t+8]=k.x,Ut.array[_t+9]=k.y,Ut.array[_t+10]=k.z,Ut.array[_t+11]=k.w,_t+=12;else if("faceVertices"===Ut.boundTo)for(H=0,b=qt.length;b>H;H++)xt=Ut.value[qt[H]],U=xt[0],B=xt[1],k=xt[2],Ut.array[_t]=U.x,Ut.array[_t+1]=U.y,Ut.array[_t+2]=U.z,Ut.array[_t+3]=U.w,Ut.array[_t+4]=B.x,Ut.array[_t+5]=B.y,Ut.array[_t+6]=B.z,Ut.array[_t+7]=B.w,Ut.array[_t+8]=k.x,Ut.array[_t+9]=k.y,Ut.array[_t+10]=k.z,Ut.array[_t+11]=k.w,_t+=12;Y.bindBuffer(Y.ARRAY_BUFFER,Ut.buffer),Y.bufferData(Y.ARRAY_BUFFER,Ut.array,y)}R&&(delete T.__inittedArrays,delete T.__colorArray,delete T.__normalArray,delete T.__tangentArray,delete T.__uvArray,delete T.__uv2Array,delete T.__faceArray,delete T.__vertexArray,delete T.__lineArray,delete T.__skinIndexArray,delete T.__skinWeightArray)}}}t.verticesNeedUpdate=!1,t.morphTargetsNeedUpdate=!1,t.elementsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.tangentsNeedUpdate=!1,m.attributes&&E(m)}else if(e instanceof THREE.Line){if(m=i(e,t),g=m.attributes&&d(m),t.verticesNeedUpdate||t.colorsNeedUpdate||t.lineDistancesNeedUpdate||g){var ii,ri,ni,ai,oi,si,hi,li,ci,ui,pi,fi,di=Y.DYNAMIC_DRAW,Ei=t.vertices,mi=t.colors,gi=t.lineDistances,Ti=Ei.length,vi=mi.length,yi=gi.length,Ri=t.__vertexArray,_i=t.__colorArray,xi=t.__lineDistanceArray,Hi=t.colorsNeedUpdate,bi=t.lineDistancesNeedUpdate,wi=t.__webglCustomAttributesList;if(t.verticesNeedUpdate){for(ii=0;Ti>ii;ii++)ai=Ei[ii],oi=3*ii,Ri[oi]=ai.x,Ri[oi+1]=ai.y,Ri[oi+2]=ai.z;Y.bindBuffer(Y.ARRAY_BUFFER,t.__webglVertexBuffer),Y.bufferData(Y.ARRAY_BUFFER,Ri,di)}if(Hi){for(ri=0;vi>ri;ri++)si=mi[ri],oi=3*ri,_i[oi]=si.r,_i[oi+1]=si.g,_i[oi+2]=si.b;Y.bindBuffer(Y.ARRAY_BUFFER,t.__webglColorBuffer),Y.bufferData(Y.ARRAY_BUFFER,_i,di)}if(bi){for(ni=0;yi>ni;ni++)xi[ni]=gi[ni];Y.bindBuffer(Y.ARRAY_BUFFER,t.__webglLineDistanceBuffer),Y.bufferData(Y.ARRAY_BUFFER,xi,di)}if(wi)for(hi=0,li=wi.length;li>hi;hi++)if(fi=wi[hi],fi.needsUpdate&&(void 0===fi.boundTo||"vertices"===fi.boundTo)){if(oi=0,ui=fi.value.length,1===fi.size)for(ci=0;ui>ci;ci++)fi.array[ci]=fi.value[ci];else if(2===fi.size)for(ci=0;ui>ci;ci++)pi=fi.value[ci],fi.array[oi]=pi.x,fi.array[oi+1]=pi.y,oi+=2;else if(3===fi.size)if("c"===fi.type)for(ci=0;ui>ci;ci++)pi=fi.value[ci],fi.array[oi]=pi.r,fi.array[oi+1]=pi.g,fi.array[oi+2]=pi.b,oi+=3;else for(ci=0;ui>ci;ci++)pi=fi.value[ci],fi.array[oi]=pi.x,fi.array[oi+1]=pi.y,fi.array[oi+2]=pi.z,oi+=3;else if(4===fi.size)for(ci=0;ui>ci;ci++)pi=fi.value[ci],fi.array[oi]=pi.x,fi.array[oi+1]=pi.y,fi.array[oi+2]=pi.z,fi.array[oi+3]=pi.w,oi+=4;Y.bindBuffer(Y.ARRAY_BUFFER,fi.buffer),Y.bufferData(Y.ARRAY_BUFFER,fi.array,di),fi.needsUpdate=!1}}t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,t.lineDistancesNeedUpdate=!1,m.attributes&&E(m)}else if(e instanceof THREE.PointCloud){if(m=i(e,t),g=m.attributes&&d(m),t.verticesNeedUpdate||t.colorsNeedUpdate||g){var Mi,Si,Ai,Ci,Pi,Li,Fi,Di,Ui,Bi,ki,Oi=Y.DYNAMIC_DRAW,Vi=t.vertices,zi=Vi.length,Ni=t.colors,Ii=Ni.length,Gi=t.__vertexArray,Wi=t.__colorArray,ji=t.colorsNeedUpdate,Xi=t.__webglCustomAttributesList;if(t.verticesNeedUpdate){for(Mi=0;zi>Mi;Mi++)Ai=Vi[Mi],Ci=3*Mi,Gi[Ci]=Ai.x,Gi[Ci+1]=Ai.y,Gi[Ci+2]=Ai.z;Y.bindBuffer(Y.ARRAY_BUFFER,t.__webglVertexBuffer),Y.bufferData(Y.ARRAY_BUFFER,Gi,Oi)}if(ji){for(Si=0;Ii>Si;Si++)Pi=Ni[Si],Ci=3*Si,Wi[Ci]=Pi.r,Wi[Ci+1]=Pi.g,Wi[Ci+2]=Pi.b;Y.bindBuffer(Y.ARRAY_BUFFER,t.__webglColorBuffer),Y.bufferData(Y.ARRAY_BUFFER,Wi,Oi)}if(Xi)for(Li=0,Fi=Xi.length;Fi>Li;Li++){if(ki=Xi[Li],ki.needsUpdate&&(void 0===ki.boundTo||"vertices"===ki.boundTo))if(Ui=ki.value.length,Ci=0,1===ki.size)for(Di=0;Ui>Di;Di++)ki.array[Di]=ki.value[Di];else if(2===ki.size)for(Di=0;Ui>Di;Di++)Bi=ki.value[Di],ki.array[Ci]=Bi.x,ki.array[Ci+1]=Bi.y,Ci+=2;else if(3===ki.size)if("c"===ki.type)for(Di=0;Ui>Di;Di++)Bi=ki.value[Di],ki.array[Ci]=Bi.r,ki.array[Ci+1]=Bi.g,ki.array[Ci+2]=Bi.b,Ci+=3;else for(Di=0;Ui>Di;Di++)Bi=ki.value[Di],ki.array[Ci]=Bi.x,ki.array[Ci+1]=Bi.y,ki.array[Ci+2]=Bi.z,Ci+=3;else if(4===ki.size)for(Di=0;Ui>Di;Di++)Bi=ki.value[Di],ki.array[Ci]=Bi.x,ki.array[Ci+1]=Bi.y,ki.array[Ci+2]=Bi.z,ki.array[Ci+3]=Bi.w,Ci+=4;Y.bindBuffer(Y.ARRAY_BUFFER,ki.buffer),Y.bufferData(Y.ARRAY_BUFFER,ki.array,Oi),ki.needsUpdate=!1}}t.verticesNeedUpdate=!1,t.colorsNeedUpdate=!1,m.attributes&&E(m)}}function d(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function E(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function m(e){!0===e.transparent?gt.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha):gt.setBlending(THREE.NoBlending),gt.setDepthTest(e.depthTest),gt.setDepthWrite(e.depthWrite),gt.setColorWrite(e.colorWrite),gt.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function g(e,t,i,r,n){var a,o,s,h;if(it=0,r.needsUpdate){r.program&&Wt(r),r.addEventListener("dispose",It);var l=qt[r.type];if(l){var c=THREE.ShaderLib[l];r.__webglShader={uniforms:THREE.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.__webglShader={uniforms:r.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader};for(var u=0,p=0,f=0,d=0,E=0,m=t.length;m>E;E++){var g=t[E];g.onlyShadow||!1===g.visible||(g instanceof THREE.DirectionalLight&&u++,g instanceof THREE.PointLight&&p++,g instanceof THREE.SpotLight&&f++,g instanceof THREE.HemisphereLight&&d++)}a=u,o=p,s=f,h=d;for(var y,H=0,b=0,w=t.length;w>b;b++){var A=t[b];A.castShadow&&(A instanceof THREE.SpotLight&&H++,A instanceof THREE.DirectionalLight&&!A.shadowCascade&&H++)}y=H;var C;if(Mt&&n&&n.skeleton&&n.skeleton.useVertexTexture)C=1024;else{var L=Y.getParameter(Y.MAX_VERTEX_UNIFORM_VECTORS),F=Math.floor((L-20)/4);void 0!==n&&n instanceof THREE.SkinnedMesh&&(F=Math.min(n.skeleton.bones.length,F),F<n.skeleton.bones.length&&THREE.warn("WebGLRenderer: too many bones - "+n.skeleton.bones.length+", this GPU supports just "+F+" (try OpenGL instead of ANGLE)")),C=F}var D={precision:P,supportsVertexTextures:wt,map:!!r.map,envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,lightMap:!!r.lightMap,bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,combine:r.combine,vertexColors:r.vertexColors,fog:i,useFog:r.fog,fogExp:i instanceof THREE.FogExp2,flatShading:r.shading===THREE.FlatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:O,skinning:r.skinning,maxBones:C,useVertexTexture:Mt&&n&&n.skeleton&&n.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:K.maxMorphTargets,maxMorphNormals:K.maxMorphNormals,maxDirLights:a,maxPointLights:o,maxSpotLights:s,maxHemiLights:h,maxShadows:y,shadowMapEnabled:K.shadowMapEnabled&&n.receiveShadow&&y>0,shadowMapType:K.shadowMapType,shadowMapDebug:K.shadowMapDebug,shadowMapCascade:K.shadowMapCascade,alphaTest:r.alphaTest,metal:r.metal,wrapAround:r.wrapAround,doubleSided:r.side===THREE.DoubleSide,flipSided:r.side===THREE.BackSide},U=[];if(l?U.push(l):(U.push(r.fragmentShader),U.push(r.vertexShader)),void 0!==r.defines)for(var B in r.defines)U.push(B),U.push(r.defines[B]);for(B in D)U.push(B),U.push(D[B]);for(var k,V=U.join(),z=0,N=Q.length;N>z;z++){var I=Q[z];if(I.code===V){k=I,k.usedTimes++;break}}void 0===k&&(k=new THREE.WebGLProgram(K,V,r,D),Q.push(k),K.info.memory.programs=Q.length),r.program=k;var G=k.attributes;if(r.morphTargets){r.numSupportedMorphTargets=0;for(var W,j="morphTarget",X=0;X<K.maxMorphTargets;X++)W=j+X,0<=G[W]&&r.numSupportedMorphTargets++}if(r.morphNormals)for(r.numSupportedMorphNormals=0,j="morphNormal",X=0;X<K.maxMorphNormals;X++)W=j+X,0<=G[W]&&r.numSupportedMorphNormals++;r.uniformsList=[];for(var q in r.__webglShader.uniforms){var J=r.program.uniforms[q];J&&r.uniformsList.push([r.__webglShader.uniforms[q],J])}r.needsUpdate=!1}r.morphTargets&&!n.__webglMorphTargetInfluences&&(n.__webglMorphTargetInfluences=new Float32Array(K.maxMorphTargets));var et=!1,rt=!1,nt=!1,at=r.program,ot=at.uniforms,st=r.__webglShader.uniforms;if(at.id!==Z&&(Y.useProgram(at.program),Z=at.id,nt=rt=et=!0),r.id!==$&&(-1===$&&(nt=!0),$=r.id,rt=!0),(et||e!==tt)&&(Y.uniformMatrix4fv(ot.projectionMatrix,!1,e.projectionMatrix.elements),O&&Y.uniform1f(ot.logDepthBufFC,2/(Math.log(e.far+1)/Math.LN2)),e!==tt&&(tt=e),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==ot.cameraPosition&&(ut.setFromMatrixPosition(e.matrixWorld),Y.uniform3f(ot.cameraPosition,ut.x,ut.y,ut.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshBasicMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==ot.viewMatrix&&Y.uniformMatrix4fv(ot.viewMatrix,!1,e.matrixWorldInverse.elements)),r.skinning)if(n.bindMatrix&&null!==ot.bindMatrix&&Y.uniformMatrix4fv(ot.bindMatrix,!1,n.bindMatrix.elements),n.bindMatrixInverse&&null!==ot.bindMatrixInverse&&Y.uniformMatrix4fv(ot.bindMatrixInverse,!1,n.bindMatrixInverse.elements),Mt&&n.skeleton&&n.skeleton.useVertexTexture){if(null!==ot.boneTexture){var ht=v();Y.uniform1i(ot.boneTexture,ht),K.setTexture(n.skeleton.boneTexture,ht)}null!==ot.boneTextureWidth&&Y.uniform1i(ot.boneTextureWidth,n.skeleton.boneTextureWidth),null!==ot.boneTextureHeight&&Y.uniform1i(ot.boneTextureHeight,n.skeleton.boneTextureHeight)}else n.skeleton&&n.skeleton.boneMatrices&&null!==ot.boneGlobalMatrices&&Y.uniformMatrix4fv(ot.boneGlobalMatrices,!1,n.skeleton.boneMatrices);if(rt){if(i&&r.fog&&(st.fogColor.value=i.color,i instanceof THREE.Fog?(st.fogNear.value=i.near,st.fogFar.value=i.far):i instanceof THREE.FogExp2&&(st.fogDensity.value=i.density)),r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights){if(ft){var lt,ct,Et,mt,gt,Tt,vt,yt,nt=!0,Rt=0,_t=0,xt=0,Ht=dt,St=Ht.directional.colors,At=Ht.directional.positions,Ct=Ht.point.colors,Pt=Ht.point.positions,Ft=Ht.point.distances,Dt=Ht.point.decays,Ut=Ht.spot.colors,Bt=Ht.spot.positions,kt=Ht.spot.distances,Ot=Ht.spot.directions,Vt=Ht.spot.anglesCos,Nt=Ht.spot.exponents,Gt=Ht.spot.decays,jt=Ht.hemi.skyColors,Xt=Ht.hemi.groundColors,Yt=Ht.hemi.positions,Kt=0,Qt=0,Zt=0,Jt=0,$t=0,ei=0,ti=0,ii=0,ri=0,ni=0,ai=0,oi=0;for(lt=0,ct=t.length;ct>lt;lt++)Et=t[lt],Et.onlyShadow||(mt=Et.color,vt=Et.intensity,yt=Et.distance,Et instanceof THREE.AmbientLight?Et.visible&&(Rt+=mt.r,_t+=mt.g,xt+=mt.b):Et instanceof THREE.DirectionalLight?($t+=1,Et.visible&&(pt.setFromMatrixPosition(Et.matrixWorld),ut.setFromMatrixPosition(Et.target.matrixWorld),pt.sub(ut),pt.normalize(),ri=3*Kt,At[ri]=pt.x,At[ri+1]=pt.y,At[ri+2]=pt.z,R(St,ri,mt,vt),Kt+=1)):Et instanceof THREE.PointLight?(ei+=1,Et.visible&&(ni=3*Qt,R(Ct,ni,mt,vt),ut.setFromMatrixPosition(Et.matrixWorld),Pt[ni]=ut.x,Pt[ni+1]=ut.y,Pt[ni+2]=ut.z,Ft[Qt]=yt,Dt[Qt]=0===Et.distance?0:Et.decay,Qt+=1)):Et instanceof THREE.SpotLight?(ti+=1,Et.visible&&(ai=3*Zt,R(Ut,ai,mt,vt),pt.setFromMatrixPosition(Et.matrixWorld),Bt[ai]=pt.x,Bt[ai+1]=pt.y,Bt[ai+2]=pt.z,kt[Zt]=yt,ut.setFromMatrixPosition(Et.target.matrixWorld),pt.sub(ut),pt.normalize(),Ot[ai]=pt.x,Ot[ai+1]=pt.y,Ot[ai+2]=pt.z,Vt[Zt]=Math.cos(Et.angle),Nt[Zt]=Et.exponent,Gt[Zt]=0===Et.distance?0:Et.decay,Zt+=1)):Et instanceof THREE.HemisphereLight&&(ii+=1,Et.visible&&(pt.setFromMatrixPosition(Et.matrixWorld),pt.normalize(),oi=3*Jt,Yt[oi]=pt.x,Yt[oi+1]=pt.y,Yt[oi+2]=pt.z,gt=Et.color,Tt=Et.groundColor,R(jt,oi,gt,vt),R(Xt,oi,Tt,vt),Jt+=1)));for(lt=3*Kt,ct=Math.max(St.length,3*$t);ct>lt;lt++)St[lt]=0;for(lt=3*Qt,ct=Math.max(Ct.length,3*ei);ct>lt;lt++)Ct[lt]=0;for(lt=3*Zt,ct=Math.max(Ut.length,3*ti);ct>lt;lt++)Ut[lt]=0;for(lt=3*Jt,ct=Math.max(jt.length,3*ii);ct>lt;lt++)jt[lt]=0;for(lt=3*Jt,ct=Math.max(Xt.length,3*ii);ct>lt;lt++)Xt[lt]=0;Ht.directional.length=Kt,Ht.point.length=Qt,Ht.spot.length=Zt,Ht.hemi.length=Jt,Ht.ambient[0]=Rt,Ht.ambient[1]=_t,Ht.ambient[2]=xt,ft=!1}if(nt){var si=dt;st.ambientLightColor.value=si.ambient,st.directionalLightColor.value=si.directional.colors,st.directionalLightDirection.value=si.directional.positions,st.pointLightColor.value=si.point.colors,st.pointLightPosition.value=si.point.positions,st.pointLightDistance.value=si.point.distances,st.pointLightDecay.value=si.point.decays,st.spotLightColor.value=si.spot.colors,st.spotLightPosition.value=si.spot.positions,st.spotLightDistance.value=si.spot.distances,st.spotLightDirection.value=si.spot.directions,st.spotLightAngleCos.value=si.spot.anglesCos,st.spotLightExponent.value=si.spot.exponents,st.spotLightDecay.value=si.spot.decays,st.hemisphereLightSkyColor.value=si.hemi.skyColors,st.hemisphereLightGroundColor.value=si.hemi.groundColors,st.hemisphereLightDirection.value=si.hemi.positions,T(st,!0)}else T(st,!1)}if(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial){st.opacity.value=r.opacity,st.diffuse.value=r.color,st.map.value=r.map,st.lightMap.value=r.lightMap,st.specularMap.value=r.specularMap,st.alphaMap.value=r.alphaMap,r.bumpMap&&(st.bumpMap.value=r.bumpMap,st.bumpScale.value=r.bumpScale),r.normalMap&&(st.normalMap.value=r.normalMap,st.normalScale.value.copy(r.normalScale));var hi;if(r.map?hi=r.map:r.specularMap?hi=r.specularMap:r.normalMap?hi=r.normalMap:r.bumpMap?hi=r.bumpMap:r.alphaMap&&(hi=r.alphaMap),void 0!==hi){var li=hi.offset,ci=hi.repeat;st.offsetRepeat.value.set(li.x,li.y,ci.x,ci.y)}st.envMap.value=r.envMap,st.flipEnvMap.value=r.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,st.reflectivity.value=r.reflectivity,st.refractionRatio.value=r.refractionRatio}if(r instanceof THREE.LineBasicMaterial)st.diffuse.value=r.color,st.opacity.value=r.opacity;else if(r instanceof THREE.LineDashedMaterial)st.diffuse.value=r.color,st.opacity.value=r.opacity,st.dashSize.value=r.dashSize,st.totalSize.value=r.dashSize+r.gapSize,st.scale.value=r.scale;else if(r instanceof THREE.PointCloudMaterial){if(st.psColor.value=r.color,st.opacity.value=r.opacity,st.size.value=r.size,st.scale.value=S.height/2,st.map.value=r.map,null!==r.map){var ui=r.map.offset,pi=r.map.repeat;st.offsetRepeat.value.set(ui.x,ui.y,pi.x,pi.y)}}else r instanceof THREE.MeshPhongMaterial?(st.shininess.value=r.shininess,st.emissive.value=r.emissive,st.specular.value=r.specular,r.wrapAround&&st.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshLambertMaterial?(st.emissive.value=r.emissive,r.wrapAround&&st.wrapRGB.value.copy(r.wrapRGB)):r instanceof THREE.MeshDepthMaterial?(st.mNear.value=e.near,st.mFar.value=e.far,st.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(st.opacity.value=r.opacity);if(n.receiveShadow&&!r._shadowPass&&st.shadowMatrix)for(var fi=0,di=0,Ei=t.length;Ei>di;di++){var mi=t[di];mi.castShadow&&(mi instanceof THREE.SpotLight||mi instanceof THREE.DirectionalLight&&!mi.shadowCascade)&&(st.shadowMap.value[fi]=mi.shadowMap,st.shadowMapSize.value[fi]=mi.shadowMapSize,st.shadowMatrix.value[fi]=mi.shadowMatrix,st.shadowDarkness.value[fi]=mi.shadowDarkness,st.shadowBias.value[fi]=mi.shadowBias,fi++)}for(var gi,Ti,vi,yi=r.uniformsList,Ri=0,_i=yi.length;_i>Ri;Ri++){var xi=yi[Ri][0];if(!1!==xi.needsUpdate){var Hi=xi.type,bi=xi.value,wi=yi[Ri][1];switch(Hi){case"1i":Y.uniform1i(wi,bi);break;case"1f":Y.uniform1f(wi,bi);break;case"2f":Y.uniform2f(wi,bi[0],bi[1]);break;case"3f":Y.uniform3f(wi,bi[0],bi[1],bi[2]);break;case"4f":Y.uniform4f(wi,bi[0],bi[1],bi[2],bi[3]);break;case"1iv":Y.uniform1iv(wi,bi);break;case"3iv":Y.uniform3iv(wi,bi);break;case"1fv":Y.uniform1fv(wi,bi);break;case"2fv":Y.uniform2fv(wi,bi);break;case"3fv":Y.uniform3fv(wi,bi);break;case"4fv":Y.uniform4fv(wi,bi);break;case"Matrix3fv":Y.uniformMatrix3fv(wi,!1,bi);break;case"Matrix4fv":Y.uniformMatrix4fv(wi,!1,bi);break;case"i":Y.uniform1i(wi,bi);break;case"f":Y.uniform1f(wi,bi);break;case"v2":Y.uniform2f(wi,bi.x,bi.y);break;case"v3":Y.uniform3f(wi,bi.x,bi.y,bi.z);break;case"v4":Y.uniform4f(wi,bi.x,bi.y,bi.z,bi.w);break;case"c":Y.uniform3f(wi,bi.r,bi.g,bi.b);break;case"iv1":Y.uniform1iv(wi,bi);break;case"iv":Y.uniform3iv(wi,bi);break;case"fv1":Y.uniform1fv(wi,bi);break;case"fv":Y.uniform3fv(wi,bi);break;case"v2v":void 0===xi._array&&(xi._array=new Float32Array(2*bi.length));for(var Mi=0,Si=bi.length;Si>Mi;Mi++)vi=2*Mi,xi._array[vi]=bi[Mi].x,xi._array[vi+1]=bi[Mi].y;Y.uniform2fv(wi,xi._array);break;case"v3v":for(void 0===xi._array&&(xi._array=new Float32Array(3*bi.length)),Mi=0,Si=bi.length;Si>Mi;Mi++)vi=3*Mi,xi._array[vi]=bi[Mi].x,xi._array[vi+1]=bi[Mi].y,xi._array[vi+2]=bi[Mi].z;Y.uniform3fv(wi,xi._array);break;case"v4v":for(void 0===xi._array&&(xi._array=new Float32Array(4*bi.length)),Mi=0,Si=bi.length;Si>Mi;Mi++)vi=4*Mi,xi._array[vi]=bi[Mi].x,xi._array[vi+1]=bi[Mi].y,xi._array[vi+2]=bi[Mi].z,xi._array[vi+3]=bi[Mi].w;Y.uniform4fv(wi,xi._array);break;case"m3":Y.uniformMatrix3fv(wi,!1,bi.elements);break;case"m3v":for(void 0===xi._array&&(xi._array=new Float32Array(9*bi.length)),Mi=0,Si=bi.length;Si>Mi;Mi++)bi[Mi].flattenToArrayOffset(xi._array,9*Mi);Y.uniformMatrix3fv(wi,!1,xi._array);break;case"m4":Y.uniformMatrix4fv(wi,!1,bi.elements);break;case"m4v":for(void 0===xi._array&&(xi._array=new Float32Array(16*bi.length)),Mi=0,Si=bi.length;Si>Mi;Mi++)bi[Mi].flattenToArrayOffset(xi._array,16*Mi);Y.uniformMatrix4fv(wi,!1,xi._array);break;case"t":if(gi=bi,Ti=v(),Y.uniform1i(wi,Ti),!gi)continue;if(gi instanceof THREE.CubeTexture||gi.image instanceof Array&&6===gi.image.length){var Ai=gi,Ci=Ti;if(6===Ai.image.length)if(Ai.needsUpdate){Ai.image.__webglTextureCube||(Ai.addEventListener("dispose",zt),Ai.image.__webglTextureCube=Y.createTexture(),K.info.memory.textures++),Y.activeTexture(Y.TEXTURE0+Ci),Y.bindTexture(Y.TEXTURE_CUBE_MAP,Ai.image.__webglTextureCube),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,Ai.flipY);for(var Pi=Ai instanceof THREE.CompressedTexture,Li=Ai.image[0]instanceof THREE.DataTexture,Fi=[],Di=0;6>Di;Di++)Fi[Di]=!K.autoScaleCubemaps||Pi||Li?Li?Ai.image[Di].image:Ai.image[Di]:x(Ai.image[Di],bt);var Ui=Fi[0],Bi=THREE.Math.isPowerOfTwo(Ui.width)&&THREE.Math.isPowerOfTwo(Ui.height),ki=M(Ai.format),Oi=M(Ai.type);for(_(Y.TEXTURE_CUBE_MAP,Ai,Bi),Di=0;6>Di;Di++)if(Pi)for(var Vi,zi=Fi[Di].mipmaps,Ni=0,Ii=zi.length;Ii>Ni;Ni++)Vi=zi[Ni],Ai.format!==THREE.RGBAFormat&&Ai.format!==THREE.RGBFormat?-1<Lt().indexOf(ki)?Y.compressedTexImage2D(Y.TEXTURE_CUBE_MAP_POSITIVE_X+Di,Ni,ki,Vi.width,Vi.height,0,Vi.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()"):Y.texImage2D(Y.TEXTURE_CUBE_MAP_POSITIVE_X+Di,Ni,ki,Vi.width,Vi.height,0,ki,Oi,Vi.data);else Li?Y.texImage2D(Y.TEXTURE_CUBE_MAP_POSITIVE_X+Di,0,ki,Fi[Di].width,Fi[Di].height,0,ki,Oi,Fi[Di].data):Y.texImage2D(Y.TEXTURE_CUBE_MAP_POSITIVE_X+Di,0,ki,ki,Oi,Fi[Di]);Ai.generateMipmaps&&Bi&&Y.generateMipmap(Y.TEXTURE_CUBE_MAP),Ai.needsUpdate=!1,Ai.onUpdate&&Ai.onUpdate()}else Y.activeTexture(Y.TEXTURE0+Ci),Y.bindTexture(Y.TEXTURE_CUBE_MAP,Ai.image.__webglTextureCube)}else if(gi instanceof THREE.WebGLRenderTargetCube){var Gi=gi;Y.activeTexture(Y.TEXTURE0+Ti),Y.bindTexture(Y.TEXTURE_CUBE_MAP,Gi.__webglTexture)}else K.setTexture(gi,Ti);break;case"tv":for(void 0===xi._array&&(xi._array=[]),Mi=0,Si=xi.value.length;Si>Mi;Mi++)xi._array[Mi]=v();for(Y.uniform1iv(wi,xi._array),Mi=0,Si=xi.value.length;Si>Mi;Mi++)gi=xi.value[Mi],Ti=xi._array[Mi],gi&&K.setTexture(gi,Ti);break;default:THREE.warn("THREE.WebGLRenderer: Unknown uniform type: "+Hi)}}}}return Y.uniformMatrix4fv(ot.modelViewMatrix,!1,n._modelViewMatrix.elements),ot.normalMatrix&&Y.uniformMatrix3fv(ot.normalMatrix,!1,n._normalMatrix.elements),null!==ot.modelMatrix&&Y.uniformMatrix4fv(ot.modelMatrix,!1,n.matrixWorld.elements),at}function T(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLightColor.needsUpdate=t,e.directionalLightDirection.needsUpdate=t,e.pointLightColor.needsUpdate=t,e.pointLightPosition.needsUpdate=t,e.pointLightDistance.needsUpdate=t,e.pointLightDecay.needsUpdate=t,e.spotLightColor.needsUpdate=t,e.spotLightPosition.needsUpdate=t,e.spotLightDistance.needsUpdate=t,e.spotLightDirection.needsUpdate=t,e.spotLightAngleCos.needsUpdate=t,e.spotLightExponent.needsUpdate=t,e.spotLightDecay.needsUpdate=t,e.hemisphereLightSkyColor.needsUpdate=t,e.hemisphereLightGroundColor.needsUpdate=t,e.hemisphereLightDirection.needsUpdate=t}function v(){var e=it;return e>=_t&&THREE.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+_t),it+=1,e}function y(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function R(e,t,i,r){e[t]=i.r*r,e[t+1]=i.g*r,e[t+2]=i.b*r}function _(e,t,i){i?(Y.texParameteri(e,Y.TEXTURE_WRAP_S,M(t.wrapS)),Y.texParameteri(e,Y.TEXTURE_WRAP_T,M(t.wrapT)),Y.texParameteri(e,Y.TEXTURE_MAG_FILTER,M(t.magFilter)),Y.texParameteri(e,Y.TEXTURE_MIN_FILTER,M(t.minFilter))):(Y.texParameteri(e,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(e,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),t.wrapS===THREE.ClampToEdgeWrapping&&t.wrapT===THREE.ClampToEdgeWrapping||THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( "+t.sourceFile+" )"),Y.texParameteri(e,Y.TEXTURE_MAG_FILTER,w(t.magFilter)),Y.texParameteri(e,Y.TEXTURE_MIN_FILTER,w(t.minFilter)),t.minFilter!==THREE.NearestFilter&&t.minFilter!==THREE.LinearFilter&&THREE.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( "+t.sourceFile+" )")),(i=Tt.get("EXT_texture_filter_anisotropic"))&&t.type!==THREE.FloatType&&t.type!==THREE.HalfFloatType&&(1<t.anisotropy||t.__currentAnisotropy)&&(Y.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,K.getMaxAnisotropy())),t.__currentAnisotropy=t.anisotropy)}function x(e,t){if(e.width>t||e.height>t){var i=t/Math.max(e.width,e.height),r=document.createElement("canvas");return r.width=Math.floor(e.width*i),r.height=Math.floor(e.height*i),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),THREE.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function H(e,t){Y.bindRenderbuffer(Y.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Y.renderbufferStorage(Y.RENDERBUFFER,Y.DEPTH_COMPONENT16,t.width,t.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_ATTACHMENT,Y.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Y.renderbufferStorage(Y.RENDERBUFFER,Y.DEPTH_STENCIL,t.width,t.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_STENCIL_ATTACHMENT,Y.RENDERBUFFER,e)):Y.renderbufferStorage(Y.RENDERBUFFER,Y.RGBA4,t.width,t.height)}function b(e){e instanceof THREE.WebGLRenderTargetCube?(Y.bindTexture(Y.TEXTURE_CUBE_MAP,e.__webglTexture),Y.generateMipmap(Y.TEXTURE_CUBE_MAP),Y.bindTexture(Y.TEXTURE_CUBE_MAP,null)):(Y.bindTexture(Y.TEXTURE_2D,e.__webglTexture),Y.generateMipmap(Y.TEXTURE_2D),Y.bindTexture(Y.TEXTURE_2D,null))}function w(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Y.NEAREST:Y.LINEAR}function M(e){var t;if(e===THREE.RepeatWrapping)return Y.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Y.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Y.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Y.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Y.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Y.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Y.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Y.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Y.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Y.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Y.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Y.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Y.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Y.BYTE;if(e===THREE.ShortType)return Y.SHORT;if(e===THREE.UnsignedShortType)return Y.UNSIGNED_SHORT;if(e===THREE.IntType)return Y.INT;if(e===THREE.UnsignedIntType)return Y.UNSIGNED_INT;if(e===THREE.FloatType)return Y.FLOAT;if(t=Tt.get("OES_texture_half_float"),null!==t&&e===THREE.HalfFloatType)return t.HALF_FLOAT_OES;if(e===THREE.AlphaFormat)return Y.ALPHA;if(e===THREE.RGBFormat)return Y.RGB;if(e===THREE.RGBAFormat)return Y.RGBA;if(e===THREE.LuminanceFormat)return Y.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Y.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Y.FUNC_ADD;if(e===THREE.SubtractEquation)return Y.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Y.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Y.ZERO;if(e===THREE.OneFactor)return Y.ONE;if(e===THREE.SrcColorFactor)return Y.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Y.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Y.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Y.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Y.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Y.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Y.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Y.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Y.SRC_ALPHA_SATURATE;if(t=Tt.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===THREE.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=Tt.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===THREE.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===THREE.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===THREE.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===THREE.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=Tt.get("EXT_blend_minmax"),null!==t){if(e===THREE.MinEquation)return t.MIN_EXT;if(e===THREE.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var S=void 0!==e.canvas?e.canvas:document.createElement("canvas"),A=void 0!==e.context?e.context:null,C=1,P=void 0!==e.precision?e.precision:"highp",L=void 0!==e.alpha?e.alpha:!1,F=void 0!==e.depth?e.depth:!0,D=void 0!==e.stencil?e.stencil:!0,U=void 0!==e.antialias?e.antialias:!1,B=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,k=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,O=void 0!==e.logarithmicDepthBuffer?e.logarithmicDepthBuffer:!1,V=new THREE.Color(0),z=0,N=[],I={},G=[],W=[],j=[],X=[],q=[];this.domElement=S,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.gammaFactor=2,this.shadowMapEnabled=this.gammaOutput=this.gammaInput=!1,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Y,K=this,Q=[],Z=null,J=null,$=-1,et="",tt=null,it=0,rt=0,nt=0,at=S.width,ot=S.height,st=0,ht=0,lt=new THREE.Frustum,ct=new THREE.Matrix4,ut=new THREE.Vector3,pt=new THREE.Vector3,ft=!0,dt={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[],decays:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[],decays:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};try{var Et={alpha:L,depth:F,stencil:D,antialias:U,premultipliedAlpha:B,preserveDrawingBuffer:k};if(Y=A||S.getContext("webgl",Et)||S.getContext("experimental-webgl",Et),null===Y){if(null!==S.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";throw"Error creating WebGL context."}S.addEventListener("webglcontextlost",function(e){e.preventDefault(),Rt(),yt(),I={}},!1)}catch(mt){THREE.error("THREE.WebGLRenderer: "+mt)}var gt=new THREE.WebGLState(Y,M);void 0===Y.getShaderPrecisionFormat&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}});var Tt=new THREE.WebGLExtensions(Y);Tt.get("OES_texture_float"),Tt.get("OES_texture_float_linear"),Tt.get("OES_texture_half_float"),Tt.get("OES_texture_half_float_linear"),Tt.get("OES_standard_derivatives"),O&&Tt.get("EXT_frag_depth");var vt=function(e,t,i,r){!0===B&&(e*=r,t*=r,i*=r),Y.clearColor(e,t,i,r)},yt=function(){Y.clearColor(0,0,0,1),Y.clearDepth(1),Y.clearStencil(0),Y.enable(Y.DEPTH_TEST),Y.depthFunc(Y.LEQUAL),Y.frontFace(Y.CCW),Y.cullFace(Y.BACK),Y.enable(Y.CULL_FACE),Y.enable(Y.BLEND),Y.blendEquation(Y.FUNC_ADD),Y.blendFunc(Y.SRC_ALPHA,Y.ONE_MINUS_SRC_ALPHA),Y.viewport(rt,nt,at,ot),vt(V.r,V.g,V.b,z)},Rt=function(){tt=Z=null,et="",$=-1,ft=!0,gt.reset()};yt(),this.context=Y,this.state=gt;var _t=Y.getParameter(Y.MAX_TEXTURE_IMAGE_UNITS),xt=Y.getParameter(Y.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ht=Y.getParameter(Y.MAX_TEXTURE_SIZE),bt=Y.getParameter(Y.MAX_CUBE_MAP_TEXTURE_SIZE),wt=xt>0,Mt=wt&&Tt.get("OES_texture_float"),St=Y.getShaderPrecisionFormat(Y.VERTEX_SHADER,Y.HIGH_FLOAT),At=Y.getShaderPrecisionFormat(Y.VERTEX_SHADER,Y.MEDIUM_FLOAT),Ct=Y.getShaderPrecisionFormat(Y.FRAGMENT_SHADER,Y.HIGH_FLOAT),Pt=Y.getShaderPrecisionFormat(Y.FRAGMENT_SHADER,Y.MEDIUM_FLOAT),Lt=function(){var e;return function(){if(void 0!==e)return e;if(e=[],Tt.get("WEBGL_compressed_texture_pvrtc")||Tt.get("WEBGL_compressed_texture_s3tc"))for(var t=Y.getParameter(Y.COMPRESSED_TEXTURE_FORMATS),i=0;i<t.length;i++)e.push(t[i]);return e}}(),Ft=0<St.precision&&0<Ct.precision,Dt=0<At.precision&&0<Pt.precision;"highp"!==P||Ft||(Dt?(P="mediump",THREE.warn("THREE.WebGLRenderer: highp not supported, using mediump.")):(P="lowp",THREE.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))),"mediump"!==P||Dt||(P="lowp",THREE.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));var Ut=new THREE.ShadowMapPlugin(this,N,I,G),Bt=new THREE.SpritePlugin(this,X),kt=new THREE.LensFlarePlugin(this,q);this.getContext=function(){return Y},this.forceContextLoss=function(){Tt.get("WEBGL_lose_context").loseContext()},this.supportsVertexTextures=function(){return wt},this.supportsFloatTextures=function(){return Tt.get("OES_texture_float")},this.supportsHalfFloatTextures=function(){return Tt.get("OES_texture_half_float")},this.supportsStandardDerivatives=function(){return Tt.get("OES_standard_derivatives")},this.supportsCompressedTextureS3TC=function(){return Tt.get("WEBGL_compressed_texture_s3tc")},this.supportsCompressedTexturePVRTC=function(){return Tt.get("WEBGL_compressed_texture_pvrtc")},this.supportsBlendMinMax=function(){return Tt.get("EXT_blend_minmax")},this.getMaxAnisotropy=function(){var e;return function(){if(void 0!==e)return e;var t=Tt.get("EXT_texture_filter_anisotropic");return e=null!==t?Y.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}}(),this.getPrecision=function(){return P},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){C=e
},this.setSize=function(e,t,i){S.width=e*C,S.height=t*C,!1!==i&&(S.style.width=e+"px",S.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){rt=e*C,nt=t*C,at=i*C,ot=r*C,Y.viewport(rt,nt,at,ot)},this.setScissor=function(e,t,i,r){Y.scissor(e*C,t*C,i*C,r*C)},this.enableScissorTest=function(e){e?Y.enable(Y.SCISSOR_TEST):Y.disable(Y.SCISSOR_TEST)},this.getClearColor=function(){return V},this.setClearColor=function(e,t){V.set(e),z=void 0!==t?t:1,vt(V.r,V.g,V.b,z)},this.getClearAlpha=function(){return z},this.setClearAlpha=function(e){z=e,vt(V.r,V.g,V.b,z)},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=Y.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Y.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Y.STENCIL_BUFFER_BIT),Y.clear(r)},this.clearColor=function(){Y.clear(Y.COLOR_BUFFER_BIT)},this.clearDepth=function(){Y.clear(Y.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Y.clear(Y.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.resetGLState=Rt;var Ot=function(e){e.target.traverse(function(e){if(e.removeEventListener("remove",Ot),e instanceof THREE.Mesh||e instanceof THREE.PointCloud||e instanceof THREE.Line)delete I[e.id];else if(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)for(var t=G,i=t.length-1;i>=0;i--)t[i].object===e&&t.splice(i,1);delete e.__webglInit,delete e._modelViewMatrix,delete e._normalMatrix,delete e.__webglActive})},Vt=function(e){if(e=e.target,e.removeEventListener("dispose",Vt),delete e.__webglInit,e instanceof THREE.BufferGeometry){for(var t in e.attributes){var i=e.attributes[t];void 0!==i.buffer&&(Y.deleteBuffer(i.buffer),delete i.buffer)}K.info.memory.geometries--}else if(t=jt[e.id],void 0!==t){for(var i=0,r=t.length;r>i;i++){var n=t[i];if(void 0!==n.numMorphTargets){for(var a=0,o=n.numMorphTargets;o>a;a++)Y.deleteBuffer(n.__webglMorphTargetsBuffers[a]);delete n.__webglMorphTargetsBuffers}if(void 0!==n.numMorphNormals){for(a=0,o=n.numMorphNormals;o>a;a++)Y.deleteBuffer(n.__webglMorphNormalsBuffers[a]);delete n.__webglMorphNormalsBuffers}Gt(n)}delete jt[e.id]}else Gt(e);et=""},zt=function(e){e=e.target,e.removeEventListener("dispose",zt),e.image&&e.image.__webglTextureCube?(Y.deleteTexture(e.image.__webglTextureCube),delete e.image.__webglTextureCube):void 0!==e.__webglInit&&(Y.deleteTexture(e.__webglTexture),delete e.__webglTexture,delete e.__webglInit),K.info.memory.textures--},Nt=function(e){if(e=e.target,e.removeEventListener("dispose",Nt),e&&void 0!==e.__webglTexture){if(Y.deleteTexture(e.__webglTexture),delete e.__webglTexture,e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Y.deleteFramebuffer(e.__webglFramebuffer[t]),Y.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Y.deleteFramebuffer(e.__webglFramebuffer),Y.deleteRenderbuffer(e.__webglRenderbuffer);delete e.__webglFramebuffer,delete e.__webglRenderbuffer}K.info.memory.textures--},It=function(e){e=e.target,e.removeEventListener("dispose",It),Wt(e)},Gt=function(e){for(var t="__webglVertexBuffer __webglNormalBuffer __webglTangentBuffer __webglColorBuffer __webglUVBuffer __webglUV2Buffer __webglSkinIndicesBuffer __webglSkinWeightsBuffer __webglFaceBuffer __webglLineBuffer __webglLineDistanceBuffer".split(" "),i=0,r=t.length;r>i;i++){var n=t[i];void 0!==e[n]&&(Y.deleteBuffer(e[n]),delete e[n])}if(void 0!==e.__webglCustomAttributesList){for(n in e.__webglCustomAttributesList)Y.deleteBuffer(e.__webglCustomAttributesList[n].buffer);delete e.__webglCustomAttributesList}K.info.memory.geometries--},Wt=function(e){var t=e.program.program;if(void 0!==t){e.program=void 0;var i,r,n=!1;for(e=0,i=Q.length;i>e;e++)if(r=Q[e],r.program===t){r.usedTimes--,0===r.usedTimes&&(n=!0);break}if(!0===n){for(n=[],e=0,i=Q.length;i>e;e++)r=Q[e],r.program!==t&&n.push(r);Q=n,Y.deleteProgram(t),K.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,i){if(gt.initAttributes(),e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Y.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Y.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Y.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Y.createBuffer()),e.hasPositions&&(Y.bindBuffer(Y.ARRAY_BUFFER,e.__webglVertexBuffer),Y.bufferData(Y.ARRAY_BUFFER,e.positionArray,Y.DYNAMIC_DRAW),gt.enableAttribute(t.attributes.position),Y.vertexAttribPointer(t.attributes.position,3,Y.FLOAT,!1,0,0)),e.hasNormals){if(Y.bindBuffer(Y.ARRAY_BUFFER,e.__webglNormalBuffer),!1==i instanceof THREE.MeshPhongMaterial&&i.shading===THREE.FlatShading){var r,n,a,o,s,h,l,c,u,p,f,d=3*e.count;for(f=0;d>f;f+=9)p=e.normalArray,r=p[f],n=p[f+1],a=p[f+2],o=p[f+3],h=p[f+4],c=p[f+5],s=p[f+6],l=p[f+7],u=p[f+8],r=(r+o+s)/3,n=(n+h+l)/3,a=(a+c+u)/3,p[f]=r,p[f+1]=n,p[f+2]=a,p[f+3]=r,p[f+4]=n,p[f+5]=a,p[f+6]=r,p[f+7]=n,p[f+8]=a}Y.bufferData(Y.ARRAY_BUFFER,e.normalArray,Y.DYNAMIC_DRAW),gt.enableAttribute(t.attributes.normal),Y.vertexAttribPointer(t.attributes.normal,3,Y.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Y.bindBuffer(Y.ARRAY_BUFFER,e.__webglUvBuffer),Y.bufferData(Y.ARRAY_BUFFER,e.uvArray,Y.DYNAMIC_DRAW),gt.enableAttribute(t.attributes.uv),Y.vertexAttribPointer(t.attributes.uv,2,Y.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==THREE.NoColors&&(Y.bindBuffer(Y.ARRAY_BUFFER,e.__webglColorBuffer),Y.bufferData(Y.ARRAY_BUFFER,e.colorArray,Y.DYNAMIC_DRAW),gt.enableAttribute(t.attributes.color),Y.vertexAttribPointer(t.attributes.color,3,Y.FLOAT,!1,0,0)),gt.disableUnusedAttributes(),Y.drawArrays(Y.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,a,o){if(!1!==n.visible)if(f(o),e=g(e,t,i,n,o),t=!1,i="direct_"+a.id+"_"+e.id+"_"+(n.wireframe?1:0),i!==et&&(et=i,t=!0),t&&gt.initAttributes(),o instanceof THREE.Mesh){o=!0===n.wireframe?Y.LINES:Y.TRIANGLES;var s=a.attributes.index;if(s){var h,l;if(s.array instanceof Uint32Array&&Tt.get("OES_element_index_uint")?(h=Y.UNSIGNED_INT,l=4):(h=Y.UNSIGNED_SHORT,l=2),i=a.offsets,0===i.length)t&&(r(n,e,a,0),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,s.array.length,h,0),K.info.render.calls++,K.info.render.vertices+=s.array.length,K.info.render.faces+=s.array.length/3;else{t=!0;for(var c=0,u=i.length;u>c;c++){var p=i[c].index;t&&(r(n,e,a,p),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,i[c].count,h,i[c].start*l),K.info.render.calls++,K.info.render.vertices+=i[c].count,K.info.render.faces+=i[c].count/3}}}else t&&r(n,e,a,0),n=a.attributes.position,Y.drawArrays(o,0,n.array.length/n.itemSize),K.info.render.calls++,K.info.render.vertices+=n.array.length/n.itemSize,K.info.render.faces+=n.array.length/(3*n.itemSize)}else if(o instanceof THREE.PointCloud)if(o=Y.POINTS,s=a.attributes.index)if(s.array instanceof Uint32Array&&Tt.get("OES_element_index_uint")?(h=Y.UNSIGNED_INT,l=4):(h=Y.UNSIGNED_SHORT,l=2),i=a.offsets,0===i.length)t&&(r(n,e,a,0),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,s.array.length,h,0),K.info.render.calls++,K.info.render.points+=s.array.length;else for(1<i.length&&(t=!0),c=0,u=i.length;u>c;c++)p=i[c].index,t&&(r(n,e,a,p),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,i[c].count,h,i[c].start*l),K.info.render.calls++,K.info.render.points+=i[c].count;else if(t&&r(n,e,a,0),n=a.attributes.position,i=a.offsets,0===i.length)Y.drawArrays(o,0,n.array.length/3),K.info.render.calls++,K.info.render.points+=n.array.length/3;else for(c=0,u=i.length;u>c;c++)Y.drawArrays(o,i[c].index,i[c].count),K.info.render.calls++,K.info.render.points+=i[c].count;else if(o instanceof THREE.Line)if(o=o.mode===THREE.LineStrip?Y.LINE_STRIP:Y.LINES,gt.setLineWidth(n.linewidth*C),s=a.attributes.index)if(s.array instanceof Uint32Array?(h=Y.UNSIGNED_INT,l=4):(h=Y.UNSIGNED_SHORT,l=2),i=a.offsets,0===i.length)t&&(r(n,e,a,0),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,s.array.length,h,0),K.info.render.calls++,K.info.render.vertices+=s.array.length;else for(1<i.length&&(t=!0),c=0,u=i.length;u>c;c++)p=i[c].index,t&&(r(n,e,a,p),Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,s.buffer)),Y.drawElements(o,i[c].count,h,i[c].start*l),K.info.render.calls++,K.info.render.vertices+=i[c].count;else if(t&&r(n,e,a,0),n=a.attributes.position,i=a.offsets,0===i.length)Y.drawArrays(o,0,n.array.length/3),K.info.render.calls++,K.info.render.vertices+=n.array.length/3;else for(c=0,u=i.length;u>c;c++)Y.drawArrays(o,i[c].index,i[c].count),K.info.render.calls++,K.info.render.vertices+=i[c].count},this.renderBuffer=function(e,t,i,r,n,a){if(!1!==r.visible){if(f(a),i=g(e,t,i,r,a),t=i.attributes,e=!1,i=n.id+"_"+i.id+"_"+(r.wireframe?1:0),i!==et&&(et=i,e=!0),e&&gt.initAttributes(),!r.morphTargets&&0<=t.position)e&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglVertexBuffer),gt.enableAttribute(t.position),Y.vertexAttribPointer(t.position,3,Y.FLOAT,!1,0,0));else if(a.morphTargetBase){if(i=r.program.attributes,-1!==a.morphTargetBase&&0<=i.position?(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[a.morphTargetBase]),gt.enableAttribute(i.position),Y.vertexAttribPointer(i.position,3,Y.FLOAT,!1,0,0)):0<=i.position&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglVertexBuffer),gt.enableAttribute(i.position),Y.vertexAttribPointer(i.position,3,Y.FLOAT,!1,0,0)),a.morphTargetForcedOrder.length)for(var s,h=0,l=a.morphTargetForcedOrder,c=a.morphTargetInfluences;h<r.numSupportedMorphTargets&&h<l.length;)s=i["morphTarget"+h],s>=0&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[l[h]]),gt.enableAttribute(s),Y.vertexAttribPointer(s,3,Y.FLOAT,!1,0,0)),s=i["morphNormal"+h],s>=0&&r.morphNormals&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglMorphNormalsBuffers[l[h]]),gt.enableAttribute(s),Y.vertexAttribPointer(s,3,Y.FLOAT,!1,0,0)),a.__webglMorphTargetInfluences[h]=c[l[h]],h++;else{for(l=[],c=a.morphTargetInfluences,h=a.geometry.morphTargets,c.length>h.length&&(console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."),c.length=h.length),h=0,s=c.length;s>h;h++)l.push([c[h],h]);l.length>r.numSupportedMorphTargets?(l.sort(o),l.length=r.numSupportedMorphTargets):l.length>r.numSupportedMorphNormals?l.sort(o):0===l.length&&l.push([0,0]);for(var h=0,u=r.numSupportedMorphTargets;u>h;h++)if(l[h]){var p=l[h][1];s=i["morphTarget"+h],s>=0&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglMorphTargetsBuffers[p]),gt.enableAttribute(s),Y.vertexAttribPointer(s,3,Y.FLOAT,!1,0,0)),s=i["morphNormal"+h],s>=0&&r.morphNormals&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglMorphNormalsBuffers[p]),gt.enableAttribute(s),Y.vertexAttribPointer(s,3,Y.FLOAT,!1,0,0)),a.__webglMorphTargetInfluences[h]=c[p]}else a.__webglMorphTargetInfluences[h]=0}null!==r.program.uniforms.morphTargetInfluences&&Y.uniform1fv(r.program.uniforms.morphTargetInfluences,a.__webglMorphTargetInfluences)}if(e){if(n.__webglCustomAttributesList)for(i=0,c=n.__webglCustomAttributesList.length;c>i;i++)l=n.__webglCustomAttributesList[i],0<=t[l.buffer.belongsToAttribute]&&(Y.bindBuffer(Y.ARRAY_BUFFER,l.buffer),gt.enableAttribute(t[l.buffer.belongsToAttribute]),Y.vertexAttribPointer(t[l.buffer.belongsToAttribute],l.size,Y.FLOAT,!1,0,0));0<=t.color&&(0<a.geometry.colors.length||0<a.geometry.faces.length?(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglColorBuffer),gt.enableAttribute(t.color),Y.vertexAttribPointer(t.color,3,Y.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Y.vertexAttrib3fv(t.color,r.defaultAttributeValues.color)),0<=t.normal&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglNormalBuffer),gt.enableAttribute(t.normal),Y.vertexAttribPointer(t.normal,3,Y.FLOAT,!1,0,0)),0<=t.tangent&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglTangentBuffer),gt.enableAttribute(t.tangent),Y.vertexAttribPointer(t.tangent,4,Y.FLOAT,!1,0,0)),0<=t.uv&&(a.geometry.faceVertexUvs[0]?(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglUVBuffer),gt.enableAttribute(t.uv),Y.vertexAttribPointer(t.uv,2,Y.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Y.vertexAttrib2fv(t.uv,r.defaultAttributeValues.uv)),0<=t.uv2&&(a.geometry.faceVertexUvs[1]?(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglUV2Buffer),gt.enableAttribute(t.uv2),Y.vertexAttribPointer(t.uv2,2,Y.FLOAT,!1,0,0)):void 0!==r.defaultAttributeValues&&Y.vertexAttrib2fv(t.uv2,r.defaultAttributeValues.uv2)),r.skinning&&0<=t.skinIndex&&0<=t.skinWeight&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),gt.enableAttribute(t.skinIndex),Y.vertexAttribPointer(t.skinIndex,4,Y.FLOAT,!1,0,0),Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),gt.enableAttribute(t.skinWeight),Y.vertexAttribPointer(t.skinWeight,4,Y.FLOAT,!1,0,0)),0<=t.lineDistance&&(Y.bindBuffer(Y.ARRAY_BUFFER,n.__webglLineDistanceBuffer),gt.enableAttribute(t.lineDistance),Y.vertexAttribPointer(t.lineDistance,1,Y.FLOAT,!1,0,0))}gt.disableUnusedAttributes(),a instanceof THREE.Mesh?(a=n.__typeArray===Uint32Array?Y.UNSIGNED_INT:Y.UNSIGNED_SHORT,r.wireframe?(gt.setLineWidth(r.wireframeLinewidth*C),e&&Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),Y.drawElements(Y.LINES,n.__webglLineCount,a,0)):(e&&Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),Y.drawElements(Y.TRIANGLES,n.__webglFaceCount,a,0)),K.info.render.calls++,K.info.render.vertices+=n.__webglFaceCount,K.info.render.faces+=n.__webglFaceCount/3):a instanceof THREE.Line?(a=a.mode===THREE.LineStrip?Y.LINE_STRIP:Y.LINES,gt.setLineWidth(r.linewidth*C),Y.drawArrays(a,0,n.__webglLineCount),K.info.render.calls++):a instanceof THREE.PointCloud&&(Y.drawArrays(Y.POINTS,0,n.__webglParticleCount),K.info.render.calls++,K.info.render.points+=n.__webglParticleCount)}},this.render=function(e,t,i,r){if(!1==t instanceof THREE.Camera)THREE.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var o=e.fog;et="",$=-1,tt=null,ft=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),e.traverse(function(e){e instanceof THREE.SkinnedMesh&&e.skeleton.update()}),t.matrixWorldInverse.getInverse(t.matrixWorld),ct.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),lt.setFromMatrix(ct),N.length=0,W.length=0,j.length=0,X.length=0,q.length=0,s(e),!0===K.sortObjects&&(W.sort(n),j.sort(a)),Ut.render(e,t),K.info.render.calls=0,K.info.render.vertices=0,K.info.render.faces=0,K.info.render.points=0,this.setRenderTarget(i),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r=0;for(var u=G.length;u>r;r++){var p=G[r],f=p.object;f.visible&&(y(f,t),c(p))}e.overrideMaterial?(r=e.overrideMaterial,m(r),h(W,t,N,o,r),h(j,t,N,o,r),l(G,"",t,N,o,r)):(gt.setBlending(THREE.NoBlending),h(W,t,N,o,null),l(G,"opaque",t,N,o,null),h(j,t,N,o,null),l(G,"transparent",t,N,o,null)),Bt.render(e,t),kt.render(e,t,st,ht),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&b(i),gt.setDepthTest(!0),gt.setDepthWrite(!0),gt.setColorWrite(!0)}},this.renderImmediateObject=function(e,t,i,r,n){var a=g(e,t,i,r,n);et="",K.setMaterialFaces(r),n.immediateRenderCallback?n.immediateRenderCallback(a,Y,lt):n.render(function(e){K.renderBufferImmediate(e,a,r)})};var jt={},Xt=0,qt={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointCloudMaterial:"particle_basic"};this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Y.disable(Y.CULL_FACE):(Y.frontFace(t===THREE.FrontFaceDirectionCW?Y.CW:Y.CCW),Y.cullFace(e===THREE.CullFaceBack?Y.BACK:e===THREE.CullFaceFront?Y.FRONT:Y.FRONT_AND_BACK),Y.enable(Y.CULL_FACE))},this.setMaterialFaces=function(e){gt.setDoubleSided(e.side===THREE.DoubleSide),gt.setFlipSided(e.side===THREE.BackSide)},this.uploadTexture=function(e){void 0===e.__webglInit&&(e.__webglInit=!0,e.addEventListener("dispose",zt),e.__webglTexture=Y.createTexture(),K.info.memory.textures++),Y.bindTexture(Y.TEXTURE_2D,e.__webglTexture),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,e.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,e.unpackAlignment),e.image=x(e.image,Ht);var t=e.image,i=THREE.Math.isPowerOfTwo(t.width)&&THREE.Math.isPowerOfTwo(t.height),r=M(e.format),n=M(e.type);_(Y.TEXTURE_2D,e,i);var a=e.mipmaps;if(e instanceof THREE.DataTexture)if(0<a.length&&i){for(var o=0,s=a.length;s>o;o++)t=a[o],Y.texImage2D(Y.TEXTURE_2D,o,r,t.width,t.height,0,r,n,t.data);e.generateMipmaps=!1}else Y.texImage2D(Y.TEXTURE_2D,0,r,t.width,t.height,0,r,n,t.data);else if(e instanceof THREE.CompressedTexture)for(o=0,s=a.length;s>o;o++)t=a[o],e.format!==THREE.RGBAFormat&&e.format!==THREE.RGBFormat?-1<Lt().indexOf(r)?Y.compressedTexImage2D(Y.TEXTURE_2D,o,r,t.width,t.height,0,t.data):THREE.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Y.texImage2D(Y.TEXTURE_2D,o,r,t.width,t.height,0,r,n,t.data);else if(0<a.length&&i){for(o=0,s=a.length;s>o;o++)t=a[o],Y.texImage2D(Y.TEXTURE_2D,o,r,r,n,t);e.generateMipmaps=!1}else Y.texImage2D(Y.TEXTURE_2D,0,r,r,n,e.image);e.generateMipmaps&&i&&Y.generateMipmap(Y.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()},this.setTexture=function(e,t){Y.activeTexture(Y.TEXTURE0+t),e.needsUpdate?K.uploadTexture(e):Y.bindTexture(Y.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&void 0===e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",Nt),e.__webglTexture=Y.createTexture(),K.info.memory.textures++;var i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=M(e.format),n=M(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Y.bindTexture(Y.TEXTURE_CUBE_MAP,e.__webglTexture),_(Y.TEXTURE_CUBE_MAP,e,i);for(var a=0;6>a;a++){e.__webglFramebuffer[a]=Y.createFramebuffer(),e.__webglRenderbuffer[a]=Y.createRenderbuffer(),Y.texImage2D(Y.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,r,e.width,e.height,0,r,n,null);var o=e,s=Y.TEXTURE_CUBE_MAP_POSITIVE_X+a;Y.bindFramebuffer(Y.FRAMEBUFFER,e.__webglFramebuffer[a]),Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,s,o.__webglTexture,0),H(e.__webglRenderbuffer[a],e)}i&&Y.generateMipmap(Y.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Y.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Y.createRenderbuffer(),Y.bindTexture(Y.TEXTURE_2D,e.__webglTexture),_(Y.TEXTURE_2D,e,i),Y.texImage2D(Y.TEXTURE_2D,0,r,e.width,e.height,0,r,n,null),r=Y.TEXTURE_2D,Y.bindFramebuffer(Y.FRAMEBUFFER,e.__webglFramebuffer),Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,r,e.__webglTexture,0),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_ATTACHMENT,Y.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_STENCIL_ATTACHMENT,Y.RENDERBUFFER,e.__webglRenderbuffer):H(e.__webglRenderbuffer,e),i&&Y.generateMipmap(Y.TEXTURE_2D);t?Y.bindTexture(Y.TEXTURE_CUBE_MAP,null):Y.bindTexture(Y.TEXTURE_2D,null),Y.bindRenderbuffer(Y.RENDERBUFFER,null),Y.bindFramebuffer(Y.FRAMEBUFFER,null)}e?(t=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,i=e.width,e=e.height,n=r=0):(t=null,i=at,e=ot,r=rt,n=nt),t!==J&&(Y.bindFramebuffer(Y.FRAMEBUFFER,t),Y.viewport(r,n,i,e),J=t),st=i,ht=e},this.readRenderTargetPixels=function(e,t,i,r,n,a){if(e instanceof THREE.WebGLRenderTarget){if(e.__webglFramebuffer)if(e.format!==THREE.RGBAFormat)console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.");else{var o=!1;e.__webglFramebuffer!==J&&(Y.bindFramebuffer(Y.FRAMEBUFFER,e.__webglFramebuffer),o=!0),Y.checkFramebufferStatus(Y.FRAMEBUFFER)===Y.FRAMEBUFFER_COMPLETE?Y.readPixels(t,i,r,n,Y.RGBA,Y.UNSIGNED_BYTE,a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."),o&&Y.bindFramebuffer(Y.FRAMEBUFFER,J)}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.initMaterial=function(){THREE.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},this.addPrePlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},this.addPostPlugin=function(){THREE.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},this.updateShadowMap=function(){THREE.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}},THREE.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=void 0!==i.shareDepthFrom?i.shareDepthFrom:null},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,setSize:function(e,t){this.width=e,this.height=t},clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,i){THREE.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.WebGLExtensions=function(e){var t={};this.get=function(i){if(void 0!==t[i])return t[i];var r;switch(i){case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return null===r&&THREE.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=r}},THREE.WebGLProgram=function(){var e=0;return function(t,i,r,n){var a=t.context,o=r.defines,s=r.__webglShader.uniforms,h=r.attributes,l=r.__webglShader.vertexShader,c=r.__webglShader.fragmentShader,u=r.index0AttributeName;void 0===u&&!0===n.morphTargets&&(u="position");var p="SHADOWMAP_TYPE_BASIC";n.shadowMapType===THREE.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":n.shadowMapType===THREE.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",E="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case THREE.CubeReflectionMapping:case THREE.CubeRefractionMapping:f="ENVMAP_TYPE_CUBE";break;case THREE.EquirectangularReflectionMapping:case THREE.EquirectangularRefractionMapping:f="ENVMAP_TYPE_EQUIREC";break;case THREE.SphericalReflectionMapping:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case THREE.CubeRefractionMapping:case THREE.EquirectangularRefractionMapping:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case THREE.MultiplyOperation:E="ENVMAP_BLENDING_MULTIPLY";break;case THREE.MixOperation:E="ENVMAP_BLENDING_MIX";break;case THREE.AddOperation:E="ENVMAP_BLENDING_ADD"}}var m,g,T=0<t.gammaFactor?t.gammaFactor:1;m=[];for(var v in o)g=o[v],!1!==g&&(g="#define "+v+" "+g,m.push(g));m=m.join("\n"),o=a.createProgram(),r instanceof THREE.RawShaderMaterial?t=r="":(r=["precision "+n.precision+" float;","precision "+n.precision+" int;",m,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+T,"#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals?"#define USE_MORPHNORMALS":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\n	attribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\n	attribute vec3 morphTarget0;\n	attribute vec3 morphTarget1;\n	attribute vec3 morphTarget2;\n	attribute vec3 morphTarget3;\n	#ifdef USE_MORPHNORMALS\n		attribute vec3 morphNormal0;\n		attribute vec3 morphNormal1;\n		attribute vec3 morphNormal2;\n		attribute vec3 morphNormal3;\n	#else\n		attribute vec3 morphTarget4;\n		attribute vec3 morphTarget5;\n		attribute vec3 morphTarget6;\n		attribute vec3 morphTarget7;\n	#endif\n#endif\n#ifdef USE_SKINNING\n	attribute vec4 skinIndex;\n	attribute vec4 skinWeight;\n#endif\n"].join("\n"),t=["precision "+n.precision+" float;","precision "+n.precision+" int;",n.bumpMap||n.normalMap||n.flatShading?"#extension GL_OES_standard_derivatives : enable":"",m,"#define MAX_DIR_LIGHTS "+n.maxDirLights,"#define MAX_POINT_LIGHTS "+n.maxPointLights,"#define MAX_SPOT_LIGHTS "+n.maxSpotLights,"#define MAX_HEMI_LIGHTS "+n.maxHemiLights,"#define MAX_SHADOWS "+n.maxShadows,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",t.gammaInput?"#define GAMMA_INPUT":"",t.gammaOutput?"#define GAMMA_OUTPUT":"","#define GAMMA_FACTOR "+T,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.envMap?"#define "+E:"",n.lightMap?"#define USE_LIGHTMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.metal?"#define METAL":"",n.wrapAround?"#define WRAP_AROUND":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",n.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n")),l=new THREE.WebGLShader(a,a.VERTEX_SHADER,r+l),c=new THREE.WebGLShader(a,a.FRAGMENT_SHADER,t+c),a.attachShader(o,l),a.attachShader(o,c),void 0!==u&&a.bindAttribLocation(o,0,u),a.linkProgram(o),u=a.getProgramInfoLog(o),!1===a.getProgramParameter(o,a.LINK_STATUS)&&THREE.error("THREE.WebGLProgram: shader error: "+a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(o,a.VALIDATE_STATUS),"gl.getPRogramInfoLog",u),""!==u&&THREE.warn("THREE.WebGLProgram: gl.getProgramInfoLog()"+u),a.deleteShader(l),a.deleteShader(c),u="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences bindMatrix bindMatrixInverse".split(" "),n.useVertexTexture?(u.push("boneTexture"),u.push("boneTextureWidth"),u.push("boneTextureHeight")):u.push("boneGlobalMatrices"),n.logarithmicDepthBuffer&&u.push("logDepthBufFC");for(var y in s)u.push(y);for(s=u,y={},u=0,t=s.length;t>u;u++)p=s[u],y[p]=a.getUniformLocation(o,p);for(this.uniforms=y,u="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" "),s=0;s<n.maxMorphTargets;s++)u.push("morphTarget"+s);for(s=0;s<n.maxMorphNormals;s++)u.push("morphNormal"+s);for(var R in h)u.push(R);for(n=u,h={},R=0,s=n.length;s>R;R++)y=n[R],h[y]=a.getAttribLocation(o,y);return this.attributes=h,this.attributesKeys=Object.keys(this.attributes),this.id=e++,this.code=i,this.usedTimes=1,this.program=o,this.vertexShader=l,this.fragmentShader=c,this}}(),THREE.WebGLShader=function(){var e=function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")};return function(t,i,r){return i=t.createShader(i),t.shaderSource(i,r),t.compileShader(i),!1===t.getShaderParameter(i,t.COMPILE_STATUS)&&THREE.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&THREE.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t.getShaderInfoLog(i),e(r)),i}}(),THREE.WebGLState=function(e,t){var i=new Uint8Array(16),r=new Uint8Array(16),n=null,a=null,o=null,s=null,h=null,l=null,c=null,u=null,p=null,f=null,d=null,E=null,m=null,g=null,T=null,v=null;this.initAttributes=function(){for(var e=0,t=i.length;t>e;e++)i[e]=0},this.enableAttribute=function(t){i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1)},this.disableUnusedAttributes=function(){for(var t=0,n=r.length;n>t;t++)r[t]!==i[t]&&(e.disableVertexAttribArray(t),r[t]=0)},this.setBlending=function(i,r,u,p,f,d,E){i!==n&&(i===THREE.NoBlending?e.disable(e.BLEND):i===THREE.AdditiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):i===THREE.SubtractiveBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):i===THREE.MultiplyBlending?(e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):i===THREE.CustomBlending?e.enable(e.BLEND):(e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),n=i),i===THREE.CustomBlending?(f=f||r,d=d||u,E=E||p,(r!==a||f!==h)&&(e.blendEquationSeparate(t(r),t(f)),a=r,h=f),(u!==o||p!==s||d!==l||E!==c)&&(e.blendFuncSeparate(t(u),t(p),t(d),t(E)),o=u,s=p,l=d,c=E)):c=l=h=s=o=a=null},this.setDepthTest=function(t){u!==t&&(t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),u=t)},this.setDepthWrite=function(t){p!==t&&(e.depthMask(t),p=t)},this.setColorWrite=function(t){f!==t&&(e.colorMask(t,t,t,t),f=t)},this.setDoubleSided=function(t){d!==t&&(t?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),d=t)},this.setFlipSided=function(t){E!==t&&(e.frontFace(t?e.CW:e.CCW),E=t)},this.setLineWidth=function(t){t!==m&&(e.lineWidth(t),m=t)},this.setPolygonOffset=function(t,i,r){g!==t&&(t?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL),g=t),!t||T===i&&v===r||(e.polygonOffset(i,r),T=i,v=r)},this.reset=function(){for(var e=0;e<r.length;e++)r[e]=0;E=d=f=p=u=n=null}},THREE.LensFlarePlugin=function(e,t){var i,r,n,a,o,s,h,l,c,u,p,f,d,E,m,g,T=e.context;this.render=function(v,y,R,_){if(0!==t.length){v=new THREE.Vector3;
var x=_/R,H=.5*R,b=.5*_,w=16/_,M=new THREE.Vector2(w*x,w),S=new THREE.Vector3(1,1,0),A=new THREE.Vector2(1,1);if(void 0===d){var w=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),C=new Uint16Array([0,1,2,0,2,3]);p=T.createBuffer(),f=T.createBuffer(),T.bindBuffer(T.ARRAY_BUFFER,p),T.bufferData(T.ARRAY_BUFFER,w,T.STATIC_DRAW),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,f),T.bufferData(T.ELEMENT_ARRAY_BUFFER,C,T.STATIC_DRAW),m=T.createTexture(),g=T.createTexture(),T.bindTexture(T.TEXTURE_2D,m),T.texImage2D(T.TEXTURE_2D,0,T.RGB,16,16,0,T.RGB,T.UNSIGNED_BYTE,null),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.bindTexture(T.TEXTURE_2D,g),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,16,16,0,T.RGBA,T.UNSIGNED_BYTE,null),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST);var w=(E=0<T.getParameter(T.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"}:{vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif( renderType == 2 ) {\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform lowp int renderType;\nuniform sampler2D map;\nuniform sampler2D occlusionMap;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvoid main() {\nif( renderType == 0 ) {\ngl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\n} else if( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nfloat visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\nvisibility = ( 1.0 - visibility / 4.0 );\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * visibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},C=T.createProgram(),P=T.createShader(T.FRAGMENT_SHADER),L=T.createShader(T.VERTEX_SHADER),F="precision "+e.getPrecision()+" float;\n";T.shaderSource(P,F+w.fragmentShader),T.shaderSource(L,F+w.vertexShader),T.compileShader(P),T.compileShader(L),T.attachShader(C,P),T.attachShader(C,L),T.linkProgram(C),d=C,c=T.getAttribLocation(d,"position"),u=T.getAttribLocation(d,"uv"),i=T.getUniformLocation(d,"renderType"),r=T.getUniformLocation(d,"map"),n=T.getUniformLocation(d,"occlusionMap"),a=T.getUniformLocation(d,"opacity"),o=T.getUniformLocation(d,"color"),s=T.getUniformLocation(d,"scale"),h=T.getUniformLocation(d,"rotation"),l=T.getUniformLocation(d,"screenPosition")}for(T.useProgram(d),T.enableVertexAttribArray(c),T.enableVertexAttribArray(u),T.uniform1i(n,0),T.uniform1i(r,1),T.bindBuffer(T.ARRAY_BUFFER,p),T.vertexAttribPointer(c,2,T.FLOAT,!1,16,0),T.vertexAttribPointer(u,2,T.FLOAT,!1,16,8),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,f),T.disable(T.CULL_FACE),T.depthMask(!1),C=0,P=t.length;P>C;C++)if(w=16/_,M.set(w*x,w),L=t[C],v.set(L.matrixWorld.elements[12],L.matrixWorld.elements[13],L.matrixWorld.elements[14]),v.applyMatrix4(y.matrixWorldInverse),v.applyProjection(y.projectionMatrix),S.copy(v),A.x=S.x*H+H,A.y=S.y*b+b,E||0<A.x&&A.x<R&&0<A.y&&A.y<_){T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,m),T.copyTexImage2D(T.TEXTURE_2D,0,T.RGB,A.x-8,A.y-8,16,16,0),T.uniform1i(i,0),T.uniform2f(s,M.x,M.y),T.uniform3f(l,S.x,S.y,S.z),T.disable(T.BLEND),T.enable(T.DEPTH_TEST),T.drawElements(T.TRIANGLES,6,T.UNSIGNED_SHORT,0),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,g),T.copyTexImage2D(T.TEXTURE_2D,0,T.RGBA,A.x-8,A.y-8,16,16,0),T.uniform1i(i,1),T.disable(T.DEPTH_TEST),T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,m),T.drawElements(T.TRIANGLES,6,T.UNSIGNED_SHORT,0),L.positionScreen.copy(S),L.customUpdateCallback?L.customUpdateCallback(L):L.updateLensFlares(),T.uniform1i(i,2),T.enable(T.BLEND);for(var F=0,D=L.lensFlares.length;D>F;F++){var U=L.lensFlares[F];.001<U.opacity&&.001<U.scale&&(S.x=U.x,S.y=U.y,S.z=U.z,w=U.size*U.scale/_,M.x=w*x,M.y=w,T.uniform3f(l,S.x,S.y,S.z),T.uniform2f(s,M.x,M.y),T.uniform1f(h,U.rotation),T.uniform1f(a,U.opacity),T.uniform3f(o,U.color.r,U.color.g,U.color.b),e.state.setBlending(U.blending,U.blendEquation,U.blendSrc,U.blendDst),e.setTexture(U.texture,1),T.drawElements(T.TRIANGLES,6,T.UNSIGNED_SHORT,0))}}T.enable(T.CULL_FACE),T.enable(T.DEPTH_TEST),T.depthMask(!0),e.resetGLState()}}},THREE.ShadowMapPlugin=function(e,t,i,r){function n(e,t,r){if(t.visible){var a=i[t.id];if(a&&t.castShadow&&(!1===t.frustumCulled||!0===c.intersectsObject(t)))for(var o=0,s=a.length;s>o;o++){var h=a[o];t._modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld),E.push(h)}for(o=0,s=t.children.length;s>o;o++)n(e,t.children[o],r)}}var a,o,s,h,l=e.context,c=new THREE.Frustum,u=new THREE.Matrix4,p=new THREE.Vector3,f=new THREE.Vector3,d=new THREE.Vector3,E=[],m=THREE.ShaderLib.depthRGBA,g=THREE.UniformsUtils.clone(m.uniforms);a=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader}),o=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0}),s=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,skinning:!0}),h=new THREE.ShaderMaterial({uniforms:g,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,morphTargets:!0,skinning:!0}),a._shadowPass=!0,o._shadowPass=!0,s._shadowPass=!0,h._shadowPass=!0,this.render=function(i,m){if(!1!==e.shadowMapEnabled){var g,T,v,y,R,_,x,H,b=[];for(y=0,l.clearColor(1,1,1,1),l.disable(l.BLEND),l.enable(l.CULL_FACE),l.frontFace(l.CCW),l.cullFace(e.shadowMapCullFace===THREE.CullFaceFront?l.FRONT:l.BACK),e.state.setDepthTest(!0),g=0,T=t.length;T>g;g++)if(v=t[g],v.castShadow)if(v instanceof THREE.DirectionalLight&&v.shadowCascade)for(R=0;R<v.shadowCascadeCount;R++){var w;if(v.shadowCascadeArray[R])w=v.shadowCascadeArray[R];else{x=v;var M=R;w=new THREE.DirectionalLight,w.isVirtual=!0,w.onlyShadow=!0,w.castShadow=!0,w.shadowCameraNear=x.shadowCameraNear,w.shadowCameraFar=x.shadowCameraFar,w.shadowCameraLeft=x.shadowCameraLeft,w.shadowCameraRight=x.shadowCameraRight,w.shadowCameraBottom=x.shadowCameraBottom,w.shadowCameraTop=x.shadowCameraTop,w.shadowCameraVisible=x.shadowCameraVisible,w.shadowDarkness=x.shadowDarkness,w.shadowBias=x.shadowCascadeBias[M],w.shadowMapWidth=x.shadowCascadeWidth[M],w.shadowMapHeight=x.shadowCascadeHeight[M],w.pointsWorld=[],w.pointsFrustum=[],H=w.pointsWorld,_=w.pointsFrustum;for(var S=0;8>S;S++)H[S]=new THREE.Vector3,_[S]=new THREE.Vector3;H=x.shadowCascadeNearZ[M],x=x.shadowCascadeFarZ[M],_[0].set(-1,-1,H),_[1].set(1,-1,H),_[2].set(-1,1,H),_[3].set(1,1,H),_[4].set(-1,-1,x),_[5].set(1,-1,x),_[6].set(-1,1,x),_[7].set(1,1,x),w.originalCamera=m,_=new THREE.Gyroscope,_.position.copy(v.shadowCascadeOffset),_.add(w),_.add(w.target),m.add(_),v.shadowCascadeArray[R]=w}M=v,H=R,x=M.shadowCascadeArray[H],x.position.copy(M.position),x.target.position.copy(M.target.position),x.lookAt(x.target),x.shadowCameraVisible=M.shadowCameraVisible,x.shadowDarkness=M.shadowDarkness,x.shadowBias=M.shadowCascadeBias[H],_=M.shadowCascadeNearZ[H],M=M.shadowCascadeFarZ[H],x=x.pointsFrustum,x[0].z=_,x[1].z=_,x[2].z=_,x[3].z=_,x[4].z=M,x[5].z=M,x[6].z=M,x[7].z=M,b[y]=w,y++}else b[y]=v,y++;for(g=0,T=b.length;T>g;g++){if(v=b[g],v.shadowMap||(R=THREE.LinearFilter,e.shadowMapType===THREE.PCFSoftShadowMap&&(R=THREE.NearestFilter),v.shadowMap=new THREE.WebGLRenderTarget(v.shadowMapWidth,v.shadowMapHeight,{minFilter:R,magFilter:R,format:THREE.RGBAFormat}),v.shadowMapSize=new THREE.Vector2(v.shadowMapWidth,v.shadowMapHeight),v.shadowMatrix=new THREE.Matrix4),!v.shadowCamera){if(v instanceof THREE.SpotLight)v.shadowCamera=new THREE.PerspectiveCamera(v.shadowCameraFov,v.shadowMapWidth/v.shadowMapHeight,v.shadowCameraNear,v.shadowCameraFar);else{if(!(v instanceof THREE.DirectionalLight)){THREE.error("THREE.ShadowMapPlugin: Unsupported light type for shadow",v);continue}v.shadowCamera=new THREE.OrthographicCamera(v.shadowCameraLeft,v.shadowCameraRight,v.shadowCameraTop,v.shadowCameraBottom,v.shadowCameraNear,v.shadowCameraFar)}i.add(v.shadowCamera),!0===i.autoUpdate&&i.updateMatrixWorld()}if(v.shadowCameraVisible&&!v.cameraHelper&&(v.cameraHelper=new THREE.CameraHelper(v.shadowCamera),i.add(v.cameraHelper)),v.isVirtual&&w.originalCamera==m){for(R=m,y=v.shadowCamera,_=v.pointsFrustum,x=v.pointsWorld,p.set(1/0,1/0,1/0),f.set(-1/0,-1/0,-1/0),M=0;8>M;M++)H=x[M],H.copy(_[M]),H.unproject(R),H.applyMatrix4(y.matrixWorldInverse),H.x<p.x&&(p.x=H.x),H.x>f.x&&(f.x=H.x),H.y<p.y&&(p.y=H.y),H.y>f.y&&(f.y=H.y),H.z<p.z&&(p.z=H.z),H.z>f.z&&(f.z=H.z);y.left=p.x,y.right=f.x,y.top=f.y,y.bottom=p.y,y.updateProjectionMatrix()}for(y=v.shadowMap,_=v.shadowMatrix,R=v.shadowCamera,R.position.setFromMatrixPosition(v.matrixWorld),d.setFromMatrixPosition(v.target.matrixWorld),R.lookAt(d),R.updateMatrixWorld(),R.matrixWorldInverse.getInverse(R.matrixWorld),v.cameraHelper&&(v.cameraHelper.visible=v.shadowCameraVisible),v.shadowCameraVisible&&v.cameraHelper.update(),_.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),_.multiply(R.projectionMatrix),_.multiply(R.matrixWorldInverse),u.multiplyMatrices(R.projectionMatrix,R.matrixWorldInverse),c.setFromMatrix(u),e.setRenderTarget(y),e.clear(),E.length=0,n(i,i,R),v=0,y=E.length;y>v;v++)x=E[v],_=x.object,x=x.buffer,M=_.material instanceof THREE.MeshFaceMaterial?_.material.materials[0]:_.material,H=void 0!==_.geometry.morphTargets&&0<_.geometry.morphTargets.length&&M.morphTargets,S=_ instanceof THREE.SkinnedMesh&&M.skinning,H=_.customDepthMaterial?_.customDepthMaterial:S?H?h:s:H?o:a,e.setMaterialFaces(M),x instanceof THREE.BufferGeometry?e.renderBufferDirect(R,t,null,H,x,_):e.renderBuffer(R,t,null,H,x,_);for(v=0,y=r.length;y>v;v++)x=r[v],_=x.object,_.visible&&_.castShadow&&(_._modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,_.matrixWorld),e.renderImmediateObject(R,t,null,a,_))}g=e.getClearColor(),T=e.getClearAlpha(),l.clearColor(g.r,g.g,g.b,T),l.enable(l.BLEND),e.shadowMapCullFace===THREE.CullFaceFront&&l.cullFace(l.BACK),e.resetGLState()}}},THREE.SpritePlugin=function(e,t){function i(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,n,a,o,s,h,l,c,u,p,f,d,E,m,g,T,v,y,R,_,x,H=e.context,b=new THREE.Vector3,w=new THREE.Quaternion,M=new THREE.Vector3;this.render=function(S,A){if(0!==t.length){if(void 0===_){var C=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),P=new Uint16Array([0,1,2,0,2,3]);y=H.createBuffer(),R=H.createBuffer(),H.bindBuffer(H.ARRAY_BUFFER,y),H.bufferData(H.ARRAY_BUFFER,C,H.STATIC_DRAW),H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,R),H.bufferData(H.ELEMENT_ARRAY_BUFFER,P,H.STATIC_DRAW);var C=H.createProgram(),P=H.createShader(H.VERTEX_SHADER),L=H.createShader(H.FRAGMENT_SHADER);H.shaderSource(P,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}"].join("\n")),H.shaderSource(L,["precision "+e.getPrecision()+" float;","uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n")),H.compileShader(P),H.compileShader(L),H.attachShader(C,P),H.attachShader(C,L),H.linkProgram(C),_=C,T=H.getAttribLocation(_,"position"),v=H.getAttribLocation(_,"uv"),r=H.getUniformLocation(_,"uvOffset"),n=H.getUniformLocation(_,"uvScale"),a=H.getUniformLocation(_,"rotation"),o=H.getUniformLocation(_,"scale"),s=H.getUniformLocation(_,"color"),h=H.getUniformLocation(_,"map"),l=H.getUniformLocation(_,"opacity"),c=H.getUniformLocation(_,"modelViewMatrix"),u=H.getUniformLocation(_,"projectionMatrix"),p=H.getUniformLocation(_,"fogType"),f=H.getUniformLocation(_,"fogDensity"),d=H.getUniformLocation(_,"fogNear"),E=H.getUniformLocation(_,"fogFar"),m=H.getUniformLocation(_,"fogColor"),g=H.getUniformLocation(_,"alphaTest"),C=document.createElement("canvas"),C.width=8,C.height=8,P=C.getContext("2d"),P.fillStyle="white",P.fillRect(0,0,8,8),x=new THREE.Texture(C),x.needsUpdate=!0}H.useProgram(_),H.enableVertexAttribArray(T),H.enableVertexAttribArray(v),H.disable(H.CULL_FACE),H.enable(H.BLEND),H.bindBuffer(H.ARRAY_BUFFER,y),H.vertexAttribPointer(T,2,H.FLOAT,!1,16,0),H.vertexAttribPointer(v,2,H.FLOAT,!1,16,8),H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,R),H.uniformMatrix4fv(u,!1,A.projectionMatrix.elements),H.activeTexture(H.TEXTURE0),H.uniform1i(h,0),P=C=0,(L=S.fog)?(H.uniform3f(m,L.color.r,L.color.g,L.color.b),L instanceof THREE.Fog?(H.uniform1f(d,L.near),H.uniform1f(E,L.far),H.uniform1i(p,1),P=C=1):L instanceof THREE.FogExp2&&(H.uniform1f(f,L.density),H.uniform1i(p,2),P=C=2)):(H.uniform1i(p,0),P=C=0);for(var L=0,F=t.length;F>L;L++){var D=t[L];D._modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,D.matrixWorld),D.z=-D._modelViewMatrix.elements[14]}t.sort(i);for(var U=[],L=0,F=t.length;F>L;L++){var D=t[L],B=D.material;H.uniform1f(g,B.alphaTest),H.uniformMatrix4fv(c,!1,D._modelViewMatrix.elements),D.matrixWorld.decompose(b,w,M),U[0]=M.x,U[1]=M.y,D=0,S.fog&&B.fog&&(D=P),C!==D&&(H.uniform1i(p,D),C=D),null!==B.map?(H.uniform2f(r,B.map.offset.x,B.map.offset.y),H.uniform2f(n,B.map.repeat.x,B.map.repeat.y)):(H.uniform2f(r,0,0),H.uniform2f(n,1,1)),H.uniform1f(l,B.opacity),H.uniform3f(s,B.color.r,B.color.g,B.color.b),H.uniform1f(a,B.rotation),H.uniform2fv(o,U),e.state.setBlending(B.blending,B.blendEquation,B.blendSrc,B.blendDst),e.state.setDepthTest(B.depthTest),e.state.setDepthWrite(B.depthWrite),B.map&&B.map.image&&B.map.image.width?e.setTexture(B.map,0):e.setTexture(x,0),H.drawElements(H.TRIANGLES,6,H.UNSIGNED_SHORT,0)}H.enable(H.CULL_FACE),e.resetGLState()}}},THREE.GeometryUtils={merge:function(e,t,i){THREE.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,i)},center:function(e){return THREE.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var a=new THREE.Texture(void 0,t);return n.load(e,function(e){a.image=e,a.needsUpdate=!0,i&&i(a)},void 0,function(e){r&&r(e)}),a.sourceFile=e,a},loadTextureCube:function(e,t,i,r){var n=new THREE.ImageLoader;n.crossOrigin=this.crossOrigin;var a=new THREE.CubeTexture([],t);a.flipY=!1;var o=0;t=function(t){n.load(e[t],function(e){a.images[t]=e,o+=1,6===o&&(a.needsUpdate=!0,i&&i(a))},void 0,r)};for(var s=0,h=e.length;h>s;++s)t(s);return a},loadCompressedTexture:function(){THREE.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){THREE.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},getNormalMap:function(e,t){var i=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t|=1;var r=e.width,n=e.height,a=document.createElement("canvas");a.width=r,a.height=n;var o=a.getContext("2d");o.drawImage(e,0,0);for(var s=o.getImageData(0,0,r,n).data,h=o.createImageData(r,n),l=h.data,c=0;r>c;c++)for(var u=0;n>u;u++){var p=0>u-1?0:u-1,f=u+1>n-1?n-1:u+1,d=0>c-1?0:c-1,E=c+1>r-1?r-1:c+1,m=[],g=[0,0,s[4*(u*r+c)]/255*t];for(m.push([-1,0,s[4*(u*r+d)]/255*t]),m.push([-1,-1,s[4*(p*r+d)]/255*t]),m.push([0,-1,s[4*(p*r+c)]/255*t]),m.push([1,-1,s[4*(p*r+E)]/255*t]),m.push([1,0,s[4*(u*r+E)]/255*t]),m.push([1,1,s[4*(f*r+E)]/255*t]),m.push([0,1,s[4*(f*r+c)]/255*t]),m.push([-1,1,s[4*(f*r+d)]/255*t]),p=[],d=m.length,f=0;d>f;f++){var E=m[f],T=m[(f+1)%d],E=[E[0]-g[0],E[1]-g[1],E[2]-g[2]],T=[T[0]-g[0],T[1]-g[1],T[2]-g[2]];p.push(i([E[1]*T[2]-E[2]*T[1],E[2]*T[0]-E[0]*T[2],E[0]*T[1]-E[1]*T[0]]))}for(m=[0,0,0],f=0;f<p.length;f++)m[0]+=p[f][0],m[1]+=p[f][1],m[2]+=p[f][2];m[0]/=p.length,m[1]/=p.length,m[2]/=p.length,g=4*(u*r+c),l[g]=(m[0]+1)/2*255|0,l[g+1]=(m[1]+1)/2*255|0,l[g+2]=255*m[2]|0,l[g+3]=255}return o.putImageData(h,0,0),a},generateDataTexture:function(e,t,i){var r=e*t,n=new Uint8Array(3*r),a=Math.floor(255*i.r),o=Math.floor(255*i.g);i=Math.floor(255*i.b);for(var s=0;r>s;s++)n[3*s]=a,n[3*s+1]=o,n[3*s+2]=i;return e=new THREE.DataTexture(n,e,t,THREE.RGBFormat),e.needsUpdate=!0,e}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new THREE.Object3D,r=0,n=t.length;n>r;r++)i.add(new THREE.Mesh(e,t[r]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var r=new THREE.Matrix4;r.getInverse(i.matrixWorld),e.applyMatrix(r),t.remove(e),i.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(e){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(e){var t=e.familyName.toLowerCase();return this.faces[t]=this.faces[t]||{},this.faces[t][e.cssFontWeight]=this.faces[t][e.cssFontWeight]||{},this.faces[t][e.cssFontWeight][e.cssFontStyle]=e,this.faces[t][e.cssFontWeight][e.cssFontStyle]=e},drawText:function(e){var t=this.getFace(),i=this.size/t.resolution,r=0,n=String(e).split(""),a=n.length,o=[];for(e=0;a>e;e++){var s=new THREE.Path,s=this.extractGlyphPoints(n[e],t,i,r,s),r=r+s.offset;o.push(s.path)}return{paths:o,offset:r/2}},extractGlyphPoints:function(e,t,i,r,n){var a,o,s,h,l,c,u,p,f,d,E,m=[],g=t.glyphs[e]||t.glyphs["?"];if(g){if(g.o)for(t=g._cachedOutline||(g._cachedOutline=g.o.split(" ")),h=t.length,e=0;h>e;)switch(s=t[e++]){case"m":s=t[e++]*i+r,l=t[e++]*i,n.moveTo(s,l);break;case"l":s=t[e++]*i+r,l=t[e++]*i,n.lineTo(s,l);break;case"q":if(s=t[e++]*i+r,l=t[e++]*i,p=t[e++]*i+r,f=t[e++]*i,n.quadraticCurveTo(p,f,s,l),a=m[m.length-1])for(c=a.x,u=a.y,a=1,o=this.divisions;o>=a;a++){var T=a/o;THREE.Shape.Utils.b2(T,c,p,s),THREE.Shape.Utils.b2(T,u,f,l)}break;case"b":if(s=t[e++]*i+r,l=t[e++]*i,p=t[e++]*i+r,f=t[e++]*i,d=t[e++]*i+r,E=t[e++]*i,n.bezierCurveTo(p,f,d,E,s,l),a=m[m.length-1])for(c=a.x,u=a.y,a=1,o=this.divisions;o>=a;a++)T=a/o,THREE.Shape.Utils.b3(T,c,p,d,s),THREE.Shape.Utils.b3(T,u,f,E,l)}return{offset:g.ha*i,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var i=void 0!==t.curveSegments?t.curveSegments:4,r=void 0!==t.font?t.font:"helvetiker",n=void 0!==t.weight?t.weight:"normal",a=void 0!==t.style?t.style:"normal";for(THREE.FontUtils.size=void 0!==t.size?t.size:100,THREE.FontUtils.divisions=i,THREE.FontUtils.face=r,THREE.FontUtils.weight=n,THREE.FontUtils.style=a,i=THREE.FontUtils.drawText(e).paths,r=[],n=0,a=i.length;a>n;n++)Array.prototype.push.apply(r,i[n].toShapes());return r},function(e){var t=function(e){for(var t=e.length,i=0,r=t-1,n=0;t>n;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i};return e.Triangulate=function(e,i){var r=e.length;if(3>r)return null;var n,a,o,s=[],h=[],l=[];if(0<t(e))for(a=0;r>a;a++)h[a]=a;else for(a=0;r>a;a++)h[a]=r-1-a;var c=2*r;for(a=r-1;r>2;){if(0>=c--){THREE.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()");break}n=a,n>=r&&(n=0),a=n+1,a>=r&&(a=0),o=a+1,o>=r&&(o=0);var u;e:{var p=u=void 0,f=void 0,d=void 0,E=void 0,m=void 0,g=void 0,T=void 0,v=void 0,p=e[h[n]].x,f=e[h[n]].y,d=e[h[a]].x,E=e[h[a]].y,m=e[h[o]].x,g=e[h[o]].y;if(1e-10>(d-p)*(g-f)-(E-f)*(m-p))u=!1;else{var y=void 0,R=void 0,_=void 0,x=void 0,H=void 0,b=void 0,w=void 0,M=void 0,S=void 0,A=void 0,S=M=w=v=T=void 0,y=m-d,R=g-E,_=p-m,x=f-g,H=d-p,b=E-f;for(u=0;r>u;u++)if(T=e[h[u]].x,v=e[h[u]].y,!(T===p&&v===f||T===d&&v===E||T===m&&v===g)&&(w=T-p,M=v-f,S=T-d,A=v-E,T-=m,v-=g,S=y*A-R*S,w=H*M-b*w,M=_*v-x*T,S>=-1e-10&&M>=-1e-10&&w>=-1e-10)){u=!1;break e}u=!0}}if(u){for(s.push([e[h[n]],e[h[a]],e[h[o]]]),l.push([h[n],h[a],h[o]]),n=a,o=a+1;r>o;n++,o++)h[n]=h[o];r--,c=2*r}}return i?l:s},e.Triangulate.area=t,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Audio=function(e){THREE.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.panner=this.context.createPanner(),this.panner.connect(this.gain),this.autoplay=!1,this.startTime=0,this.isPlaying=!1},THREE.Audio.prototype=Object.create(THREE.Object3D.prototype),THREE.Audio.prototype.constructor=THREE.Audio,THREE.Audio.prototype.load=function(e){var t=this,i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){t.context.decodeAudioData(this.response,function(e){t.source.buffer=e,t.autoplay&&t.play()})},i.send(),this},THREE.Audio.prototype.play=function(){if(!0===this.isPlaying)THREE.warn("THREE.Audio: Audio is already playing.");else{var e=this.context.createBufferSource();e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.connect(this.panner),e.start(0,this.startTime),this.isPlaying=!0,this.source=e}},THREE.Audio.prototype.pause=function(){this.source.stop(),this.startTime=this.context.currentTime},THREE.Audio.prototype.stop=function(){this.source.stop(),this.startTime=0},THREE.Audio.prototype.onEnded=function(){this.isPlaying=!1},THREE.Audio.prototype.setLoop=function(e){this.source.loop=e},THREE.Audio.prototype.setRefDistance=function(e){this.panner.refDistance=e},THREE.Audio.prototype.setRolloffFactor=function(e){this.panner.rolloffFactor=e},THREE.Audio.prototype.setVolume=function(e){this.gain.gain.value=e},THREE.Audio.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3;return function(t){THREE.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}(),THREE.AudioListener=function(){THREE.Object3D.call(this),this.type="AudioListener",this.context=new(window.AudioContext||window.webkitAudioContext)},THREE.AudioListener.prototype=Object.create(THREE.Object3D.prototype),THREE.AudioListener.prototype.constructor=THREE.AudioListener,THREE.AudioListener.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Vector3,a=new THREE.Vector3;return function(o){THREE.Object3D.prototype.updateMatrixWorld.call(this,o),o=this.context.listener;var s=this.up;this.matrixWorld.decompose(e,t,i),r.set(0,0,-1).applyQuaternion(t),n.subVectors(e,a),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z),o.setVelocity(n.x,n.y,n.z),a.copy(e)}}(),THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return THREE.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){return e=this.getUtoTmapping(e),this.getPoint(e)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPoint(t/e));return i},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPointAt(t/e));return i},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),a=0;for(r.push(0),i=1;e>=i;i++)t=this.getPoint(i/e),a+=t.distanceTo(n),r.push(a),n=t;return this.cacheArcLengths=r},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var i,r=this.getLengths(),n=0,a=r.length;i=t?t:e*r[a-1];for(var o,s=0,h=a-1;h>=s;)if(n=Math.floor(s+(h-s)/2),o=r[n]-i,0>o)s=n+1;else{if(!(o>0)){h=n;break}h=n-1}return n=h,r[n]==i?n/(a-1):(s=r[n],r=(n+(i-s)/(r[n+1]-s))/(a-1))},THREE.Curve.prototype.getTangent=function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),e>1&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},THREE.Curve.prototype.getTangentAt=function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,i,r){return 2*(1-e)*(i-t)+2*e*(r-i)},tangentCubicBezier:function(e,t,i,r,n){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*n},tangentSpline:function(e){return 6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e)},interpolate:function(e,t,i,r,n){e=.5*(i-e),r=.5*(r-t);var a=n*n;return(2*t-2*i+e+r)*n*a+(-3*t+3*i-2*e-r)*a+e*n+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.constructor=THREE.CurvePath,THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,e=this.curves[e],t=1-t/e.getLength(),e.getPointAt(t);e++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],i=0,r=this.curves.length;for(e=0;r>e;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,i,r,n,a,o=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=n=Number.POSITIVE_INFINITY;var s,h,l,c,u=o[0]instanceof THREE.Vector3;for(c=u?new THREE.Vector3:new THREE.Vector2,h=0,l=o.length;l>h;h++)s=o[h],s.x>e?e=s.x:s.x<r&&(r=s.x),s.y>t?t=s.y:s.y<n&&(n=s.y),u&&(s.z>i?i=s.z:s.z<a&&(a=s.z)),c.add(s);return o={minX:r,minY:n,maxX:e,maxY:t},u&&(o.maxZ=i,o.minZ=a),o},THREE.CurvePath.prototype.createPointsGeometry=function(e){return e=this.getPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){return e=this.getSpacedPoints(e,!0),this.createGeometry(e)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,i=0;i<e.length;i++)t.vertices.push(new THREE.Vector3(e[i].x,e[i].y,e[i].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var i,r,n=this.getPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,r,n=this.getSpacedPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var i,r,n,a,o,s,h=this.getBoundingBox();for(i=0,r=e.length;r>i;i++)n=e[i],a=n.x,o=n.y,s=a/h.maxX,s=t.getUtoTmapping(s,a),a=t.getPoint(s),s=t.getTangent(s),s.set(-s.y,s.x).multiplyScalar(o),n.x=a.x+s.x,n.y=a.y+s.y;return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.constructor=THREE.Gyroscope,THREE.Gyroscope.prototype.updateMatrixWorld=function(){var e=new THREE.Vector3,t=new THREE.Quaternion,i=new THREE.Vector3,r=new THREE.Vector3,n=new THREE.Quaternion,a=new THREE.Vector3;return function(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,n,a),this.matrix.decompose(e,t,i),this.matrixWorld.compose(r,t,a)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);for(var s=0,h=this.children.length;h>s;s++)this.children[s].updateMatrixWorld(o)}}(),THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.Path.prototype.constructor=THREE.Path,THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);
for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:e})},THREE.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,r=new THREE.LineCurve(new THREE.Vector2(r[r.length-2],r[r.length-1]),new THREE.Vector2(e,t));this.curves.push(r),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(e,t,i,r){var n=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,a=new THREE.QuadraticBezierCurve(new THREE.Vector2(a[a.length-2],a[a.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(i,r));this.curves.push(a),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(e,t,i,r,n,a){var o=Array.prototype.slice.call(arguments),s=this.actions[this.actions.length-1].args,s=new THREE.CubicBezierCurve(new THREE.Vector2(s[s.length-2],s[s.length-1]),new THREE.Vector2(e,t),new THREE.Vector2(i,r),new THREE.Vector2(n,a));this.curves.push(s),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:o})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,i=[new THREE.Vector2(i[i.length-2],i[i.length-1])];Array.prototype.push.apply(i,e),i=new THREE.SplineCurve(i),this.curves.push(i),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,i,r,n,a){var o=this.actions[this.actions.length-1].args;this.absarc(e+o[o.length-2],t+o[o.length-1],i,r,n,a)},THREE.Path.prototype.absarc=function(e,t,i,r,n,a){this.absellipse(e,t,i,i,r,n,a)},THREE.Path.prototype.ellipse=function(e,t,i,r,n,a,o){var s=this.actions[this.actions.length-1].args;this.absellipse(e+s[s.length-2],t+s[s.length-1],i,r,n,a,o)},THREE.Path.prototype.absellipse=function(e,t,i,r,n,a,o){var s=Array.prototype.slice.call(arguments),h=new THREE.EllipseCurve(e,t,i,r,n,a,o);this.curves.push(h),h=h.getPoint(1),s.push(h.x),s.push(h.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:s})},THREE.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],i=0;e>i;i++)t.push(this.getPoint(i/e));return t},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var i,r,n,a,o,s,h,l,c,u,p,f,d,E=[];for(i=0,r=this.actions.length;r>i;i++)switch(n=this.actions[i],a=n.action,n=n.args,a){case THREE.PathActions.MOVE_TO:E.push(new THREE.Vector2(n[0],n[1]));break;case THREE.PathActions.LINE_TO:E.push(new THREE.Vector2(n[0],n[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(o=n[2],s=n[3],c=n[0],u=n[1],0<E.length?(a=E[E.length-1],p=a.x,f=a.y):(a=this.actions[i-1].args,p=a[a.length-2],f=a[a.length-1]),n=1;e>=n;n++)d=n/e,a=THREE.Shape.Utils.b2(d,p,c,o),d=THREE.Shape.Utils.b2(d,f,u,s),E.push(new THREE.Vector2(a,d));break;case THREE.PathActions.BEZIER_CURVE_TO:for(o=n[4],s=n[5],c=n[0],u=n[1],h=n[2],l=n[3],0<E.length?(a=E[E.length-1],p=a.x,f=a.y):(a=this.actions[i-1].args,p=a[a.length-2],f=a[a.length-1]),n=1;e>=n;n++)d=n/e,a=THREE.Shape.Utils.b3(d,p,c,h,o),d=THREE.Shape.Utils.b3(d,f,u,l,s),E.push(new THREE.Vector2(a,d));break;case THREE.PathActions.CSPLINE_THRU:for(a=this.actions[i-1].args,d=[new THREE.Vector2(a[a.length-2],a[a.length-1])],a=e*n[0].length,d=d.concat(n[0]),d=new THREE.SplineCurve(d),n=1;a>=n;n++)E.push(d.getPointAt(n/a));break;case THREE.PathActions.ARC:for(o=n[0],s=n[1],u=n[2],h=n[3],a=n[4],c=!!n[5],p=a-h,f=2*e,n=1;f>=n;n++)d=n/f,c||(d=1-d),d=h+d*p,a=o+u*Math.cos(d),d=s+u*Math.sin(d),E.push(new THREE.Vector2(a,d));break;case THREE.PathActions.ELLIPSE:for(o=n[0],s=n[1],u=n[2],l=n[3],h=n[4],a=n[5],c=!!n[6],p=a-h,f=2*e,n=1;f>=n;n++)d=n/f,c||(d=1-d),d=h+d*p,a=o+u*Math.cos(d),d=s+l*Math.sin(d),E.push(new THREE.Vector2(a,d))}return i=E[E.length-1],1e-10>Math.abs(i.x-E[0].x)&&1e-10>Math.abs(i.y-E[0].y)&&E.splice(E.length-1,1),t&&E.push(E[0]),E},THREE.Path.prototype.toShapes=function(e,t){function i(e){for(var t=[],i=0,r=e.length;r>i;i++){var n=e[i],a=new THREE.Shape;a.actions=n.actions,a.curves=n.curves,t.push(a)}return t}function r(e,t){for(var i=t.length,r=!1,n=i-1,a=0;i>a;n=a++){var o=t[n],s=t[a],h=s.x-o.x,l=s.y-o.y;if(1e-10<Math.abs(l)){if(0>l&&(o=t[a],h=-h,s=t[n],l=-l),!(e.y<o.y||e.y>s.y))if(e.y==o.y){if(e.x==o.x)return!0}else{if(n=l*(e.x-o.x)-h*(e.y-o.y),0==n)return!0;0>n||(r=!r)}}else if(e.y==o.y&&(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x))return!0}return r}var n=function(e){var t,i,r,n,a=[],o=new THREE.Path;for(t=0,i=e.length;i>t;t++)r=e[t],n=r.args,r=r.action,r==THREE.PathActions.MOVE_TO&&0!=o.actions.length&&(a.push(o),o=new THREE.Path),o[r].apply(o,n);return 0!=o.actions.length&&a.push(o),a}(this.actions);if(0==n.length)return[];if(!0===t)return i(n);var a,o,s,h=[];if(1==n.length)return o=n[0],s=new THREE.Shape,s.actions=o.actions,s.curves=o.curves,h.push(s),h;var l=!THREE.Shape.Utils.isClockWise(n[0].getPoints()),l=e?!l:l;s=[];var c,u=[],p=[],f=0;u[f]=void 0,p[f]=[];var d,E;for(d=0,E=n.length;E>d;d++)o=n[d],c=o.getPoints(),a=THREE.Shape.Utils.isClockWise(c),(a=e?!a:a)?(!l&&u[f]&&f++,u[f]={s:new THREE.Shape,p:c},u[f].s.actions=o.actions,u[f].s.curves=o.curves,l&&f++,p[f]=[]):p[f].push({h:o,p:c[0]});if(!u[0])return i(n);if(1<u.length){for(d=!1,E=[],o=0,n=u.length;n>o;o++)s[o]=[];for(o=0,n=u.length;n>o;o++)for(a=p[o],l=0;l<a.length;l++){f=a[l],c=!0;for(var m=0;m<u.length;m++)r(f.p,u[m].p)&&(o!=m&&E.push({froms:o,tos:m,hole:l}),c?(c=!1,s[m].push(f)):d=!0);c&&s[o].push(f)}0<E.length&&(d||(p=s))}for(d=0,E=u.length;E>d;d++)for(s=u[d].s,h.push(s),o=p[d],n=0,a=o.length;a>n;n++)s.holes.push(o[n].h);return h},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.constructor=THREE.Shape,THREE.Shape.prototype.extrude=function(e){return new THREE.ExtrudeGeometry(this,e)},THREE.Shape.prototype.makeGeometry=function(e){return new THREE.ShapeGeometry(this,e)},THREE.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function i(e,t,i){return e.x!=t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function r(e,t,r,n,a){var o=t.x-e.x,s=t.y-e.y,h=n.x-r.x,l=n.y-r.y,c=e.x-r.x,u=e.y-r.y,p=s*h-o*l,f=s*c-o*u;if(1e-10<Math.abs(p)){if(p>0){if(0>f||f>p)return[];if(h=l*c-h*u,0>h||h>p)return[]}else{if(f>0||p>f)return[];if(h=l*c-h*u,h>0||p>h)return[]}return 0==h?!a||0!=f&&f!=p?[e]:[]:h==p?!a||0!=f&&f!=p?[t]:[]:0==f?[r]:f==p?[n]:(a=h/p,[{x:e.x+a*o,y:e.y+a*s}])}return 0!=f||l*c!=h*u?[]:(s=0==o&&0==s,h=0==h&&0==l,s&&h?e.x!=r.x||e.y!=r.y?[]:[e]:s?i(r,n,e)?[e]:[]:h?i(e,t,r)?[r]:[]:(0!=o?(e.x<t.x?(o=e,h=e.x,s=t,e=t.x):(o=t,h=t.x,s=e,e=e.x),r.x<n.x?(t=r,p=r.x,l=n,r=n.x):(t=n,p=n.x,l=r,r=r.x)):(e.y<t.y?(o=e,h=e.y,s=t,e=t.y):(o=t,h=t.y,s=e,e=e.y),r.y<n.y?(t=r,p=r.y,l=n,r=n.y):(t=n,p=n.y,l=r,r=r.y)),p>=h?p>e?[]:e==p?a?[]:[t]:r>=e?[t,s]:[t,l]:h>r?[]:h==r?a?[]:[o]:r>=e?[o,s]:[o,l]))}function n(e,t,i,r){var n=t.x-e.x,a=t.y-e.y;t=i.x-e.x,i=i.y-e.y;var o=r.x-e.x;return r=r.y-e.y,e=n*i-a*t,n=n*r-a*o,1e-10<Math.abs(e)?(t=o*i-r*t,e>0?n>=0&&t>=0:n>=0||t>=0):n>0}var a,o,s,h,l,c={};for(s=e.concat(),a=0,o=t.length;o>a;a++)Array.prototype.push.apply(s,t[a]);for(a=0,o=s.length;o>a;a++)l=s[a].x+":"+s[a].y,void 0!==c[l]&&THREE.warn("THREE.Shape: Duplicate point",l),c[l]=a;a=function(e,t){function i(e,t){var i=m.length-1,r=e-1;0>r&&(r=i);var a=e+1;return a>i&&(a=0),(i=n(m[e],m[r],m[a],s[t]))?(i=s.length-1,r=t-1,0>r&&(r=i),a=t+1,a>i&&(a=0),(i=n(s[t],s[r],s[a],m[e]))?!0:!1):!1}function a(e,t){var i,n;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,n=r(e,t,m[i],m[n],!0),0<n.length)return!0;return!1}function o(e,i){var n,a,o,s;for(n=0;n<g.length;n++)for(a=t[g[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,s=r(e,i,a[o],a[s],!0),0<s.length)return!0;return!1}var s,h,l,c,u,p,f,d,E,m=e.concat(),g=[],T=[],v=0;for(h=t.length;h>v;v++)g.push(v);f=0;for(var y=2*g.length;0<g.length;){if(y--,0>y){console.log("Infinite Loop! Holes left:"+g.length+", Probably Hole outside Shape!");break}for(l=f;l<m.length;l++){for(c=m[l],h=-1,v=0;v<g.length;v++)if(u=g[v],p=c.x+":"+c.y+":"+u,void 0===T[p]){for(s=t[u],d=0;d<s.length;d++)if(u=s[d],i(l,d)&&!a(c,u)&&!o(c,u)){h=d,g.splice(v,1),f=m.slice(0,l+1),u=m.slice(l),d=s.slice(h),E=s.slice(0,h+1),m=f.concat(d).concat(E).concat(u),f=l;break}if(h>=0)break;T[p]=!0}if(h>=0)break}}return m}(e,t);var u=THREE.FontUtils.Triangulate(a,!1);for(a=0,o=u.length;o>a;a++)for(h=u[a],s=0;3>s;s++)l=h[s].x+":"+h[s].y,l=c[l],void 0!==l&&(h[s]=l);return u.concat()},isClockWise:function(e){return 0>THREE.FontUtils.Triangulate.area(e)},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,r){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,r)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){return 3*(1-e)*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,r,n){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,r)+this.b3p3(e,n)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.constructor=THREE.LineCurve,THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},THREE.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.constructor=THREE.QuadraticBezierCurve,THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t=new THREE.Vector2;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t=new THREE.Vector2;return t.x=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y),t.normalize()},THREE.CubicBezierCurve=function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.constructor=THREE.CubicBezierCurve,THREE.CubicBezierCurve.prototype.getPoint=function(e){var t;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,e)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t;return t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t=new THREE.Vector2(t,e),t.normalize(),t},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.constructor=THREE.SplineCurve,THREE.SplineCurve.prototype.getPoint=function(e){var t=this.points;e*=t.length-1;var i=Math.floor(e);e-=i;var r=t[0==i?i:i-1],n=t[i],a=t[i>t.length-2?t.length-1:i+1],t=t[i>t.length-3?t.length-1:i+2],i=new THREE.Vector2;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,a.x,t.x,e),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,a.y,t.y,e),i},THREE.EllipseCurve=function(e,t,i,r,n,a,o){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.constructor=THREE.EllipseCurve,THREE.EllipseCurve.prototype.getPoint=function(e){var t=this.aEndAngle-this.aStartAngle;return 0>t&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),e=!0===this.aClockwise?this.aEndAngle+(1-e)*(2*Math.PI-t):this.aStartAngle+e*t,t=new THREE.Vector2,t.x=this.aX+this.xRadius*Math.cos(e),t.y=this.aY+this.yRadius*Math.sin(e),t},THREE.ArcCurve=function(e,t,i,r,n,a){THREE.EllipseCurve.call(this,e,t,i,i,r,n,a)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.ArcCurve.prototype.constructor=THREE.ArcCurve,THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),t.y=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),t.z=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),t}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},function(e){var t=new THREE.Vector3;return t.x=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t.y=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t.z=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),t}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-1;var i=Math.floor(e);e-=i;var r=t[0==i?i:i-1],n=t[i],a=t[i>t.length-2?t.length-1:i+1],t=t[i>t.length-3?t.length-1:i+2],i=new THREE.Vector3;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,a.x,t.x,e),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,a.y,t.y,e),i.z=THREE.Curve.Utils.interpolate(r.z,n.z,a.z,t.z,e),i}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t=this.points;e*=t.length-0;var i=Math.floor(e);e-=i;var i=i+(i>0?0:(Math.floor(Math.abs(i)/t.length)+1)*t.length),r=t[(i-1)%t.length],n=t[i%t.length],a=t[(i+1)%t.length],t=t[(i+2)%t.length],i=new THREE.Vector3;return i.x=THREE.Curve.Utils.interpolate(r.x,n.x,a.x,t.x,e),i.y=THREE.Curve.Utils.interpolate(r.y,n.y,a.y,t.y,e),i.z=THREE.Curve.Utils.interpolate(r.z,n.z,a.z,t.z,e),i}),THREE.AnimationHandler={LINEAR:0,CATMULLROM:1,CATMULLROM_FORWARD:2,add:function(){THREE.warn("THREE.AnimationHandler.add() has been deprecated.")},get:function(){THREE.warn("THREE.AnimationHandler.get() has been deprecated.")},remove:function(){THREE.warn("THREE.AnimationHandler.remove() has been deprecated.")},animations:[],init:function(e){if(!0===e.initialized)return e;for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(0>e.hierarchy[t].keys[i].time&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[i].rot;e.hierarchy[t].keys[i].rot=(new THREE.Quaternion).fromArray(r)}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(r={},i=0;i<e.hierarchy[t].keys.length;i++)for(var n=0;n<e.hierarchy[t].keys[i].morphTargets.length;n++){var a=e.hierarchy[t].keys[i].morphTargets[n];r[a]=-1}for(e.hierarchy[t].usedMorphTargets=r,i=0;i<e.hierarchy[t].keys.length;i++){var o={};for(a in r){for(n=0;n<e.hierarchy[t].keys[i].morphTargets.length;n++)if(e.hierarchy[t].keys[i].morphTargets[n]===a){o[a]=e.hierarchy[t].keys[i].morphTargetsInfluences[n];break}n===e.hierarchy[t].keys[i].morphTargets.length&&(o[a]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=o}}for(i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--);for(i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}return e.initialized=!0,e},parse:function(e){var t=function(e,i){i.push(e);for(var r=0;r<e.children.length;r++)t(e.children[r],i)},i=[];if(e instanceof THREE.SkinnedMesh)for(var r=0;r<e.skeleton.bones.length;r++)i.push(e.skeleton.bones[r]);else t(e,i);return i},play:function(e){-1===this.animations.indexOf(e)&&this.animations.push(e)},stop:function(e){e=this.animations.indexOf(e),-1!==e&&this.animations.splice(e,1)},update:function(e){for(var t=0;t<this.animations.length;t++)this.animations[t].resetBlendWeights();for(t=0;t<this.animations.length;t++)this.animations[t].update(e)}},THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.init(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.loop=!0,this.weight=0,this.interpolationType=THREE.AnimationHandler.LINEAR},THREE.Animation.prototype={constructor:THREE.Animation,keyTypes:["pos","rot","scl"],play:function(e,t){this.currentTime=void 0!==e?e:0,this.weight=void 0!==t?t:1,this.isPlaying=!0,this.reset(),THREE.AnimationHandler.play(this)},stop:function(){this.isPlaying=!1,THREE.AnimationHandler.stop(this)},reset:function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];void 0===i.animationCache&&(i.animationCache={animations:{},blending:{positionWeight:0,quaternionWeight:0,scaleWeight:0}});var r=this.data.name,n=i.animationCache.animations,a=n[r];for(void 0===a&&(a={prevKey:{pos:0,rot:0,scl:0},nextKey:{pos:0,rot:0,scl:0},originalMatrix:i.matrix},n[r]=a),i=0;3>i;i++){for(var r=this.keyTypes[i],n=this.data.hierarchy[e].keys[0],o=this.getNextKeyWith(r,e,1);o.time<this.currentTime&&o.index>n.index;)n=o,o=this.getNextKeyWith(r,e,o.index+1);a.prevKey[r]=n,a.nextKey[r]=o}}},resetBlendWeights:function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e].animationCache;void 0!==i&&(i=i.blending,i.positionWeight=0,i.quaternionWeight=0,i.scaleWeight=0)}},update:function(){var e=[],t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Quaternion,n=function(e,t){var i,r,n,o,s,h,l=[],c=[];return i=(e.length-1)*t,r=Math.floor(i),i-=r,l[0]=0===r?r:r-1,l[1]=r,l[2]=r>e.length-2?r:r+1,l[3]=r>e.length-3?r:r+2,r=e[l[0]],o=e[l[1]],s=e[l[2]],h=e[l[3]],l=i*i,n=i*l,c[0]=a(r[0],o[0],s[0],h[0],i,l,n),c[1]=a(r[1],o[1],s[1],h[1],i,l,n),c[2]=a(r[2],o[2],s[2],h[2],i,l,n),c},a=function(e,t,i,r,n,a,o){return e=.5*(i-e),r=.5*(r-t),(2*(t-i)+e+r)*o+(-3*(t-i)-2*e-r)*a+e*n+t};return function(a){if(!1!==this.isPlaying&&(this.currentTime+=a*this.timeScale,0!==this.weight)){a=this.data.length,(this.currentTime>a||0>this.currentTime)&&(this.loop?(this.currentTime%=a,0>this.currentTime&&(this.currentTime+=a),this.reset()):this.stop()),a=0;for(var o=this.hierarchy.length;o>a;a++)for(var s=this.hierarchy[a],h=s.animationCache.animations[this.data.name],l=s.animationCache.blending,c=0;3>c;c++){var u=this.keyTypes[c],p=h.prevKey[u],f=h.nextKey[u];if(0<this.timeScale&&f.time<=this.currentTime||0>this.timeScale&&p.time>=this.currentTime){for(p=this.data.hierarchy[a].keys[0],f=this.getNextKeyWith(u,a,1);f.time<this.currentTime&&f.index>p.index;)p=f,f=this.getNextKeyWith(u,a,f.index+1);h.prevKey[u]=p,h.nextKey[u]=f}var d=(this.currentTime-p.time)/(f.time-p.time),E=p[u],m=f[u];0>d&&(d=0),d>1&&(d=1),"pos"===u?this.interpolationType===THREE.AnimationHandler.LINEAR?(i.x=E[0]+(m[0]-E[0])*d,i.y=E[1]+(m[1]-E[1])*d,i.z=E[2]+(m[2]-E[2])*d,p=this.weight/(this.weight+l.positionWeight),s.position.lerp(i,p),l.positionWeight+=this.weight):(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD)&&(e[0]=this.getPrevKeyWith("pos",a,p.index-1).pos,e[1]=E,e[2]=m,e[3]=this.getNextKeyWith("pos",a,f.index+1).pos,d=.33*d+.33,f=n(e,d),p=this.weight/(this.weight+l.positionWeight),l.positionWeight+=this.weight,u=s.position,u.x+=(f[0]-u.x)*p,u.y+=(f[1]-u.y)*p,u.z+=(f[2]-u.z)*p,this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD&&(d=n(e,1.01*d),t.set(d[0],d[1],d[2]),t.sub(u),t.y=0,t.normalize(),d=Math.atan2(t.x,t.z),s.rotation.set(0,d,0))):"rot"===u?(THREE.Quaternion.slerp(E,m,r,d),0===l.quaternionWeight?(s.quaternion.copy(r),l.quaternionWeight=this.weight):(p=this.weight/(this.weight+l.quaternionWeight),THREE.Quaternion.slerp(s.quaternion,r,s.quaternion,p),l.quaternionWeight+=this.weight)):"scl"===u&&(i.x=E[0]+(m[0]-E[0])*d,i.y=E[1]+(m[1]-E[1])*d,i.z=E[2]+(m[2]-E[2])*d,p=this.weight/(this.weight+l.scaleWeight),s.scale.lerp(i,p),l.scaleWeight+=this.weight)}return!0}}}(),getNextKeyWith:function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i<r.length-1?i:r.length-1:i%r.length;i<r.length;i++)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[0]},getPrevKeyWith:function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+r.length;i>=0;i--)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[r.length-1]}},THREE.KeyFrameAnimation=function(e){this.root=e.node,this.data=THREE.AnimationHandler.init(e),this.hierarchy=THREE.AnimationHandler.parse(this.root),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.loop=this.isPaused=!0,e=0;for(var t=this.hierarchy.length;t>e;e++){var i=this.data.hierarchy[e].sids,r=this.hierarchy[e];if(this.data.hierarchy[e].keys.length&&i){for(var n=0;n<i.length;n++){var a=i[n],o=this.getNextKeyWith(a,e,0);o&&o.apply(a)}r.matrixAutoUpdate=!1,this.data.hierarchy[e].node.updateMatrix(),r.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype={constructor:THREE.KeyFrameAnimation,play:function(e){if(this.currentTime=void 0!==e?e:0,!1===this.isPlaying){this.isPlaying=!0;var t,i,r=this.hierarchy.length;for(e=0;r>e;e++)t=this.hierarchy[e],i=this.data.hierarchy[e],void 0===i.animationCache&&(i.animationCache={},i.animationCache.prevKey=null,i.animationCache.nextKey=null,i.animationCache.originalMatrix=t.matrix),t=this.data.hierarchy[e].keys,t.length&&(i.animationCache.prevKey=t[0],i.animationCache.nextKey=t[1],this.startTime=Math.min(t[0].time,this.startTime),this.endTime=Math.max(t[t.length-1].time,this.endTime));this.update(0)}this.isPaused=!1,THREE.AnimationHandler.play(this)},stop:function(){this.isPaused=this.isPlaying=!1,THREE.AnimationHandler.stop(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e];if(void 0!==i.animationCache){var r=i.animationCache.originalMatrix;r.copy(t.matrix),t.matrix=r,delete i.animationCache}}},update:function(e){if(!1!==this.isPlaying){this.currentTime+=e*this.timeScale,e=this.data.length,!0===this.loop&&this.currentTime>e&&(this.currentTime%=e),this.currentTime=Math.min(this.currentTime,e),e=0;for(var t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e],r=this.data.hierarchy[e],n=r.keys,r=r.animationCache;if(n.length){var a=r.prevKey,o=r.nextKey;if(o.time<=this.currentTime){for(;o.time<this.currentTime&&o.index>a.index;)a=o,o=n[a.index+1];r.prevKey=a,r.nextKey=o}o.time>=this.currentTime?a.interpolate(o,this.currentTime):a.interpolate(o,o.time),this.data.hierarchy[e].node.updateMatrix(),i.matrixWorldNeedsUpdate=!0}}}},getNextKeyWith:function(e,t,i){for(t=this.data.hierarchy[t].keys,i%=t.length;i<t.length;i++)if(t[i].hasTarget(e))return t[i];return t[0]},getPrevKeyWith:function(e,t,i){for(t=this.data.hierarchy[t].keys,i=i>=0?i:i+t.length;i>=0;i--)if(t[i].hasTarget(e))return t[i];return t[t.length-1]}},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.currentFrame=this.lastFrame=0,this.isPlaying=!1},THREE.MorphAnimation.prototype={constructor:THREE.MorphAnimation,play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(e){if(!1!==this.isPlaying){this.currentTime+=e,!0===this.loop&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration),e=this.duration/this.frames;var t=Math.floor(this.currentTime/e),i=this.mesh.morphTargetInfluences;t!=this.currentFrame&&(i[this.lastFrame]=0,i[this.currentFrame]=1,i[t]=0,this.lastFrame=this.currentFrame,this.currentFrame=t),i[t]=this.currentTime%e/e,i[this.lastFrame]=1-i[t]}}},THREE.BoxGeometry=function(e,t,i,r,n,a){function o(e,t,i,r,n,a,o,h){var l,c=s.widthSegments,u=s.heightSegments,p=n/2,f=a/2,d=s.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?l="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(l="y",u=s.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(l="x",c=s.depthSegments);var E=c+1,m=u+1,g=n/c,T=a/u,v=new THREE.Vector3;for(v[l]=o>0?1:-1,n=0;m>n;n++)for(a=0;E>a;a++){var y=new THREE.Vector3;y[e]=(a*g-p)*i,y[t]=(n*T-f)*r,y[l]=o,s.vertices.push(y)}for(n=0;u>n;n++)for(a=0;c>a;a++)f=a+E*n,e=a+E*(n+1),t=a+1+E*(n+1),i=a+1+E*n,r=new THREE.Vector2(a/c,1-n/u),o=new THREE.Vector2(a/c,1-(n+1)/u),l=new THREE.Vector2((a+1)/c,1-(n+1)/u),p=new THREE.Vector2((a+1)/c,1-n/u),f=new THREE.Face3(f+d,e+d,i+d),f.normal.copy(v),f.vertexNormals.push(v.clone(),v.clone(),v.clone()),f.materialIndex=h,s.faces.push(f),s.faceVertexUvs[0].push([r,o,p]),f=new THREE.Face3(e+d,t+d,i+d),f.normal.copy(v),f.vertexNormals.push(v.clone(),v.clone(),v.clone()),f.materialIndex=h,s.faces.push(f),s.faceVertexUvs[0].push([o.clone(),l,p.clone()])}THREE.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a},this.widthSegments=r||1,this.heightSegments=n||1,this.depthSegments=a||1;var s=this;r=e/2,n=t/2,a=i/2,o("z","y",-1,-1,i,t,r,0),o("z","y",1,-1,i,t,-r,1),o("x","z",1,1,e,i,n,2),o("x","z",1,-1,e,i,-n,3),o("x","y",1,-1,e,t,a,4),o("x","y",-1,-1,e,t,-a,5),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.BoxGeometry.prototype.constructor=THREE.BoxGeometry,THREE.CircleGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var n,a=[];n=new THREE.Vector3;var o=new THREE.Vector2(.5,.5);for(this.vertices.push(n),a.push(o),n=0;t>=n;n++){var s=new THREE.Vector3,h=i+n/t*r;s.x=e*Math.cos(h),s.y=e*Math.sin(h),this.vertices.push(s),a.push(new THREE.Vector2((s.x/e+1)/2,(s.y/e+1)/2))}for(i=new THREE.Vector3(0,0,1),n=1;t>=n;n++)this.faces.push(new THREE.Face3(n,n+1,0,[i.clone(),i.clone(),i.clone()])),this.faceVertexUvs[0].push([a[n].clone(),a[n+1].clone(),o.clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry.prototype.constructor=THREE.CircleGeometry,THREE.CubeGeometry=function(e,t,i,r,n,a){return THREE.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."),new THREE.BoxGeometry(e,t,i,r,n,a)},THREE.CylinderGeometry=function(e,t,i,r,n,a,o,s){THREE.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,r=r||8,n=n||1,a=void 0!==a?a:!1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var h,l,c=i/2,u=[],p=[];for(l=0;n>=l;l++){var f=[],d=[],E=l/n,m=E*(t-e)+e;for(h=0;r>=h;h++){var g=h/r,T=new THREE.Vector3;T.x=m*Math.sin(g*s+o),T.y=-E*i+c,T.z=m*Math.cos(g*s+o),this.vertices.push(T),f.push(this.vertices.length-1),d.push(new THREE.Vector2(g,1-E))}u.push(f),p.push(d)}for(i=(t-e)/i,h=0;r>h;h++)for(0!==e?(o=this.vertices[u[0][h]].clone(),s=this.vertices[u[0][h+1]].clone()):(o=this.vertices[u[1][h]].clone(),s=this.vertices[u[1][h+1]].clone()),o.setY(Math.sqrt(o.x*o.x+o.z*o.z)*i).normalize(),s.setY(Math.sqrt(s.x*s.x+s.z*s.z)*i).normalize(),l=0;n>l;l++){var f=u[l][h],d=u[l+1][h],E=u[l+1][h+1],m=u[l][h+1],g=o.clone(),T=o.clone(),v=s.clone(),y=s.clone(),R=p[l][h].clone(),_=p[l+1][h].clone(),x=p[l+1][h+1].clone(),H=p[l][h+1].clone();this.faces.push(new THREE.Face3(f,d,m,[g,T,y])),this.faceVertexUvs[0].push([R,_,H]),this.faces.push(new THREE.Face3(d,E,m,[T.clone(),v,y.clone()])),this.faceVertexUvs[0].push([_.clone(),x,H.clone()])}if(!1===a&&e>0)for(this.vertices.push(new THREE.Vector3(0,c,0)),h=0;r>h;h++)f=u[0][h],d=u[0][h+1],E=this.vertices.length-1,g=new THREE.Vector3(0,1,0),T=new THREE.Vector3(0,1,0),v=new THREE.Vector3(0,1,0),R=p[0][h].clone(),_=p[0][h+1].clone(),x=new THREE.Vector2(_.x,0),this.faces.push(new THREE.Face3(f,d,E,[g,T,v])),this.faceVertexUvs[0].push([R,_,x]);if(!1===a&&t>0)for(this.vertices.push(new THREE.Vector3(0,-c,0)),h=0;r>h;h++)f=u[n][h+1],d=u[n][h],E=this.vertices.length-1,g=new THREE.Vector3(0,-1,0),T=new THREE.Vector3(0,-1,0),v=new THREE.Vector3(0,-1,0),R=p[n][h+1].clone(),_=p[n][h].clone(),x=new THREE.Vector2(_.x,1),this.faces.push(new THREE.Face3(f,d,E,[g,T,v])),this.faceVertexUvs[0].push([R,_,x]);this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.ExtrudeGeometry=function(e,t){"undefined"!=typeof e&&(THREE.Geometry.call(this),this.type="ExtrudeGeometry",e=e instanceof Array?e:[e],this.addShapeList(e,t),this.computeFaceNormals())},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.constructor=THREE.ExtrudeGeometry,THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,r=0;i>r;r++)this.addShape(e[r],t)},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function i(e,t,i){return t||THREE.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}function r(e,t,i){var r=1,r=e.x-t.x,n=e.y-t.y,a=i.x-e.x,o=i.y-e.y,s=r*r+n*n;if(1e-10<Math.abs(r*o-n*a)){var h=Math.sqrt(s),l=Math.sqrt(a*a+o*o),s=t.x-n/h;if(t=t.y+r/h,a=((i.x-o/l-s)*o-(i.y+a/l-t)*a)/(r*o-n*a),i=s+r*a-e.x,e=t+n*a-e.y,r=i*i+e*e,2>=r)return new THREE.Vector2(i,e);r=Math.sqrt(r/2)}else e=!1,r>1e-10?a>1e-10&&(e=!0):-1e-10>r?-1e-10>a&&(e=!0):Math.sign(n)==Math.sign(o)&&(e=!0),e?(i=-n,e=r,r=Math.sqrt(s)):(i=r,e=n,r=Math.sqrt(s/2));return new THREE.Vector2(i/r,e/r)}function n(e,t){var i,r;for(z=e.length;0<=--z;){i=z,r=z-1,0>r&&(r=e.length-1);for(var n=0,a=T+2*E,n=0;a>n;n++){var o=O*n,s=O*(n+1),h=t+i+o,o=t+r+o,l=t+r+s,s=t+i+s,h=h+S,o=o+S,l=l+S,s=s+S;M.faces.push(new THREE.Face3(h,o,s,null,null,_)),M.faces.push(new THREE.Face3(o,l,s,null,null,_)),h=x.generateSideWallUV(M,h,o,l,s),M.faceVertexUvs[0].push([h[0],h[1],h[3]]),M.faceVertexUvs[0].push([h[1],h[2],h[3]])}}}function a(e,t,i){M.vertices.push(new THREE.Vector3(e,t,i))}function o(e,t,i){e+=S,t+=S,i+=S,M.faces.push(new THREE.Face3(e,t,i,null,null,R)),e=x.generateTopUV(M,e,t,i),M.faceVertexUvs[0].push(e)}var s,h,l,c,u,p=void 0!==t.amount?t.amount:100,f=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:f-2,E=void 0!==t.bevelSegments?t.bevelSegments:3,m=void 0!==t.bevelEnabled?t.bevelEnabled:!0,g=void 0!==t.curveSegments?t.curveSegments:12,T=void 0!==t.steps?t.steps:1,v=t.extrudePath,y=!1,R=t.material,_=t.extrudeMaterial,x=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;v&&(s=v.getSpacedPoints(T),y=!0,m=!1,h=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(v,T,!1),l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3),m||(d=f=E=0);var H,b,w,M=this,S=this.vertices.length,v=e.extractPoints(g),g=v.shape,A=v.holes;
if(v=!THREE.Shape.Utils.isClockWise(g)){for(g=g.reverse(),b=0,w=A.length;w>b;b++)H=A[b],THREE.Shape.Utils.isClockWise(H)&&(A[b]=H.reverse());v=!1}var C=THREE.Shape.Utils.triangulateShape(g,A),P=g;for(b=0,w=A.length;w>b;b++)H=A[b],g=g.concat(H);var L,F,D,U,B,k,O=g.length,V=C.length,v=[],z=0;for(D=P.length,L=D-1,F=z+1;D>z;z++,L++,F++)L===D&&(L=0),F===D&&(F=0),v[z]=r(P[z],P[L],P[F]);var N,I=[],G=v.concat();for(b=0,w=A.length;w>b;b++){for(H=A[b],N=[],z=0,D=H.length,L=D-1,F=z+1;D>z;z++,L++,F++)L===D&&(L=0),F===D&&(F=0),N[z]=r(H[z],H[L],H[F]);I.push(N),G=G.concat(N)}for(L=0;E>L;L++){for(D=L/E,U=f*(1-D),F=d*Math.sin(D*Math.PI/2),z=0,D=P.length;D>z;z++)B=i(P[z],v[z],F),a(B.x,B.y,-U);for(b=0,w=A.length;w>b;b++)for(H=A[b],N=I[b],z=0,D=H.length;D>z;z++)B=i(H[z],N[z],F),a(B.x,B.y,-U)}for(F=d,z=0;O>z;z++)B=m?i(g[z],G[z],F):g[z],y?(c.copy(h.normals[0]).multiplyScalar(B.x),l.copy(h.binormals[0]).multiplyScalar(B.y),u.copy(s[0]).add(c).add(l),a(u.x,u.y,u.z)):a(B.x,B.y,0);for(D=1;T>=D;D++)for(z=0;O>z;z++)B=m?i(g[z],G[z],F):g[z],y?(c.copy(h.normals[D]).multiplyScalar(B.x),l.copy(h.binormals[D]).multiplyScalar(B.y),u.copy(s[D]).add(c).add(l),a(u.x,u.y,u.z)):a(B.x,B.y,p/T*D);for(L=E-1;L>=0;L--){for(D=L/E,U=f*(1-D),F=d*Math.sin(D*Math.PI/2),z=0,D=P.length;D>z;z++)B=i(P[z],v[z],F),a(B.x,B.y,p+U);for(b=0,w=A.length;w>b;b++)for(H=A[b],N=I[b],z=0,D=H.length;D>z;z++)B=i(H[z],N[z],F),y?a(B.x,B.y+s[T-1].y,s[T-1].x+U):a(B.x,B.y,p+U)}!function(){if(m){var e;for(e=0*O,z=0;V>z;z++)k=C[z],o(k[2]+e,k[1]+e,k[0]+e);for(e=T+2*E,e*=O,z=0;V>z;z++)k=C[z],o(k[0]+e,k[1]+e,k[2]+e)}else{for(z=0;V>z;z++)k=C[z],o(k[2],k[1],k[0]);for(z=0;V>z;z++)k=C[z],o(k[0]+O*T,k[1]+O*T,k[2]+O*T)}}(),function(){var e=0;for(n(P,e),e+=P.length,b=0,w=A.length;w>b;b++)H=A[b],n(H,e),e+=H.length}()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,r){return e=e.vertices,t=e[t],i=e[i],r=e[r],[new THREE.Vector2(t.x,t.y),new THREE.Vector2(i.x,i.y),new THREE.Vector2(r.x,r.y)]},generateSideWallUV:function(e,t,i,r,n){return e=e.vertices,t=e[t],i=e[i],r=e[r],n=e[n],.01>Math.abs(t.y-i.y)?[new THREE.Vector2(t.x,1-t.z),new THREE.Vector2(i.x,1-i.z),new THREE.Vector2(r.x,1-r.z),new THREE.Vector2(n.x,1-n.z)]:[new THREE.Vector2(t.y,1-t.z),new THREE.Vector2(i.y,1-i.z),new THREE.Vector2(r.y,1-r.z),new THREE.Vector2(n.y,1-n.z)]}},THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),this.type="ShapeGeometry",!1==e instanceof Array&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.constructor=THREE.ShapeGeometry,THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,r=e.length;r>i;i++)this.addShape(e[i],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var i,r,n,a=t.material,o=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,s=this.vertices.length;i=e.extractPoints(void 0!==t.curveSegments?t.curveSegments:12);var h=i.shape,l=i.holes;if(!THREE.Shape.Utils.isClockWise(h))for(h=h.reverse(),i=0,r=l.length;r>i;i++)n=l[i],THREE.Shape.Utils.isClockWise(n)&&(l[i]=n.reverse());var c=THREE.Shape.Utils.triangulateShape(h,l);for(i=0,r=l.length;r>i;i++)n=l[i],h=h.concat(n);for(l=h.length,r=c.length,i=0;l>i;i++)n=h[i],this.vertices.push(new THREE.Vector3(n.x,n.y,0));for(i=0;r>i;i++)l=c[i],h=l[0]+s,n=l[1]+s,l=l[2]+s,this.faces.push(new THREE.Face3(h,n,l,null,null,a)),this.faceVertexUvs[0].push(o.generateTopUV(this,h,n,l))},THREE.LatheGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=t||12,i=i||0,r=r||2*Math.PI;for(var n=1/(e.length-1),a=1/t,o=0,s=t;s>=o;o++)for(var h=i+o*a*r,l=Math.cos(h),c=Math.sin(h),h=0,u=e.length;u>h;h++){var p=e[h],f=new THREE.Vector3;f.x=l*p.x-c*p.y,f.y=c*p.x+l*p.y,f.z=p.z,this.vertices.push(f)}for(i=e.length,o=0,s=t;s>o;o++)for(h=0,u=e.length-1;u>h;h++){t=c=h+i*o,r=c+i;var l=c+1+i,c=c+1,p=o*a,f=h*n,d=p+a,E=f+n;this.faces.push(new THREE.Face3(t,r,c)),this.faceVertexUvs[0].push([new THREE.Vector2(p,f),new THREE.Vector2(d,f),new THREE.Vector2(p,E)]),this.faces.push(new THREE.Face3(r,l,c)),this.faceVertexUvs[0].push([new THREE.Vector2(d,f),new THREE.Vector2(d,E),new THREE.Vector2(p,E)])}this.mergeVertices(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.LatheGeometry.prototype.constructor=THREE.LatheGeometry,THREE.PlaneGeometry=function(e,t,i,r){console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."),THREE.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new THREE.PlaneBufferGeometry(e,t,i,r))},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.PlaneBufferGeometry=function(e,t,i,r){THREE.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};var n=e/2,a=t/2;i=i||1,r=r||1;var o=i+1,s=r+1,h=e/i,l=t/r;t=new Float32Array(o*s*3),e=new Float32Array(o*s*3);for(var c=new Float32Array(o*s*2),u=0,p=0,f=0;s>f;f++)for(var d=f*l-a,E=0;o>E;E++)t[u]=E*h-n,t[u+1]=-d,e[u+2]=1,c[p]=E/i,c[p+1]=1-f/r,u+=3,p+=2;for(u=0,n=new(65535<t.length/3?Uint32Array:Uint16Array)(i*r*6),f=0;r>f;f++)for(E=0;i>E;E++)a=E+o*(f+1),s=E+1+o*(f+1),h=E+1+o*f,n[u]=E+o*f,n[u+1]=a,n[u+2]=h,n[u+3]=a,n[u+4]=s,n[u+5]=h,u+=6;this.addAttribute("index",new THREE.BufferAttribute(n,1)),this.addAttribute("position",new THREE.BufferAttribute(t,3)),this.addAttribute("normal",new THREE.BufferAttribute(e,3)),this.addAttribute("uv",new THREE.BufferAttribute(c,2))},THREE.PlaneBufferGeometry.prototype=Object.create(THREE.BufferGeometry.prototype),THREE.PlaneBufferGeometry.prototype.constructor=THREE.PlaneBufferGeometry,THREE.RingGeometry=function(e,t,i,r,n,a){THREE.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},e=e||0,t=t||50,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(1,r):8;var o,s=[],h=e,l=(t-e)/r;for(e=0;r+1>e;e++){for(o=0;i+1>o;o++){var c=new THREE.Vector3,u=n+o/i*a;c.x=h*Math.cos(u),c.y=h*Math.sin(u),this.vertices.push(c),s.push(new THREE.Vector2((c.x/t+1)/2,(c.y/t+1)/2))}h+=l}for(t=new THREE.Vector3(0,0,1),e=0;r>e;e++)for(n=e*(i+1),o=0;i>o;o++)a=u=o+n,l=u+i+1,c=u+i+2,this.faces.push(new THREE.Face3(a,l,c,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[a].clone(),s[l].clone(),s[c].clone()]),a=u,l=u+i+2,c=u+1,this.faces.push(new THREE.Face3(a,l,c,[t.clone(),t.clone(),t.clone()])),this.faceVertexUvs[0].push([s[a].clone(),s[l].clone(),s[c].clone()]);this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,h)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry.prototype.constructor=THREE.RingGeometry,THREE.SphereGeometry=function(e,t,i,r,n,a,o){THREE.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,h,l=[],c=[];for(h=0;i>=h;h++){var u=[],p=[];for(s=0;t>=s;s++){var f=s/t,d=h/i,E=new THREE.Vector3;E.x=-e*Math.cos(r+f*n)*Math.sin(a+d*o),E.y=e*Math.cos(a+d*o),E.z=e*Math.sin(r+f*n)*Math.sin(a+d*o),this.vertices.push(E),u.push(this.vertices.length-1),p.push(new THREE.Vector2(f,1-d))}l.push(u),c.push(p)}for(h=0;i>h;h++)for(s=0;t>s;s++){r=l[h][s+1],n=l[h][s],a=l[h+1][s],o=l[h+1][s+1];var u=this.vertices[r].clone().normalize(),p=this.vertices[n].clone().normalize(),f=this.vertices[a].clone().normalize(),d=this.vertices[o].clone().normalize(),E=c[h][s+1].clone(),m=c[h][s].clone(),g=c[h+1][s].clone(),T=c[h+1][s+1].clone();Math.abs(this.vertices[r].y)===e?(E.x=(E.x+m.x)/2,this.faces.push(new THREE.Face3(r,a,o,[u,f,d])),this.faceVertexUvs[0].push([E,g,T])):Math.abs(this.vertices[a].y)===e?(g.x=(g.x+T.x)/2,this.faces.push(new THREE.Face3(r,n,a,[u,p,f])),this.faceVertexUvs[0].push([E,m,g])):(this.faces.push(new THREE.Face3(r,n,o,[u,p,d])),this.faceVertexUvs[0].push([E,m,T]),this.faces.push(new THREE.Face3(n,a,o,[p.clone(),f,d.clone()])),this.faceVertexUvs[0].push([m.clone(),g,T.clone()]))}this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.TextGeometry=function(e,t){t=t||{};var i=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,t),this.type="TextGeometry"},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TextGeometry.prototype.constructor=THREE.TextGeometry,THREE.TorusGeometry=function(e,t,i,r,n){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},e=e||100,t=t||40,i=i||8,r=r||6,n=n||2*Math.PI;for(var a=new THREE.Vector3,o=[],s=[],h=0;i>=h;h++)for(var l=0;r>=l;l++){var c=l/r*n,u=h/i*Math.PI*2;a.x=e*Math.cos(c),a.y=e*Math.sin(c);var p=new THREE.Vector3;p.x=(e+t*Math.cos(u))*Math.cos(c),p.y=(e+t*Math.cos(u))*Math.sin(c),p.z=t*Math.sin(u),this.vertices.push(p),o.push(new THREE.Vector2(l/r,h/i)),s.push(p.clone().sub(a).normalize())}for(h=1;i>=h;h++)for(l=1;r>=l;l++)e=(r+1)*h+l-1,t=(r+1)*(h-1)+l-1,n=(r+1)*(h-1)+l,a=(r+1)*h+l,c=new THREE.Face3(e,t,a,[s[e].clone(),s[t].clone(),s[a].clone()]),this.faces.push(c),this.faceVertexUvs[0].push([o[e].clone(),o[t].clone(),o[a].clone()]),c=new THREE.Face3(t,n,a,[s[t].clone(),s[n].clone(),s[a].clone()]),this.faces.push(c),this.faceVertexUvs[0].push([o[t].clone(),o[n].clone(),o[a].clone()]);this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusGeometry.prototype.constructor=THREE.TorusGeometry,THREE.TorusKnotGeometry=function(e,t,i,r,n,a,o){function s(e,t,i,r,n){var a=Math.cos(e),o=Math.sin(e);return e*=t/i,t=Math.cos(e),a*=r*(2+t)*.5,o=r*(2+t)*o*.5,r=n*r*Math.sin(e)*.5,new THREE.Vector3(a,o,r)}THREE.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,p:n,q:a,heightScale:o},e=e||100,t=t||40,i=i||64,r=r||8,n=n||2,a=a||3,o=o||1;for(var h=Array(i),l=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,p=0;i>p;++p){h[p]=Array(r);var f=p/i*2*n*Math.PI,d=s(f,a,n,e,o),f=s(f+.01,a,n,e,o);for(l.subVectors(f,d),c.addVectors(f,d),u.crossVectors(l,c),c.crossVectors(u,l),u.normalize(),c.normalize(),f=0;r>f;++f){var E=f/r*2*Math.PI,m=-t*Math.cos(E),E=t*Math.sin(E),g=new THREE.Vector3;g.x=d.x+m*c.x+E*u.x,g.y=d.y+m*c.y+E*u.y,g.z=d.z+m*c.z+E*u.z,h[p][f]=this.vertices.push(g)-1}}for(p=0;i>p;++p)for(f=0;r>f;++f)n=(p+1)%i,a=(f+1)%r,e=h[p][f],t=h[n][f],n=h[n][a],a=h[p][a],o=new THREE.Vector2(p/i,f/r),l=new THREE.Vector2((p+1)/i,f/r),c=new THREE.Vector2((p+1)/i,(f+1)/r),u=new THREE.Vector2(p/i,(f+1)/r),this.faces.push(new THREE.Face3(e,t,a)),this.faceVertexUvs[0].push([o,l,u]),this.faces.push(new THREE.Face3(t,n,a)),this.faceVertexUvs[0].push([l.clone(),c,u.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry.prototype.constructor=THREE.TorusKnotGeometry,THREE.TubeGeometry=function(e,t,i,r,n,a){THREE.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:i,radialSegments:r,closed:n},t=t||64,i=i||1,r=r||8,n=n||!1,a=a||THREE.TubeGeometry.NoTaper;var o,s,h,l,c,u,p,f,d,E,m=[],g=t+1,T=new THREE.Vector3;for(f=new THREE.TubeGeometry.FrenetFrames(e,t,n),d=f.normals,E=f.binormals,this.tangents=f.tangents,this.normals=d,this.binormals=E,f=0;g>f;f++)for(m[f]=[],h=f/(g-1),p=e.getPointAt(h),o=d[f],s=E[f],c=i*a(h),h=0;r>h;h++)l=h/r*2*Math.PI,u=-c*Math.cos(l),l=c*Math.sin(l),T.copy(p),T.x+=u*o.x+l*s.x,T.y+=u*o.y+l*s.y,T.z+=u*o.z+l*s.z,m[f][h]=this.vertices.push(new THREE.Vector3(T.x,T.y,T.z))-1;for(f=0;t>f;f++)for(h=0;r>h;h++)a=n?(f+1)%t:f+1,g=(h+1)%r,e=m[f][h],i=m[a][h],a=m[a][g],g=m[f][g],T=new THREE.Vector2(f/t,h/r),d=new THREE.Vector2((f+1)/t,h/r),E=new THREE.Vector2((f+1)/t,(h+1)/r),o=new THREE.Vector2(f/t,(h+1)/r),this.faces.push(new THREE.Face3(e,i,g)),this.faceVertexUvs[0].push([T,d,o]),this.faces.push(new THREE.Face3(i,a,g)),this.faceVertexUvs[0].push([d.clone(),E,o.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.prototype.constructor=THREE.TubeGeometry,THREE.TubeGeometry.NoTaper=function(){return 1},THREE.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},THREE.TubeGeometry.FrenetFrames=function(e,t,i){var r=new THREE.Vector3,n=[],a=[],o=[],s=new THREE.Vector3,h=new THREE.Matrix4;t+=1;var l,c,u;for(this.tangents=n,this.normals=a,this.binormals=o,l=0;t>l;l++)c=l/(t-1),n[l]=e.getTangentAt(c),n[l].normalize();for(a[0]=new THREE.Vector3,o[0]=new THREE.Vector3,e=Number.MAX_VALUE,l=Math.abs(n[0].x),c=Math.abs(n[0].y),u=Math.abs(n[0].z),e>=l&&(e=l,r.set(1,0,0)),e>=c&&(e=c,r.set(0,1,0)),e>=u&&r.set(0,0,1),s.crossVectors(n[0],r).normalize(),a[0].crossVectors(n[0],s),o[0].crossVectors(n[0],a[0]),l=1;t>l;l++)a[l]=a[l-1].clone(),o[l]=o[l-1].clone(),s.crossVectors(n[l-1],n[l]),1e-4<s.length()&&(s.normalize(),r=Math.acos(THREE.Math.clamp(n[l-1].dot(n[l]),-1,1)),a[l].applyMatrix4(h.makeRotationAxis(s,r))),o[l].crossVectors(n[l],a[l]);if(i)for(r=Math.acos(THREE.Math.clamp(a[0].dot(a[t-1]),-1,1)),r/=t-1,0<n[0].dot(s.crossVectors(a[0],a[t-1]))&&(r=-r),l=1;t>l;l++)a[l].applyMatrix4(h.makeRotationAxis(n[l],r*l)),o[l].crossVectors(n[l],a[l])},THREE.PolyhedronGeometry=function(e,t,i,r){function n(e){var t=e.normalize().clone();t.index=h.vertices.push(t)-1;var i=Math.atan2(e.z,-e.x)/2/Math.PI+.5;return e=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5,t.uv=new THREE.Vector2(i,1-e),t}function a(e,t,i){var r=new THREE.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);h.faces.push(r),m.copy(e).add(t).add(i).divideScalar(3),r=Math.atan2(m.z,-m.x),h.faceVertexUvs[0].push([s(e.uv,e,r),s(t.uv,t,r),s(i.uv,i,r)])}function o(e,t){for(var i=Math.pow(2,t),r=n(h.vertices[e.a]),o=n(h.vertices[e.b]),s=n(h.vertices[e.c]),l=[],c=0;i>=c;c++){l[c]=[];for(var u=n(r.clone().lerp(s,c/i)),p=n(o.clone().lerp(s,c/i)),f=i-c,d=0;f>=d;d++)l[c][d]=0==d&&c==i?u:n(u.clone().lerp(p,d/f))}for(c=0;i>c;c++)for(d=0;2*(i-c)-1>d;d++)r=Math.floor(d/2),0==d%2?a(l[c][r+1],l[c+1][r],l[c][r]):a(l[c][r+1],l[c+1][r+1],l[c+1][r])}function s(e,t,i){return 0>i&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},i=i||1,r=r||0;for(var h=this,l=0,c=e.length;c>l;l+=3)n(new THREE.Vector3(e[l],e[l+1],e[l+2]));e=this.vertices;for(var u=[],p=l=0,c=t.length;c>l;l+=3,p++){var f=e[t[l]],d=e[t[l+1]],E=e[t[l+2]];u[p]=new THREE.Face3(f.index,d.index,E.index,[f.clone(),d.clone(),E.clone()])}for(var m=new THREE.Vector3,l=0,c=u.length;c>l;l++)o(u[l],r);for(l=0,c=this.faceVertexUvs[0].length;c>l;l++)t=this.faceVertexUvs[0][l],r=t[0].x,e=t[1].x,u=t[2].x,p=Math.max(r,Math.max(e,u)),f=Math.min(r,Math.min(e,u)),p>.9&&.1>f&&(.2>r&&(t[0].x+=1),.2>e&&(t[1].x+=1),.2>u&&(t[2].x+=1));for(l=0,c=this.vertices.length;c>l;l++)this.vertices[l].multiplyScalar(i);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.DodecahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};var i=(1+Math.sqrt(5))/2,r=1/i;THREE.PolyhedronGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t)},THREE.DodecahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.DodecahedronGeometry.prototype.constructor=THREE.DodecahedronGeometry,THREE.IcosahedronGeometry=function(e,t){var i=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t},THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry.prototype.constructor=THREE.OctahedronGeometry,THREE.TetrahedronGeometry=function(e,t){THREE.PolyhedronGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry,THREE.ParametricGeometry=function(e,t,i){THREE.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i};var r,n,a,o,s=this.vertices,h=this.faces,l=this.faceVertexUvs[0],c=t+1;for(r=0;i>=r;r++)for(o=r/i,n=0;t>=n;n++)a=n/t,a=e(a,o),s.push(a);var u,p,f,d;for(r=0;i>r;r++)for(n=0;t>n;n++)e=r*c+n,s=r*c+n+1,o=(r+1)*c+n+1,a=(r+1)*c+n,u=new THREE.Vector2(n/t,r/i),p=new THREE.Vector2((n+1)/t,r/i),f=new THREE.Vector2((n+1)/t,(r+1)/i),d=new THREE.Vector2(n/t,(r+1)/i),h.push(new THREE.Face3(e,s,a)),l.push([u,p,d]),h.push(new THREE.Face3(s,o,a)),l.push([p.clone(),f,d.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry.prototype.constructor=THREE.ParametricGeometry,THREE.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),i=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]);e=new THREE.BufferGeometry,e.addAttribute("position",new THREE.BufferAttribute(t,3)),e.addAttribute("color",new THREE.BufferAttribute(i,3)),t=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors}),THREE.Line.call(this,e,t,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.AxisHelper.prototype.constructor=THREE.AxisHelper,THREE.ArrowHelper=function(){var e=new THREE.Geometry;e.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0));var t=new THREE.CylinderGeometry(0,.5,1,5,1);return t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),function(i,r,n,a,o,s){THREE.Object3D.call(this),void 0===a&&(a=16776960),void 0===n&&(n=1),void 0===o&&(o=.2*n),void 0===s&&(s=.2*o),this.position.copy(r),this.line=new THREE.Line(e,new THREE.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new THREE.Mesh(t,new THREE.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(i),this.setLength(n,o,s)}}(),THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.constructor=THREE.ArrowHelper,THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,e-t,1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},THREE.BoxHelper=function(e){var t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(72),3)),THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.constructor=THREE.BoxHelper,THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var i=t.boundingBox.min,t=t.boundingBox.max,r=this.geometry.attributes.position.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=i.x,r[4]=t.y,r[5]=t.z,r[6]=i.x,r[7]=t.y,r[8]=t.z,r[9]=i.x,r[10]=i.y,r[11]=t.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=i.y,r[20]=t.z,r[21]=t.x,r[22]=t.y,r[23]=t.z,r[24]=t.x,r[25]=t.y,r[26]=i.z,r[27]=i.x,r[28]=t.y,r[29]=i.z,r[30]=i.x,r[31]=t.y,r[32]=i.z,r[33]=i.x,r[34]=i.y,r[35]=i.z,r[36]=i.x,r[37]=i.y,r[38]=i.z,r[39]=t.x,r[40]=i.y,r[41]=i.z,r[42]=t.x,r[43]=i.y,r[44]=i.z,r[45]=t.x,r[46]=t.y,r[47]=i.z,r[48]=t.x,r[49]=t.y,r[50]=t.z,r[51]=t.x,r[52]=t.y,r[53]=i.z,r[54]=i.x,r[55]=t.y,r[56]=t.z,r[57]=i.x,r[58]=t.y,r[59]=i.z,r[60]=i.x,r[61]=i.y,r[62]=t.z,r[63]=i.x,r[64]=i.y,r[65]=i.z,r[66]=t.x,r[67]=i.y,r[68]=t.z,r[69]=t.x,r[70]=i.y,r[71]=i.z,this.geometry.attributes.position.needsUpdate=!0,this.geometry.computeBoundingSphere(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.BoundingBoxHelper=function(e,t){var i=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.constructor=THREE.BoundingBoxHelper,THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,r){i(e,r),i(t,r)}function i(e,t){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(t)),void 0===a[e]&&(a[e]=[]),a[e].push(r.vertices.length-1)}var r=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),a={};t("n1","n2",16755200),t("n2","n4",16755200),t("n4","n3",16755200),t("n3","n1",16755200),t("f1","f2",16755200),t("f2","f4",16755200),t("f4","f3",16755200),t("f3","f1",16755200),t("n1","f1",16755200),t("n2","f2",16755200),t("n3","f3",16755200),t("n4","f4",16755200),t("p","n1",16711680),t("p","n2",16711680),t("p","n3",16711680),t("p","n4",16711680),t("u1","u2",43775),t("u2","u3",43775),t("u3","u1",43775),t("c","t",16777215),t("p","c",3355443),t("cn1","cn2",3355443),t("cn3","cn4",3355443),t("cf1","cf2",3355443),t("cf3","cf4",3355443),THREE.Line.call(this,r,n,THREE.LinePieces),this.camera=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.constructor=THREE.CameraHelper,THREE.CameraHelper.prototype.update=function(){var e,t,i=new THREE.Vector3,r=new THREE.Camera,n=function(n,a,o,s){if(i.set(a,o,s).unproject(r),n=t[n],void 0!==n)for(a=0,o=n.length;o>a;a++)e.vertices[n[a]].copy(i)};return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-1,-1,-1),n("n2",1,-1,-1),n("n3",-1,1,-1),n("n4",1,1,-1),n("f1",-1,-1,1),n("f2",1,-1,1),n("f3",-1,1,1),n("f4",1,1,1),n("u1",.7,1.1,-1),n("u2",-.7,1.1,-1),n("u3",0,2,-1),n("cf1",-1,0,1),n("cf2",1,0,1),n("cf3",0,-1,1),n("cf4",0,1,1),n("cn1",-1,0,-1),n("cn2",1,0,-1),n("cn3",0,-1,-1),n("cn4",0,1,-1),e.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(-t,t,0),new THREE.Vector3(t,t,0),new THREE.Vector3(t,-t,0),new THREE.Vector3(-t,-t,0),new THREE.Vector3(-t,t,0));var r=new THREE.LineBasicMaterial({fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Line(i,r),this.add(this.lightPlane),i=new THREE.Geometry,i.vertices.push(new THREE.Vector3,new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.constructor=THREE.DirectionalLightHelper,THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t,i){t=void 0!==t?t:16777215,i=Math.cos(THREE.Math.degToRad(void 0!==i?i:1));var r,n=[0,0],a={},o=function(e,t){return e-t},s=["a","b","c"],h=new THREE.BufferGeometry;e.geometry instanceof THREE.BufferGeometry?(r=new THREE.Geometry,r.fromBufferGeometry(e.geometry)):r=e.geometry.clone(),r.mergeVertices(),r.computeFaceNormals();var l=r.vertices;r=r.faces;for(var c=0,u=0,p=r.length;p>u;u++)for(var f=r[u],d=0;3>d;d++){n[0]=f[s[d]],n[1]=f[s[(d+1)%3]],n.sort(o);var E=n.toString();void 0===a[E]?(a[E]={vert1:n[0],vert2:n[1],face1:u,face2:void 0},c++):a[E].face2=u}n=new Float32Array(6*c),o=0;for(E in a)s=a[E],(void 0===s.face2||r[s.face1].normal.dot(r[s.face2].normal)<=i)&&(c=l[s.vert1],n[o++]=c.x,n[o++]=c.y,n[o++]=c.z,c=l[s.vert2],n[o++]=c.x,n[o++]=c.y,n[o++]=c.z);h.addAttribute("position",new THREE.BufferAttribute(n,3)),THREE.Line.call(this,h,new THREE.LineBasicMaterial({color:t}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.EdgesHelper.prototype.constructor=THREE.EdgesHelper,THREE.FaceNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16776960,r=void 0!==r?r:1,t=new THREE.Geometry,i=0;for(var n=this.object.geometry.faces.length;n>i;i++)t.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,t,new THREE.LineBasicMaterial({color:e,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.constructor=THREE.FaceNormalsHelper,THREE.FaceNormalsHelper.prototype.update=function(){var e=this.geometry.vertices,t=this.object,i=t.geometry.vertices,r=t.geometry.faces,n=t.matrixWorld;t.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(n);for(var a=t=0,o=r.length;o>t;t++,a+=2){var s=r[t];e[a].copy(i[s.a]).add(i[s.b]).add(i[s.c]).divideScalar(3).applyMatrix4(n),e[a+1].copy(s.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])}return this.geometry.verticesNeedUpdate=!0,this},THREE.GridHelper=function(e,t){var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-e;e>=n;n+=t){i.vertices.push(new THREE.Vector3(-e,0,n),new THREE.Vector3(e,0,n),new THREE.Vector3(n,0,-e),new THREE.Vector3(n,0,e));var a=0===n?this.color1:this.color2;i.colors.push(a,a,a,a)}THREE.Line.call(this,i,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.constructor=THREE.GridHelper,THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var i=new THREE.SphereGeometry(t,4,2);i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var r=0;8>r;r++)i.faces[r].color=this.colors[4>r?0:1];r=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0}),this.lightSphere=new THREE.Mesh(i,r),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.constructor=THREE.HemisphereLightHelper,THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.constructor=THREE.PointLightHelper,THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new THREE.Geometry,i=0;i<this.bones.length;i++)this.bones[i].parent instanceof THREE.Bone&&(t.vertices.push(new THREE.Vector3),t.vertices.push(new THREE.Vector3),t.colors.push(new THREE.Color(0,0,1)),t.colors.push(new THREE.Color(0,1,0)));i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0}),THREE.Line.call(this,t,i,THREE.LinePieces),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},THREE.SkeletonHelper.prototype=Object.create(THREE.Line.prototype),THREE.SkeletonHelper.prototype.constructor=THREE.SkeletonHelper,THREE.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof THREE.Bone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,this.getBoneList(e.children[i]));return t},THREE.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new THREE.Matrix4).getInverse(this.root.matrixWorld),i=new THREE.Matrix4,r=0,n=0;n<this.bones.length;n++){var a=this.bones[n];
a.parent instanceof THREE.Bone&&(i.multiplyMatrices(t,a.matrixWorld),e.vertices[r].setFromMatrixPosition(i),i.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(i),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,e=new THREE.CylinderGeometry(0,1,1,8,1,!0),e.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var t=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(e,t),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.constructor=THREE.SpotLightHelper,THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==i?i:16711680,r=void 0!==r?r:1,i=new THREE.Geometry,e=e.geometry.faces;for(var n=0,a=e.length;a>n;n++)for(var o=0,s=e[n].vertexNormals.length;s>o;o++)i.vertices.push(new THREE.Vector3,new THREE.Vector3);THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:t,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.constructor=THREE.VertexNormalsHelper,THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,a=this.object.matrixWorld,o=0,s=0,h=n.length;h>s;s++)for(var l=n[s],c=0,u=l.vertexNormals.length;u>c;c++){var p=l.vertexNormals[c];i[o].copy(r[l[t[c]]]).applyMatrix4(a),e.copy(p).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(i[o]),o+=1,i[o].copy(e),o+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1,t=void 0!==i?i:255,r=void 0!==r?r:1,i=new THREE.Geometry,e=e.geometry.faces;for(var n=0,a=e.length;a>n;n++)for(var o=0,s=e[n].vertexTangents.length;s>o;o++)i.vertices.push(new THREE.Vector3),i.vertices.push(new THREE.Vector3);THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:t,linewidth:r}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.constructor=THREE.VertexTangentsHelper,THREE.VertexTangentsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(t){t=["a","b","c","d"],this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,a=this.object.matrixWorld,o=0,s=0,h=n.length;h>s;s++)for(var l=n[s],c=0,u=l.vertexTangents.length;u>c;c++){var p=l.vertexTangents[c];i[o].copy(r[l[t[c]]]).applyMatrix4(a),e.copy(p).transformDirection(a).multiplyScalar(this.size),e.add(i[o]),o+=1,i[o].copy(e),o+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var i=void 0!==t?t:16777215,r=[0,0],n={},a=function(e,t){return e-t},o=["a","b","c"],s=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var h=e.geometry.vertices,l=e.geometry.faces,c=0,u=new Uint32Array(6*l.length),p=0,f=l.length;f>p;p++)for(var d=l[p],E=0;3>E;E++){r[0]=d[o[E]],r[1]=d[o[(E+1)%3]],r.sort(a);var m=r.toString();void 0===n[m]&&(u[2*c]=r[0],u[2*c+1]=r[1],n[m]=!0,c++)}for(r=new Float32Array(6*c),p=0,f=c;f>p;p++)for(E=0;2>E;E++)c=h[u[2*p+E]],o=6*p+3*E,r[o+0]=c.x,r[o+1]=c.y,r[o+2]=c.z;s.addAttribute("position",new THREE.BufferAttribute(r,3))}else if(e.geometry instanceof THREE.BufferGeometry){if(void 0!==e.geometry.attributes.index){h=e.geometry.attributes.position.array,f=e.geometry.attributes.index.array,l=e.geometry.drawcalls,c=0,0===l.length&&(l=[{count:f.length,index:0,start:0}]);for(var u=new Uint32Array(2*f.length),d=0,g=l.length;g>d;++d)for(var E=l[d].start,m=l[d].count,o=l[d].index,p=E,T=E+m;T>p;p+=3)for(E=0;3>E;E++)r[0]=o+f[p+E],r[1]=o+f[p+(E+1)%3],r.sort(a),m=r.toString(),void 0===n[m]&&(u[2*c]=r[0],u[2*c+1]=r[1],n[m]=!0,c++);for(r=new Float32Array(6*c),p=0,f=c;f>p;p++)for(E=0;2>E;E++)o=6*p+3*E,c=3*u[2*p+E],r[o+0]=h[c],r[o+1]=h[c+1],r[o+2]=h[c+2]}else for(h=e.geometry.attributes.position.array,c=h.length/3,u=c/3,r=new Float32Array(6*c),p=0,f=u;f>p;p++)for(E=0;3>E;E++)o=18*p+6*E,u=9*p+3*E,r[o+0]=h[u],r[o+1]=h[u+1],r[o+2]=h[u+2],c=9*p+(E+1)%3*3,r[o+3]=h[c],r[o+4]=h[c+1],r[o+5]=h[c+2];s.addAttribute("position",new THREE.BufferAttribute(r,3))}THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.WireframeHelper.prototype.constructor=THREE.WireframeHelper,THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.ImmediateRenderObject.prototype.constructor=THREE.ImmediateRenderObject,THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length;this.createAnimation("__default",0,i-1,i/1),this.setAnimationWeight("__default",1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.constructor=THREE.MorphBlendMesh,THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,i,r){t={startFrame:t,endFrame:i,length:i-t+1,fps:r,duration:(i-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1},this.animationsMap[e]=t,this.animationsList.push(t)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)_?(\d+)/,r={},n=this.geometry,a=0,o=n.morphTargets.length;o>a;a++){var s=n.morphTargets[a].name.match(i);if(s&&1<s.length){var h=s[1];r[h]||(r[h]={start:1/0,end:-1/0}),s=r[h],a<s.start&&(s.start=a),a>s.end&&(s.end=a),t||(t=h)}}for(h in r)s=r[h],this.createAnimation(h,s.start,s.end,e);this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){(e=this.animationsMap[e])&&(e.direction=1,e.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){(e=this.animationsMap[e])&&(e.direction=-1,e.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0;return(e=this.animationsMap[e])&&(t=e.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1;return(e=this.animationsMap[e])&&(t=e.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):THREE.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){(e=this.animationsMap[e])&&(e.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;i>t;t++){var r=this.animationsList[t];if(r.active){var n=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||0>r.time)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),0>r.time&&(r.time=0,r.directionBackwards=!1)):(r.time%=r.duration,0>r.time&&(r.time+=r.duration));var a=r.startFrame+THREE.Math.clamp(Math.floor(r.time/n),0,r.length-1),o=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*o,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a),n=r.time%n/n,r.directionBackwards&&(n=1-n),this.morphTargetInfluences[r.currentFrame]=n*o,this.morphTargetInfluences[r.lastFrame]=(1-n)*o}}};var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var r=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},n=function(e,t,r){i.call(this,e,t,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},a=1e-10,o=i._internals,s=o.isSelector,h=o.isArray,l=n.prototype=i.to({},.1,{}),c=[];n.version="1.16.1",l.constructor=n,l.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(e,t){var r,n=this.ratio,a=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in e)this.vars[r]=e[r];if(this._initted||a)if(t)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0||a){this._initted=!1,this._init();for(var s,h=1/(1-n),l=this._firstPT;l;)s=l.s+l.c,l.c*=h,l.s=s-l.c,l=l._next}return this},l.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,n,s,h,l,u,p,f,d=this._dirty?this.totalDuration():this._totalDuration,E=this._time,m=this._totalTime,g=this._cycle,T=this._duration,v=this._rawPrevTime;if(e>=d?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=T,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===T&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>v||v===a)&&v!==e&&(i=!0,v>a&&(n="onReverseComplete")),this._rawPrevTime=f=!t||e||v===e?e:a)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===T&&v>0)&&(n="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===T&&(this._initted||!this.vars.lazy||i)&&(v>=0&&(i=!0),this._rawPrevTime=f=!t||e||v===e?e:a)),this._initted||(i=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(h=T+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=T-this._time),this._time>T?this._time=T:0>this._time&&(this._time=0)),this._easeType?(l=this._time/T,u=this._easeType,p=this._easePower,(1===u||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===p?l*=l:2===p?l*=l*l:3===p?l*=l*l*l:4===p&&(l*=l*l*l*l),this.ratio=1===u?1-l:2===u?l:.5>this._time/T?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/T)),E===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=E,this._totalTime=m,this._rawPrevTime=v,this._cycle=g,o.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/T):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==E&&e>=0&&(this._active=!0),0===m&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===T)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,i),t||(this._totalTime!==m||r)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)),this._cycle!==g&&(t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||c)),n&&(!this._gc||i)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||c),0===T&&this._rawPrevTime===a&&f!==a&&(this._rawPrevTime=0))},n.to=function(e,t,i){return new n(e,t,i)},n.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(e,t,i)},n.fromTo=function(e,t,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new n(e,t,r)},n.staggerTo=n.allTo=function(e,t,a,o,l,u,p){o=o||0;var f,d,E,m,g=a.delay||0,T=[],v=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),l.apply(p||this,u||c)};for(h(e)||("string"==typeof e&&(e=i.selector(e)||e),s(e)&&(e=r(e))),e=e||[],0>o&&(e=r(e),e.reverse(),o*=-1),f=e.length-1,E=0;f>=E;E++){d={};for(m in a)d[m]=a[m];d.delay=g,E===f&&l&&(d.onComplete=v),T[E]=new n(e[E],t,d),g+=o}return T},n.staggerFrom=n.allFrom=function(e,t,i,r,a,o,s){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(e,t,i,r,a,o,s)},n.staggerFromTo=n.allFromTo=function(e,t,i,r,a,o,s,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,n.staggerTo(e,t,r,a,o,s,h)},n.delayedCall=function(e,t,i,r,a){return new n(t,0,{delay:e,onComplete:t,onCompleteParams:i,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,useFrames:a,overwrite:0})},n.set=function(e,t){return new n(e,0,t)},n.isTweening=function(e){return i.getTweensOf(e,!0).length>0};var u=function(e,t){for(var r=[],n=0,a=e._first;a;)a instanceof i?r[n++]=a:(t&&(r[n++]=a),r=r.concat(u(a,t)),n=r.length),a=a._next;return r},p=n.getAllTweens=function(t){return u(e._rootTimeline,t).concat(u(e._rootFramesTimeline,t))};n.killAll=function(e,i,r,n){null==i&&(i=!0),null==r&&(r=!0);var a,o,s,h=p(0!=n),l=h.length,c=i&&r&&n;for(s=0;l>s;s++)o=h[s],(c||o instanceof t||(a=o.target===o.vars.onComplete)&&r||i&&!a)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},n.killChildTweensOf=function(e,t){if(null!=e){var a,l,c,u,p,f=o.tweenLookup;if("string"==typeof e&&(e=i.selector(e)||e),s(e)&&(e=r(e)),h(e))for(u=e.length;--u>-1;)n.killChildTweensOf(e[u],t);else{a=[];for(c in f)for(l=f[c].target.parentNode;l;)l===e&&(a=a.concat(f[c].tweens)),l=l.parentNode;for(p=a.length,u=0;p>u;u++)t&&a[u].totalTime(a[u].totalDuration()),a[u]._enabled(!1,!1)}}};var f=function(e,i,r,n){i=i!==!1,r=r!==!1,n=n!==!1;for(var a,o,s=p(n),h=i&&r&&n,l=s.length;--l>-1;)o=s[l],(h||o instanceof t||(a=o.target===o.vars.onComplete)&&r||i&&!a)&&o.paused(e)};return n.pauseAll=function(e,t,i){f(!0,e,t,i)},n.resumeAll=function(e,t,i){f(!1,e,t,i)},n.globalTimeScale=function(t){var r=e._rootTimeline,n=i.ticker.time;return arguments.length?(t=t||a,r._startTime=n-(n-r._startTime)*r._timeScale/t,r=e._rootFramesTimeline,n=i.ticker.frame,r._startTime=n-(n-r._startTime)*r._timeScale/t,r._timeScale=e._rootTimeline._timeScale=t,t):r._timeScale},l.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},n},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],h(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));h(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,a=i._internals,o=r._internals={},s=a.isSelector,h=a.isArray,l=a.lazyTweens,c=a.lazyRender,u=[],p=_gsScope._gsDefine.globals,f=function(e){var t,i={};for(t in e)i[t]=e[t];return i},d=o.pauseCallback=function(e,t,i,r){var a,o=e._timeline,s=o._totalTime,h=e._startTime,l=0>e._rawPrevTime||0===e._rawPrevTime&&o._reversed,c=l?0:n,p=l?n:0;if(t||!this._forcingPlayhead){for(o.pause(h),a=e._prev;a&&a._startTime===h;)a._rawPrevTime=p,a=a._prev;for(a=e._next;a&&a._startTime===h;)a._rawPrevTime=c,a=a._next;t&&t.apply(r||o,i||u),(this._forcingPlayhead||!o._paused)&&o.seek(s)}},E=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},m=r.prototype=new t;return r.version="1.16.1",m.constructor=r,m.kill()._gc=m._forcingPlayhead=!1,m.to=function(e,t,r,n){var a=r.repeat&&p.TweenMax||i;return t?this.add(new a(e,t,r),n):this.set(e,r,n)},m.from=function(e,t,r,n){return this.add((r.repeat&&p.TweenMax||i).from(e,t,r),n)},m.fromTo=function(e,t,r,n,a){var o=n.repeat&&p.TweenMax||i;return t?this.add(o.fromTo(e,t,r,n),a):this.set(e,n,a)},m.staggerTo=function(e,t,n,a,o,h,l,c){var u,p=new r({onComplete:h,onCompleteParams:l,onCompleteScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof e&&(e=i.selector(e)||e),e=e||[],s(e)&&(e=E(e)),a=a||0,0>a&&(e=E(e),e.reverse(),a*=-1),u=0;e.length>u;u++)n.startAt&&(n.startAt=f(n.startAt)),p.to(e[u],t,f(n),u*a);return this.add(p,o)},m.staggerFrom=function(e,t,i,r,n,a,o,s){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,r,n,a,o,s)},m.staggerFromTo=function(e,t,i,r,n,a,o,s,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,r,n,a,o,s,h)},m.call=function(e,t,r,n){return this.add(i.delayedCall(0,e,t,r),n)},m.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),null==t.immediateRender&&(t.immediateRender=r===this._time&&!this._paused),this.add(new i(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var n,a,o=new r(e),s=o._timeline;for(null==t&&(t=!0),s._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=s._time,n=s._first;n;)a=n._next,t&&n instanceof i&&n.target===n.vars.onComplete||o.add(n,n._startTime-n._delay),n=a;return s.add(o,0),o},m.add=function(n,a,o,s){var l,c,u,p,f,d;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,n)),!(n instanceof e)){if(n instanceof Array||n&&n.push&&h(n)){for(o=o||"normal",s=s||0,l=a,c=n.length,u=0;c>u;u++)h(p=n[u])&&(p=new r({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?l=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),l+=s;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,a);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(t.prototype.add.call(this,n,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=this,d=f.rawTime()>n._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},m.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&h(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,i){t.prototype._remove.call(this,e,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,i,r){return this.add(e,t||0,i,r)},m.appendMultiple=function(e,t,i,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,r)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,r,n){var a=i.delayedCall(0,d,["{self}",t,r,n],this);return a.data="isPause",this.add(a,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,i,r,n){var a;if(n instanceof e&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&h(n)))for(a=n.length;--a>-1;)n[a]instanceof e&&n[a].timeline===this&&this.remove(n[a]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof t&&null==this._labels[i]?t-this.duration():0,r);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(a=t.indexOf("="),-1===a)return null==this._labels[t]?r?this._labels[t]=this.duration()+i:i:this._labels[t]+i;i=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=a>1?this._parseTimeOrLabel(t.substr(0,a-1),0,r):this.duration()}return Number(t)+i},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var r,a,o,s,h,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,d=this._startTime,E=this._timeScale,m=this._paused;if(e>=p)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(a=!0,s="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===e||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==e&&this._first&&(h=!0,this._rawPrevTime>n&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,e=p+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(s="onReverseComplete",a=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=a=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,0===e&&a)for(r=this._first;r&&0===r._startTime;)r._duration||(a=!1),r=r._next;e=0,this._initted||(h=!0)}else this._totalTime=this._time=this._rawPrevTime=e;if(this._time!==f&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&e>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._time&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u)),this._time>=f)for(r=this._first;r&&(o=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=o;else for(r=this._last;r&&(o=r._prev,!this._paused||m);)(r._active||f>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=o;this._onUpdate&&(t||(l.length&&c(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u))),s&&(this._gc||(d===this._startTime||E!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(a&&(l.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||u)))}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,r,n){n=n||-9999999999;for(var a=[],o=this._first,s=0;o;)n>o._startTime||(o instanceof i?t!==!1&&(a[s++]=o):(r!==!1&&(a[s++]=o),e!==!1&&(a=a.concat(o.getChildren(!0,t,r)),s=a.length))),o=o._next;return a},m.getTweensOf=function(e,t){var r,n,a=this._gc,o=[],s=0;for(a&&this._enabled(!0,!0),r=i.getTweensOf(e),n=r.length;--n>-1;)(r[n].timeline===this||t&&this._contains(r[n]))&&(o[s++]=r[n]);return a&&this._enabled(!1,!0),o},m.recent=function(){return this._recent},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,i){i=i||0;for(var r,n=this._first,a=this._labels;n;)n._startTime>=i&&(n._startTime+=e),n=n._next;if(t)for(r in a)a[r]>=i&&(a[r]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(e,t)&&(n=!0);return n},m.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},m._enabled=function(e,i){if(e===this._gc)for(var r=this._first;r;)r._enabled(e,!0),r=r._next;return t.prototype._enabled.call(this,e,i)},m.totalTime=function(){this._forcingPlayhead=!0;var t=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,t},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,r=0,n=this._last,a=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>a&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):a=n._startTime,0>n._startTime&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),a=0),i=n._startTime+n._totalDuration/n._timeScale,i>r&&(r=i),n=t;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==e&&this.timeScale(this._totalDuration/e),this},m.paused=function(t){if(!t)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return e.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},n=1e-10,a=[],o=t._internals,s=o.lazyTweens,h=o.lazyRender,l=new i(null,null,1,0),c=r.prototype=new e;return c.constructor=r,c.kill()._gc=!1,r.version="1.16.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},c.addCallback=function(e,i,r,n){return this.add(t.delayedCall(0,e,r,n),i)},c.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),r=i.length,n=this._parseTimeOrLabel(t);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},c.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},c.tweenTo=function(e,i){i=i||{};var r,n,o,s={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(n in i)s[n]=i[n];return s.time=this._parseTimeOrLabel(e),r=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,o=new t(this,r,s),s.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&r===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||o,i.onStartParams||a)},o},c.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(t,i);return r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},c.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var r,o,l,c,u,p,f=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,E=this._time,m=this._totalTime,g=this._startTime,T=this._timeScale,v=this._rawPrevTime,y=this._paused,R=this._cycle;if(e>=f)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(o=!0,c="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(0===e||0>v||v===n)&&v!==e&&this._first&&(u=!0,v>n&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=d,e=d+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==E||0===d&&v!==n&&(v>0||0>e&&v>=0)&&!this._locked)&&(c="onReverseComplete",o=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=o=!0,c="onReverseComplete"):v>=0&&this._first&&(u=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=d||!t||e||this._rawPrevTime===e?e:n,0===e&&o)for(r=this._first;r&&0===r._startTime;)r._duration||(o=!1),r=r._next;e=0,this._initted||(u=!0)
}else 0===d&&0>v&&(u=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(p=d+this._repeatDelay,this._cycle=this._totalTime/p>>0,0!==this._cycle&&this._cycle===this._totalTime/p&&this._cycle--,this._time=this._totalTime-this._cycle*p,this._yoyo&&0!==(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,e=d+1e-4):0>this._time?this._time=e=0:e=this._time));if(this._cycle!==R&&!this._locked){var _=this._yoyo&&0!==(1&R),x=_===(this._yoyo&&0!==(1&this._cycle)),H=this._totalTime,b=this._cycle,w=this._rawPrevTime,M=this._time;if(this._totalTime=R*d,R>this._cycle?_=!_:this._totalTime+=d,this._time=E,this._rawPrevTime=0===d?v-1e-4:v,this._cycle=R,this._locked=!0,E=_?0:d,this.render(E,t,0===d),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||a),x&&(E=_?d+1e-4:-1e-4,this.render(E,!0,!1)),this._locked=!1,this._paused&&!y)return;this._time=M,this._totalTime=H,this._cycle=b,this._rawPrevTime=w}if(!(this._time!==E&&this._first||i||u))return void(m!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||a)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&e>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||a)),this._time>=E)for(r=this._first;r&&(l=r._next,!this._paused||y);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=l;else for(r=this._last;r&&(l=r._prev,!this._paused||y);)(r._active||E>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=l;this._onUpdate&&(t||(s.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||a))),c&&(this._locked||this._gc||(g===this._startTime||T!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(o&&(s.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[c]&&this.vars[c].apply(this.vars[c+"Scope"]||this,this.vars[c+"Params"]||a)))},c.getActive=function(e,t,i){null==e&&(e=!0),null==t&&(t=!0),null==i&&(i=!1);var r,n,a=[],o=this.getChildren(e,t,i),s=0,h=o.length;for(r=0;h>r;r++)n=o[r],n.isActive()&&(a[s++]=n);return a},c.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),r=i.length;for(t=0;r>t;t++)if(i[t].time>e)return i[t].name;return null},c.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;--i>-1;)if(e>t[i].time)return t[i].name;return null},c.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},c.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},c.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var e=180/Math.PI,t=[],i=[],r=[],n={},a=_gsScope._gsDefine.globals,o=function(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.da=r-e,this.ca=i-e,this.ba=t-e},s=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(e,t,i,r){var n={a:e},a={},o={},s={c:r},h=(e+t)/2,l=(t+i)/2,c=(i+r)/2,u=(h+l)/2,p=(l+c)/2,f=(p-u)/8;return n.b=h+(e-h)/4,a.b=u+f,n.c=a.a=(n.b+a.b)/2,a.c=o.a=(u+p)/2,o.b=p-f,s.b=c+(r-c)/4,o.c=s.a=(o.b+s.b)/2,[n,a,o,s]},l=function(e,n,a,o,s){var l,c,u,p,f,d,E,m,g,T,v,y,R,_=e.length-1,x=0,H=e[0].a;for(l=0;_>l;l++)f=e[x],c=f.a,u=f.d,p=e[x+1].d,s?(v=t[l],y=i[l],R=.25*(y+v)*n/(o?.5:r[l]||.5),d=u-(u-c)*(o?.5*n:0!==v?R/v:0),E=u+(p-u)*(o?.5*n:0!==y?R/y:0),m=u-(d+((E-d)*(3*v/(v+y)+.5)/4||0))):(d=u-.5*(u-c)*n,E=u+.5*(p-u)*n,m=u-(d+E)/2),d+=m,E+=m,f.c=g=d,f.b=0!==l?H:H=f.a+.6*(f.c-f.a),f.da=u-c,f.ca=g-c,f.ba=H-c,a?(T=h(c,H,g,u),e.splice(x,1,T[0],T[1],T[2],T[3]),x+=4):x++,H=E;f=e[x],f.b=H,f.c=H+.4*(f.d-H),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=H-f.a,a&&(T=h(f.a,H,f.c,f.d),e.splice(x,1,T[0],T[1],T[2],T[3]))},c=function(e,r,n,a){var s,h,l,c,u,p,f=[];if(a)for(e=[a].concat(e),h=e.length;--h>-1;)"string"==typeof(p=e[h][r])&&"="===p.charAt(1)&&(e[h][r]=a[r]+Number(p.charAt(0)+p.substr(2)));if(s=e.length-2,0>s)return f[0]=new o(e[0][r],0,0,e[-1>s?0:1][r]),f;for(h=0;s>h;h++)l=e[h][r],c=e[h+1][r],f[h]=new o(l,0,0,c),n&&(u=e[h+2][r],t[h]=(t[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(u-c)*(u-c));return f[h]=new o(e[h][r],0,0,e[h+1][r]),f},u=function(e,a,o,h,u,p){var f,d,E,m,g,T,v,y,R={},_=[],x=p||e[0];u="string"==typeof u?","+u+",":s,null==a&&(a=1);for(d in e[0])_.push(d);if(e.length>1){for(y=e[e.length-1],v=!0,f=_.length;--f>-1;)if(d=_[f],Math.abs(x[d]-y[d])>.05){v=!1;break}v&&(e=e.concat(),p&&e.unshift(p),e.push(e[1]),p=e[e.length-3])}for(t.length=i.length=r.length=0,f=_.length;--f>-1;)d=_[f],n[d]=-1!==u.indexOf(","+d+","),R[d]=c(e,d,n[d],p);for(f=t.length;--f>-1;)t[f]=Math.sqrt(t[f]),i[f]=Math.sqrt(i[f]);if(!h){for(f=_.length;--f>-1;)if(n[d])for(E=R[_[f]],T=E.length-1,m=0;T>m;m++)g=E[m+1].da/i[m]+E[m].da/t[m],r[m]=(r[m]||0)+g*g;for(f=r.length;--f>-1;)r[f]=Math.sqrt(r[f])}for(f=_.length,m=o?4:1;--f>-1;)d=_[f],E=R[d],l(E,a,o,h,n[d]),v&&(E.splice(0,m),E.splice(E.length-m,m));return R},p=function(e,t,i){t=t||"soft";var r,n,a,s,h,l,c,u,p,f,d,E={},m="cubic"===t?3:2,g="soft"===t,T=[];if(g&&i&&(e=[i].concat(e)),null==e||m+1>e.length)throw"invalid Bezier data";for(p in e[0])T.push(p);for(l=T.length;--l>-1;){for(p=T[l],E[p]=h=[],f=0,u=e.length,c=0;u>c;c++)r=null==i?e[c][p]:"string"==typeof(d=e[c][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),g&&c>1&&u-1>c&&(h[f++]=(r+h[f-2])/2),h[f++]=r;for(u=f-m+1,f=0,c=0;u>c;c+=m)r=h[c],n=h[c+1],a=h[c+2],s=2===m?0:h[c+3],h[f++]=d=3===m?new o(r,n,a,s):new o(r,(2*n+r)/3,(2*n+a)/3,a);h.length=f}return E},f=function(e,t,i){for(var r,n,a,o,s,h,l,c,u,p,f,d=1/i,E=e.length;--E>-1;)for(p=e[E],a=p.a,o=p.d-a,s=p.c-a,h=p.b-a,r=n=0,c=1;i>=c;c++)l=d*c,u=1-l,r=n-(n=(l*l*o+3*u*(l*s+u*h))*l),f=E*i+c-1,t[f]=(t[f]||0)+r*r},d=function(e,t){t=t>>0||6;var i,r,n,a,o=[],s=[],h=0,l=0,c=t-1,u=[],p=[];for(i in e)f(e[i],o,t);for(n=o.length,r=0;n>r;r++)h+=Math.sqrt(o[r]),a=r%t,p[a]=h,a===c&&(l+=h,a=r/t>>0,u[a]=p,s[a]=l,h=0,p=[]);return{length:l,lengths:s,segments:u}},E=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,n,a,o,s,h=t.values||[],l={},c=h[0],f=t.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(r in c)this._props.push(r);for(a=this._props.length;--a>-1;)r=this._props[a],this._overwriteProps.push(r),n=this._func[r]="function"==typeof e[r],l[r]=n?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),s||l[r]!==h[0][r]&&(s=l);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?u(h,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):p(h,t.type,l),this._segCount=this._beziers[r].length,this._timeRes){var E=d(this._beziers,this._timeRes);this._length=E.length,this._lengths=E.lengths,this._segments=E.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),a=f.length;--a>-1;){for(o=0;3>o;o++)r=f[a][o],this._func[r]="function"==typeof e[r]?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;r=f[a][2],this._initialRotations[a]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var i,r,n,a,o,s,h,l,c,u,p=this._segCount,f=this._func,d=this._target,E=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,u=this._curSeg,t*=this._length,n=this._li,t>this._l2&&p-1>n){for(l=p-1;l>n&&t>=(this._l2=c[++n]););this._l1=c[n-1],this._li=n,this._curSeg=u=this._segments[n],this._s2=u[this._s1=this._si=0]}else if(this._l1>t&&n>0){for(;n>0&&(this._l1=c[--n])>=t;);0===n&&this._l1>t?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=u=this._segments[n],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=n,t-=this._l1,n=this._si,t>this._s2&&u.length-1>n){for(l=u.length-1;l>n&&t>=(this._s2=u[++n]););this._s1=u[n-1],this._si=n}else if(this._s1>t&&n>0){for(;n>0&&(this._s1=u[--n])>=t;);0===n&&this._s1>t?this._s1=0:n++,this._s2=u[n],this._si=n}s=(n+(t-this._s1)/(this._s2-this._s1))*this._prec}else i=0>t?0:t>=1?p-1:p*t>>0,s=(t-i*(1/p))*p;for(r=1-s,n=this._props.length;--n>-1;)a=this._props[n],o=this._beziers[a][i],h=(s*s*o.da+3*r*(s*o.ca+r*o.ba))*s+o.a,this._round[a]&&(h=Math.round(h)),f[a]?d[a](h):d[a]=h;if(this._autoRotate){var m,g,T,v,y,R,_,x=this._autoRotate;for(n=x.length;--n>-1;)a=x[n][2],R=x[n][3]||0,_=x[n][4]===!0?1:e,o=this._beziers[x[n][0]],m=this._beziers[x[n][1]],o&&m&&(o=o[i],m=m[i],g=o.a+(o.b-o.a)*s,v=o.b+(o.c-o.b)*s,g+=(v-g)*s,v+=(o.c+(o.d-o.c)*s-v)*s,T=m.a+(m.b-m.a)*s,y=m.b+(m.c-m.b)*s,T+=(y-T)*s,y+=(m.c+(m.d-m.c)*s-y)*s,h=E?Math.atan2(y-T,v-g)*_+R:this._initialRotations[n],f[a]?d[a](h):d[a]=h)}}}),m=E.prototype;E.bezierThrough=u,E.cubicToQuadratic=h,E._autoCSS=!0,E.quadraticToCubic=function(e,t,i){return new o(e,(2*t+e)/3,(2*t+i)/3,i)},E._cssRegister=function(){var e=a.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,r=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,o,s,h){t instanceof Array&&(t={values:t}),h=new E;var l,c,u,p=t.values,f=p.length-1,d=[],m={};if(0>f)return s;for(l=0;f>=l;l++)u=i(e,p[l],o,s,h,f!==l),d[l]=u.end;for(c in t)m[c]=t[c];return m.values=d,s=new n(e,"bezier",0,0,u.pt,2),s.data=u,s.plugin=h,s.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",l,!1]]:null!=u.end.x?[["x","y","rotation",l,!1]]:!1),m.autoRotate&&(o._transform||o._enableTransforms(!1),u.autoRotate=o._target._gsTransform),h._onInitTween(u.proxy,m,o._tween),s}})}},m._roundProps=function(e,t){for(var i=this._overwriteProps,r=i.length;--r>-1;)(e[i[r]]||e.bezier||e.bezierThrough)&&(this._round[i[r]]=t)},m._kill=function(e){var t,i,r=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=r.length;--i>-1;)r[i]===t&&r.splice(i,1);return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,r,n,a,o=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=o.prototype.setRatio},s=_gsScope._gsDefine.globals,h={},l=o.prototype=new e("css");l.constructor=o,o.version="1.16.1",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",l="px",o.suffixMap={top:l,right:l,bottom:l,left:l,width:l,height:l,fontSize:l,padding:l,margin:l,perspective:l,lineHeight:""};var c,u,p,f,d,E,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,T=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,R=/opacity *= *([^)]*)/i,_=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,H=/^(rgb|hsl)/,b=/([A-Z])/g,w=/-([a-z])/gi,M=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,S=function(e,t){return t.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,P=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,L=/,(?=[^\)]*(?:\(|$))/gi,F=Math.PI/180,D=180/Math.PI,U={},B=document,k=function(e){return B.createElementNS?B.createElementNS("http://www.w3.org/1999/xhtml",e):B.createElement(e)},O=k("div"),V=k("img"),z=o._internals={_specialProps:h},N=navigator.userAgent,I=function(){var e=N.indexOf("Android"),t=k("a");return p=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===e||Number(N.substr(e+8,1))>3),d=p&&6>Number(N.substr(N.indexOf("Version/")+8,1)),f=-1!==N.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N))&&(E=parseFloat(RegExp.$1)),t?(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity)):!1}(),G=function(e){return R.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},W=function(e){window.console&&console.log(e)},j="",X="",q=function(e,t){t=t||O;var i,r,n=t.style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+e];);return r>=0?(X=3===r?"ms":i[r],j="-"+X.toLowerCase()+"-",X+e):null},Y=B.defaultView?B.defaultView.getComputedStyle:function(){},K=o.getStyle=function(e,t,i,r,n){var a;return I||"opacity"!==t?(!r&&e.style[t]?a=e.style[t]:(i=i||Y(e))?a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(b,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):G(e)},Q=z.convertToPixels=function(e,i,r,n,a){if("px"===n||!n)return r;if("auto"===n||!r)return 0;var s,h,l,c=A.test(i),u=e,p=O.style,f=0>r;if(f&&(r=-r),"%"===n&&-1!==i.indexOf("border"))s=r/100*(c?e.clientWidth:e.clientHeight);else{if(p.cssText="border:0 solid red;position:"+K(e,"position")+";line-height:0;","%"!==n&&u.appendChild)p[c?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(u=e.parentNode||B.body,h=u._gsCache,l=t.ticker.frame,h&&c&&h.time===l)return h.width*r/100;p[c?"width":"height"]=r+n}u.appendChild(O),s=parseFloat(O[c?"offsetWidth":"offsetHeight"]),u.removeChild(O),c&&"%"===n&&o.cacheWidths!==!1&&(h=u._gsCache=u._gsCache||{},h.time=l,h.width=100*(s/r)),0!==s||a||(s=Q(e,i,r,n,!0))}return f?-s:s},Z=z.calculateOffset=function(e,t,i){if("absolute"!==K(e,"position",i))return 0;var r="left"===t?"Left":"Top",n=K(e,"margin"+r,i);return e["offset"+r]-(Q(e,t,parseFloat(n),n.replace(y,""))||0)},J=function(e,t){var i,r,n,a={};if(t=t||Y(e,null))if(i=t.length)for(;--i>-1;)n=t[i],(-1===n.indexOf("-transform")||xt===n)&&(a[n.replace(w,S)]=t.getPropertyValue(n));else for(i in t)(-1===i.indexOf("Transform")||_t===i)&&(a[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===a[i]&&(a[i.replace(w,S)]=t[i]);return I||(a.opacity=G(e)),r=Lt(e,t,!1),a.rotation=r.rotation,a.skewX=r.skewX,a.scaleX=r.scaleX,a.scaleY=r.scaleY,a.x=r.x,a.y=r.y,bt&&(a.z=r.z,a.rotationX=r.rotationX,a.rotationY=r.rotationY,a.scaleZ=r.scaleZ),a.filters&&delete a.filters,a},$=function(e,t,i,r,n){var a,o,s,h={},l=e.style;for(o in i)"cssText"!==o&&"length"!==o&&isNaN(o)&&(t[o]!==(a=i[o])||n&&n[o])&&-1===o.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(h[o]="auto"!==a||"left"!==o&&"top"!==o?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[o]||""===t[o].replace(v,"")?a:0:Z(e,o),void 0!==l[o]&&(s=new ft(l,o,l[o],s)));if(r)for(o in r)"className"!==o&&(h[o]=r[o]);return{difs:h,firstMPT:s}},et={width:["Left","Right"],height:["Top","Bottom"]},tt=["marginLeft","marginRight","marginTop","marginBottom"],it=function(e,t,i){var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=et[t],a=n.length;for(i=i||Y(e,null);--a>-1;)r-=parseFloat(K(e,"padding"+n[a],i,!0))||0,r-=parseFloat(K(e,"border"+n[a]+"Width",i,!0))||0;return r},rt=function(e,t){(null==e||""===e||"auto"===e||"auto auto"===e)&&(e="0 0");var i=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],n=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];return null==n?n="center"===r?"50%":"0":"center"===n&&(n="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+n+(i.length>2?" "+i[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==n.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===n.charAt(1),t.ox=parseFloat(r.replace(v,"")),t.oy=parseFloat(n.replace(v,"")),t.v=e),t||e},nt=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},at=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)},ot=function(e,t,i,r){var n,a,o,s,h,l=1e-6;return null==e?s=t:"number"==typeof e?s=e:(n=360,a=e.split("_"),h="="===e.charAt(1),o=(h?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:D)-(h?0:t),a.length&&(r&&(r[i]=t+o),-1!==e.indexOf("short")&&(o%=n,o!==o%(n/2)&&(o=0>o?o+n:o-n)),-1!==e.indexOf("_cw")&&0>o?o=(o+9999999999*n)%n-(0|o/n)*n:-1!==e.indexOf("ccw")&&o>0&&(o=(o-9999999999*n)%n-(0|o/n)*n)),s=t+o),l>s&&s>-l&&(s=0),s},st={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ht=function(e,t,i){return e=0>e?e+1:e>1?e-1:e,0|255*(1>6*e?t+6*(i-t)*e:.5>e?i:2>3*e?t+6*(i-t)*(2/3-e):t)+.5},lt=o.parseColor=function(e){var t,i,r,n,a,o;return e&&""!==e?"number"==typeof e?[e>>16,255&e>>8,255&e]:(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),st[e]?st[e]:"#"===e.charAt(0)?(4===e.length&&(t=e.charAt(1),i=e.charAt(2),r=e.charAt(3),e="#"+t+t+i+i+r+r),e=parseInt(e.substr(1),16),[e>>16,255&e>>8,255&e]):"hsl"===e.substr(0,3)?(e=e.match(m),n=Number(e[0])%360/360,a=Number(e[1])/100,o=Number(e[2])/100,i=.5>=o?o*(a+1):o+a-o*a,t=2*o-i,e.length>3&&(e[3]=Number(e[3])),e[0]=ht(n+1/3,t,i),e[1]=ht(n,t,i),e[2]=ht(n-1/3,t,i),e):(e=e.match(m)||st.transparent,e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e.length>3&&(e[3]=Number(e[3])),e)):st.black},ct="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(l in st)ct+="|"+l+"\\b";ct=RegExp(ct+")","gi");var ut=function(e,t,i,r){if(null==e)return function(e){return e};var n,a=t?(e.match(ct)||[""])[0]:"",o=e.split(a).join("").match(T)||[],s=e.substr(0,e.indexOf(o[0])),h=")"===e.charAt(e.length-1)?")":"",l=-1!==e.indexOf(" ")?" ":",",c=o.length,u=c>0?o[0].replace(m,""):"";return c?n=t?function(e){var t,p,f,d;if("number"==typeof e)e+=u;else if(r&&L.test(e)){for(d=e.replace(L,"|").split("|"),f=0;d.length>f;f++)d[f]=n(d[f]);return d.join(",")}if(t=(e.match(ct)||[a])[0],p=e.split(t).join("").match(T)||[],f=p.length,c>f--)for(;c>++f;)p[f]=i?p[0|(f-1)/2]:o[f];return s+p.join(l)+l+t+h+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,p;if("number"==typeof e)e+=u;else if(r&&L.test(e)){for(a=e.replace(L,"|").split("|"),p=0;a.length>p;p++)a[p]=n(a[p]);return a.join(",")}if(t=e.match(T)||[],p=t.length,c>p--)for(;c>++p;)t[p]=i?t[0|(p-1)/2]:o[p];return s+t.join(l)+h}:function(e){return e}},pt=function(e){return e=e.split(","),function(t,i,r,n,a,o,s){var h,l=(i+"").split(" ");for(s={},h=0;4>h;h++)s[e[h]]=l[h]=l[h]||l[(h-1)/2>>0];return n.parse(t,s,a,o)}},ft=(z._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,r,n,a=this.data,o=a.proxy,s=a.firstMPT,h=1e-6;s;)t=o[s.v],s.r?t=Math.round(t):h>t&&t>-h&&(t=0),s.t[s.p]=t,s=s._next;if(a.autoRotate&&(a.autoRotate.rotation=o.rotation),1===e)for(s=a.firstMPT;s;){if(i=s.t,i.type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;i.l>r;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.e=n}}else i.e=i.s+i.xs0;s=s._next}},function(e,t,i,r,n){this.t=e,this.p=t,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),dt=(z._parseToProxy=function(e,t,i,r,n,a){var o,s,h,l,c,u=r,p={},f={},d=i._transform,E=U;for(i._transform=null,U=t,r=c=i.parse(e,t,r,n),U=E,a&&(i._transform=d,u&&(u._prev=null,u._prev&&(u._prev._next=null)));r&&r!==u;){if(1>=r.type&&(s=r.p,f[s]=r.s+r.c,p[s]=r.s,a||(l=new ft(r,"s",s,l,r.r),r.c=0),1===r.type))for(o=r.l;--o>0;)h="xn"+o,s=r.p+"_"+h,f[s]=r.data[h],p[s]=r[h],a||(l=new ft(r,h,s,l,r.rxp[h]));r=r._next}return{proxy:p,end:f,firstMPT:l,pt:c}},z.CSSPropTween=function(e,t,r,n,o,s,h,l,c,u,p){this.t=e,this.p=t,this.s=r,this.c=n,this.n=h||t,e instanceof dt||a.push(this.n),this.r=l,this.type=s||0,c&&(this.pr=c,i=!0),this.b=void 0===u?r:u,this.e=void 0===p?r+n:p,o&&(this._next=o,o._prev=this)}),Et=o.parseComplex=function(e,t,i,r,n,a,o,s,h,l){i=i||a||"",o=new dt(e,t,0,0,o,l?2:1,null,!1,s,i,r),r+="";var u,p,f,d,E,T,v,y,R,_,x,b,w=i.split(", ").join(",").split(" "),M=r.split(", ").join(",").split(" "),S=w.length,A=c!==!1;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(w=w.join(" ").replace(L,", ").split(" "),M=M.join(" ").replace(L,", ").split(" "),S=w.length),S!==M.length&&(w=(a||"").split(" "),S=w.length),o.plugin=h,o.setRatio=l,u=0;S>u;u++)if(d=w[u],E=M[u],y=parseFloat(d),y||0===y)o.appendXtra("",y,nt(E,y),E.replace(g,""),A&&-1!==E.indexOf("px"),!0);else if(n&&("#"===d.charAt(0)||st[d]||H.test(d)))b=","===E.charAt(E.length-1)?"),":")",d=lt(d),E=lt(E),R=d.length+E.length>6,R&&!I&&0===E[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(M[u]).join("transparent")):(I||(R=!1),o.appendXtra(R?"rgba(":"rgb(",d[0],E[0]-d[0],",",!0,!0).appendXtra("",d[1],E[1]-d[1],",",!0).appendXtra("",d[2],E[2]-d[2],R?",":b,!0),R&&(d=4>d.length?1:d[3],o.appendXtra("",d,(4>E.length?1:E[3])-d,b,!1)));else if(T=d.match(m)){if(v=E.match(g),!v||v.length!==T.length)return o;for(f=0,p=0;T.length>p;p++)x=T[p],_=d.indexOf(x,f),o.appendXtra(d.substr(f,_-f),Number(x),nt(v[p],x),"",A&&"px"===d.substr(_+x.length,2),0===p),f=_+x.length;o["xs"+o.l]+=d.substr(f)}else o["xs"+o.l]+=o.l?" "+d:d;if(-1!==r.indexOf("=")&&o.data){for(b=o.xs0+o.data.s,u=1;o.l>u;u++)b+=o["xs"+u]+o.data["xn"+u];o.e=b+o["xs"+u]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},mt=9;for(l=dt.prototype,l.l=l.pr=0;--mt>0;)l["xn"+mt]=0,l["xs"+mt]="";l.xs0="",l._next=l._prev=l.xfirst=l.data=l.plugin=l.setRatio=l.rxp=null,l.appendXtra=function(e,t,i,r,n,a){var o=this,s=o.l;return o["xs"+s]+=a&&s?" "+e:e||"",i||0===s||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",s>0?(o.data["xn"+s]=t+i,o.rxp["xn"+s]=n,o["xn"+s]=t,o.plugin||(o.xfirst=new dt(o,"xn"+s,t,i,o.xfirst||o,0,o.n,n,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+i},o.rxp={},o.s=t,o.c=i,o.r=n,o)):(o["xs"+s]+=t+(r||""),o)};var gt=function(e,t){t=t||{},this.p=t.prefix?q(e)||e:e,h[e]=h[this.p]=this,this.format=t.formatter||ut(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Tt=z._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var r,n,a=e.split(","),o=t.defaultValue;for(i=i||[o],r=0;a.length>r;r++)t.prefix=0===r&&t.prefix,t.defaultValue=i[r]||o,n=new gt(a[r],t)},vt=function(e){if(!h[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Tt(e,{parser:function(e,i,r,n,a,o,l){var c=s.com.greensock.plugins[t];return c?(c._cssRegister(),h[r].parse(e,i,r,n,a,o,l)):(W("Error: "+t+" js file not loaded."),a)}})}};l=gt.prototype,l.parseComplex=function(e,t,i,r,n,a){var o,s,h,l,c,u,p=this.keyword;if(this.multi&&(L.test(i)||L.test(t)?(s=t.replace(L,"|").split("|"),h=i.replace(L,"|").split("|")):p&&(s=[t],h=[i])),h){for(l=h.length>s.length?h.length:s.length,o=0;l>o;o++)t=s[o]=s[o]||this.dflt,i=h[o]=h[o]||this.dflt,p&&(c=t.indexOf(p),u=i.indexOf(p),c!==u&&(-1===u?s[o]=s[o].split(p).join(""):-1===c&&(s[o]+=" "+p)));t=s.join(", "),i=h.join(", ")}return Et(e,this.p,t,i,this.clrs,this.dflt,r,this.pr,n,a)},l.parse=function(e,t,i,r,a,o){return this.parseComplex(e.style,this.format(K(e,this.p,n,!1,this.dflt)),this.format(t),a,o)},o.registerSpecialProp=function(e,t,i){Tt(e,{parser:function(e,r,n,a,o,s){var h=new dt(e,n,0,0,o,2,n,!1,i);return h.plugin=s,h.setRatio=t(e,r,a._tween,n),h},priority:i})},o.useSVGTransformAttr=p;var yt,Rt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),_t=q("transform"),xt=j+"transform",Ht=q("transformOrigin"),bt=null!==q("perspective"),wt=z.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=o.defaultForce3D!==!1&&bt?o.defaultForce3D||"auto":!1},Mt=window.SVGElement,St=function(e,t,i){var r,n=B.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(a,"$1-$2").toLowerCase(),i[r]);return t.appendChild(n),n},At=B.documentElement,Ct=function(){var e,t,i,r=E||/Android/i.test(N)&&!window.chrome;return B.createElementNS&&!r&&(e=St("svg",At),t=St("rect",e,{width:100,height:50,x:100}),i=t.getBoundingClientRect().width,t.style[Ht]="50% 50%",t.style[_t]="scaleX(0.5)",r=i===t.getBoundingClientRect().width&&!(f&&bt),At.removeChild(e)),r}(),Pt=function(e,t,i,r){var n,a;r&&(a=r.split(" ")).length||(n=e.getBBox(),t=rt(t).split(" "),a=[(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*n.width:parseFloat(t[0]))+n.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*n.height:parseFloat(t[1]))+n.y]),i.xOrigin=parseFloat(a[0]),i.yOrigin=parseFloat(a[1]),e.setAttribute("data-svg-origin",a.join(" "))},Lt=z.getTransform=function(e,t,i,r){if(e._gsTransform&&i&&!r)return e._gsTransform;var a,s,h,l,c,u,p,f,d,E,m=i?e._gsTransform||new wt:new wt,g=0>m.scaleX,T=2e-5,v=1e5,y=bt?parseFloat(K(e,Ht,t,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,R=parseFloat(o.defaultTransformPerspective)||0;if(_t?s=K(e,xt,t,!0):e.currentStyle&&(s=e.currentStyle.filter.match(C),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),m.x||0,m.y||0].join(","):""),a=!s||"none"===s||"matrix(1, 0, 0, 1, 0, 0)"===s,m.svg=!!(Mt&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM)),m.svg&&(a&&-1!==(e.style[_t]+"").indexOf("matrix")&&(s=e.style[_t],a=!1),Pt(e,K(e,Ht,n,!1,"50% 50%")+"",m,e.getAttribute("data-svg-origin")),yt=o.useSVGTransformAttr||Ct,h=e.getAttribute("transform"),a&&h&&-1!==h.indexOf("matrix")&&(s=h,a=0)),!a){for(h=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],l=h.length;--l>-1;)c=Number(h[l]),h[l]=(u=c-(c|=0))?(0|u*v+(0>u?-.5:.5))/v+c:c;if(16===h.length){var _,x,H,b,w,M=h[0],S=h[1],A=h[2],P=h[3],L=h[4],F=h[5],U=h[6],B=h[7],k=h[8],O=h[9],V=h[10],z=h[12],N=h[13],I=h[14],G=h[11],W=Math.atan2(U,V);m.zOrigin&&(I=-m.zOrigin,z=k*I-h[12],N=O*I-h[13],I=V*I+m.zOrigin-h[14]),m.rotationX=W*D,W&&(b=Math.cos(-W),w=Math.sin(-W),_=L*b+k*w,x=F*b+O*w,H=U*b+V*w,k=L*-w+k*b,O=F*-w+O*b,V=U*-w+V*b,G=B*-w+G*b,L=_,F=x,U=H),W=Math.atan2(k,V),m.rotationY=W*D,W&&(b=Math.cos(-W),w=Math.sin(-W),_=M*b-k*w,x=S*b-O*w,H=A*b-V*w,O=S*w+O*b,V=A*w+V*b,G=P*w+G*b,M=_,S=x,A=H),W=Math.atan2(S,M),m.rotation=W*D,W&&(b=Math.cos(-W),w=Math.sin(-W),M=M*b+L*w,x=S*b+F*w,F=S*-w+F*b,U=A*-w+U*b,S=x),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY+=180),m.scaleX=(0|Math.sqrt(M*M+S*S)*v+.5)/v,m.scaleY=(0|Math.sqrt(F*F+O*O)*v+.5)/v,m.scaleZ=(0|Math.sqrt(U*U+V*V)*v+.5)/v,m.skewX=0,m.perspective=G?1/(0>G?-G:G):0,m.x=z,m.y=N,m.z=I,m.svg&&(m.x-=m.xOrigin-(m.xOrigin*M-m.yOrigin*L),m.y-=m.yOrigin-(m.yOrigin*S-m.xOrigin*F))}else if(!(bt&&!r&&h.length&&m.x===h[4]&&m.y===h[5]&&(m.rotationX||m.rotationY)||void 0!==m.x&&"none"===K(e,"display",t))){var j=h.length>=6,X=j?h[0]:1,q=h[1]||0,Y=h[2]||0,Q=j?h[3]:1;m.x=h[4]||0,m.y=h[5]||0,p=Math.sqrt(X*X+q*q),f=Math.sqrt(Q*Q+Y*Y),d=X||q?Math.atan2(q,X)*D:m.rotation||0,E=Y||Q?Math.atan2(Y,Q)*D+d:m.skewX||0,Math.abs(E)>90&&270>Math.abs(E)&&(g?(p*=-1,E+=0>=d?180:-180,d+=0>=d?180:-180):(f*=-1,E+=0>=E?180:-180)),m.scaleX=p,m.scaleY=f,m.rotation=d,m.skewX=E,bt&&(m.rotationX=m.rotationY=m.z=0,m.perspective=R,m.scaleZ=1),m.svg&&(m.x-=m.xOrigin-(m.xOrigin*X-m.yOrigin*q),m.y-=m.yOrigin-(m.yOrigin*Q-m.xOrigin*Y))}m.zOrigin=y;for(l in m)T>m[l]&&m[l]>-T&&(m[l]=0)}return i&&(e._gsTransform=m,m.svg&&(yt&&e.style[_t]?Bt(e.style,_t):!yt&&e.getAttribute("transform")&&e.removeAttribute("transform"))),m},Ft=function(e){var t,i,r=this.data,n=-r.rotation*F,a=n+r.skewX*F,o=1e5,s=(0|Math.cos(n)*r.scaleX*o)/o,h=(0|Math.sin(n)*r.scaleX*o)/o,l=(0|Math.sin(a)*-r.scaleY*o)/o,c=(0|Math.cos(a)*r.scaleY*o)/o,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,t=p.filter,u.filter="";var f,d,m=this.t.offsetWidth,g=this.t.offsetHeight,T="absolute"!==p.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+h+", M21="+l+", M22="+c,_=r.x+m*r.xPercent/100,x=r.y+g*r.yPercent/100;if(null!=r.ox&&(f=(r.oxp?.01*m*r.ox:r.ox)-m/2,d=(r.oyp?.01*g*r.oy:r.oy)-g/2,_+=f-(f*s+d*h),x+=d-(f*l+d*c)),T?(f=m/2,d=g/2,v+=", Dx="+(f-(f*s+d*h)+_)+", Dy="+(d-(f*l+d*c)+x)+")"):v+=", sizingMethod='auto expand')",u.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(P,v):v+" "+t,(0===e||1===e)&&1===s&&0===h&&0===l&&1===c&&(T&&-1===v.indexOf("Dx=0, Dy=0")||R.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf("gradient("&&t.indexOf("Alpha"))&&u.removeAttribute("filter")),!T){var H,b,w,M=8>E?1:-1;for(f=r.ieOffsetX||0,d=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((0>s?-s:s)*m+(0>h?-h:h)*g))/2+_),r.ieOffsetY=Math.round((g-((0>c?-c:c)*g+(0>l?-l:l)*m))/2+x),mt=0;4>mt;mt++)b=tt[mt],H=p[b],i=-1!==H.indexOf("px")?parseFloat(H):Q(this.t,b,parseFloat(H),H.replace(y,""))||0,w=i!==r[b]?2>mt?-r.ieOffsetX:-r.ieOffsetY:2>mt?f-r.ieOffsetX:d-r.ieOffsetY,u[b]=(r[b]=Math.round(i-w*(0===mt||2===mt?1:M)))+"px"}}},Dt=z.set3DTransformRatio=z.setTransformRatio=function(e){var t,i,r,n,a,o,s,h,l,c,u,p,d,E,m,g,T,v,y,R,_,x,H,b=this.data,w=this.t.style,M=b.rotation,S=b.rotationX,A=b.rotationY,C=b.scaleX,P=b.scaleY,L=b.scaleZ,D=b.x,U=b.y,B=b.z,k=b.svg,O=b.perspective,V=b.force3D;if(!((1!==e&&0!==e||"auto"!==V||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&V||B||O||A||S)||yt&&k||!bt)return void(M||b.skewX||k?(M*=F,x=b.skewX*F,H=1e5,t=Math.cos(M)*C,n=Math.sin(M)*C,i=Math.sin(M-x)*-P,a=Math.cos(M-x)*P,x&&"simple"===b.skewType&&(T=Math.tan(x),T=Math.sqrt(1+T*T),i*=T,a*=T),k&&(D+=b.xOrigin-(b.xOrigin*t+b.yOrigin*i),U+=b.yOrigin-(b.xOrigin*n+b.yOrigin*a),E=1e-6,E>D&&D>-E&&(D=0),E>U&&U>-E&&(U=0)),y=(0|t*H)/H+","+(0|n*H)/H+","+(0|i*H)/H+","+(0|a*H)/H+","+D+","+U+")",k&&yt?this.t.setAttribute("transform","matrix("+y):w[_t]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+y):w[_t]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+P+","+D+","+U+")");if(f&&(E=1e-4,E>C&&C>-E&&(C=L=2e-5),E>P&&P>-E&&(P=L=2e-5),!O||b.z||b.rotationX||b.rotationY||(O=0)),M||b.skewX)M*=F,m=t=Math.cos(M),g=n=Math.sin(M),b.skewX&&(M-=b.skewX*F,m=Math.cos(M),g=Math.sin(M),"simple"===b.skewType&&(T=Math.tan(b.skewX*F),T=Math.sqrt(1+T*T),m*=T,g*=T)),i=-g,a=m;
else{if(!(A||S||1!==L||O||k))return void(w[_t]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+D+"px,"+U+"px,"+B+"px)"+(1!==C||1!==P?" scale("+C+","+P+")":""));t=a=1,i=n=0}l=1,r=o=s=h=c=u=0,p=O?-1/O:0,d=b.zOrigin,E=1e-6,R=",",_="0",M=A*F,M&&(m=Math.cos(M),g=Math.sin(M),s=-g,c=p*-g,r=t*g,o=n*g,l=m,p*=m,t*=m,n*=m),M=S*F,M&&(m=Math.cos(M),g=Math.sin(M),T=i*m+r*g,v=a*m+o*g,h=l*g,u=p*g,r=i*-g+r*m,o=a*-g+o*m,l*=m,p*=m,i=T,a=v),1!==L&&(r*=L,o*=L,l*=L,p*=L),1!==P&&(i*=P,a*=P,h*=P,u*=P),1!==C&&(t*=C,n*=C,s*=C,c*=C),(d||k)&&(d&&(D+=r*-d,U+=o*-d,B+=l*-d+d),k&&(D+=b.xOrigin-(b.xOrigin*t+b.yOrigin*i),U+=b.yOrigin-(b.xOrigin*n+b.yOrigin*a)),E>D&&D>-E&&(D=_),E>U&&U>-E&&(U=_),E>B&&B>-E&&(B=0)),y=b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(",y+=(E>t&&t>-E?_:t)+R+(E>n&&n>-E?_:n)+R+(E>s&&s>-E?_:s),y+=R+(E>c&&c>-E?_:c)+R+(E>i&&i>-E?_:i)+R+(E>a&&a>-E?_:a),S||A?(y+=R+(E>h&&h>-E?_:h)+R+(E>u&&u>-E?_:u)+R+(E>r&&r>-E?_:r),y+=R+(E>o&&o>-E?_:o)+R+(E>l&&l>-E?_:l)+R+(E>p&&p>-E?_:p)+R):y+=",0,0,0,0,1,0,",y+=D+R+U+R+B+R+(O?1+-B/O:1)+")",w[_t]=y};l=wt.prototype,l.x=l.y=l.z=l.skewX=l.skewY=l.rotation=l.rotationX=l.rotationY=l.zOrigin=l.xPercent=l.yPercent=0,l.scaleX=l.scaleY=l.scaleZ=1,Tt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(e,t,i,r,a,s,h){if(r._lastParsedTransform===h)return a;r._lastParsedTransform=h;var l,c,u,p,f,d,E,m=r._transform=Lt(e,n,!0,h.parseTransform),g=e.style,T=1e-6,v=Rt.length,y=h,R={};if("string"==typeof y.transform&&_t)u=O.style,u[_t]=y.transform,u.display="block",u.position="absolute",B.body.appendChild(O),l=Lt(O,null,!1),B.body.removeChild(O);else if("object"==typeof y){if(l={scaleX:at(null!=y.scaleX?y.scaleX:y.scale,m.scaleX),scaleY:at(null!=y.scaleY?y.scaleY:y.scale,m.scaleY),scaleZ:at(y.scaleZ,m.scaleZ),x:at(y.x,m.x),y:at(y.y,m.y),z:at(y.z,m.z),xPercent:at(y.xPercent,m.xPercent),yPercent:at(y.yPercent,m.yPercent),perspective:at(y.transformPerspective,m.perspective)},E=y.directionalRotation,null!=E)if("object"==typeof E)for(u in E)y[u]=E[u];else y.rotation=E;"string"==typeof y.x&&-1!==y.x.indexOf("%")&&(l.x=0,l.xPercent=at(y.x,m.xPercent)),"string"==typeof y.y&&-1!==y.y.indexOf("%")&&(l.y=0,l.yPercent=at(y.y,m.yPercent)),l.rotation=ot("rotation"in y?y.rotation:"shortRotation"in y?y.shortRotation+"_short":"rotationZ"in y?y.rotationZ:m.rotation,m.rotation,"rotation",R),bt&&(l.rotationX=ot("rotationX"in y?y.rotationX:"shortRotationX"in y?y.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",R),l.rotationY=ot("rotationY"in y?y.rotationY:"shortRotationY"in y?y.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",R)),l.skewX=null==y.skewX?m.skewX:ot(y.skewX,m.skewX),l.skewY=null==y.skewY?m.skewY:ot(y.skewY,m.skewY),(c=l.skewY-m.skewY)&&(l.skewX+=c,l.rotation+=c)}for(bt&&null!=y.force3D&&(m.force3D=y.force3D,d=!0),m.skewType=y.skewType||m.skewType||o.defaultSkewType,f=m.force3D||m.z||m.rotationX||m.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,f||null==y.scale||(l.scaleZ=1);--v>-1;)i=Rt[v],p=l[i]-m[i],(p>T||-T>p||null!=y[i]||null!=U[i])&&(d=!0,a=new dt(m,i,m[i],p,a),i in R&&(a.e=R[i]),a.xs0=0,a.plugin=s,r._overwriteProps.push(a.n));return p=y.transformOrigin,m.svg&&(p||y.svgOrigin)&&(Pt(e,rt(p),l,y.svgOrigin),a=new dt(m,"xOrigin",m.xOrigin,l.xOrigin-m.xOrigin,a,-1,"transformOrigin"),a.b=m.xOrigin,a.e=a.xs0=l.xOrigin,a=new dt(m,"yOrigin",m.yOrigin,l.yOrigin-m.yOrigin,a,-1,"transformOrigin"),a.b=m.yOrigin,a.e=a.xs0=l.yOrigin,p=yt?null:"0px 0px"),(p||bt&&f&&m.zOrigin)&&(_t?(d=!0,i=Ht,p=(p||K(e,i,n,!1,"50% 50%"))+"",a=new dt(g,i,0,0,a,-1,"transformOrigin"),a.b=g[i],a.plugin=s,bt?(u=m.zOrigin,p=p.split(" "),m.zOrigin=(p.length>2&&(0===u||"0px"!==p[2])?parseFloat(p[2]):u)||0,a.xs0=a.e=p[0]+" "+(p[1]||"50%")+" 0px",a=new dt(m,"zOrigin",0,0,a,-1,a.n),a.b=u,a.xs0=a.e=m.zOrigin):a.xs0=a.e=p):rt(p+"",m)),d&&(r._transformType=m.svg&&yt||!f&&3!==this._transformType?2:3),a},prefix:!0}),Tt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Tt("borderRadius",{defaultValue:"0px",parser:function(e,t,i,a,o){t=this.format(t);var s,h,l,c,u,p,f,d,E,m,g,T,v,y,R,_,x=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],H=e.style;for(E=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),s=t.split(" "),h=0;x.length>h;h++)this.p.indexOf("border")&&(x[h]=q(x[h])),u=c=K(e,x[h],n,!1,"0px"),-1!==u.indexOf(" ")&&(c=u.split(" "),u=c[0],c=c[1]),p=l=s[h],f=parseFloat(u),T=u.substr((f+"").length),v="="===p.charAt(1),v?(d=parseInt(p.charAt(0)+"1",10),p=p.substr(2),d*=parseFloat(p),g=p.substr((d+"").length-(0>d?1:0))||""):(d=parseFloat(p),g=p.substr((d+"").length)),""===g&&(g=r[i]||T),g!==T&&(y=Q(e,"borderLeft",f,T),R=Q(e,"borderTop",f,T),"%"===g?(u=100*(y/E)+"%",c=100*(R/m)+"%"):"em"===g?(_=Q(e,"borderLeft",1,"em"),u=y/_+"em",c=R/_+"em"):(u=y+"px",c=R+"px"),v&&(p=parseFloat(u)+d+g,l=parseFloat(c)+d+g)),o=Et(H,x[h],u+" "+c,p+" "+l,!1,"0px",o);return o},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),Tt("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,a,o){var s,h,l,c,u,p,f="background-position",d=n||Y(e,null),m=this.format((d?E?d.getPropertyValue(f+"-x")+" "+d.getPropertyValue(f+"-y"):d.getPropertyValue(f):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&(p=K(e,"backgroundImage").replace(M,""),p&&"none"!==p)){for(s=m.split(" "),h=g.split(" "),V.setAttribute("src",p),l=2;--l>-1;)m=s[l],c=-1!==m.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(u=0===l?e.offsetWidth-V.width:e.offsetHeight-V.height,s[l]=c?parseFloat(m)/100*u+"px":100*(parseFloat(m)/u)+"%");m=s.join(" ")}return this.parseComplex(e.style,m,g,a,o)},formatter:rt}),Tt("backgroundSize",{defaultValue:"0 0",formatter:rt}),Tt("perspective",{defaultValue:"0px",prefix:!0}),Tt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Tt("transformStyle",{prefix:!0}),Tt("backfaceVisibility",{prefix:!0}),Tt("userSelect",{prefix:!0}),Tt("margin",{parser:pt("marginTop,marginRight,marginBottom,marginLeft")}),Tt("padding",{parser:pt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Tt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,a,o){var s,h,l;return 9>E?(h=e.currentStyle,l=8>E?" ":",",s="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",t=this.format(t).split(",").join(l)):(s=this.format(K(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,a,o)}}),Tt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Tt("autoRound,strictUnits",{parser:function(e,t,i,r,n){return n}}),Tt("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,a,o){return this.parseComplex(e.style,this.format(K(e,"borderTopWidth",n,!1,"0px")+" "+K(e,"borderTopStyle",n,!1,"solid")+" "+K(e,"borderTopColor",n,!1,"#000")),this.format(t),a,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ct)||["#000"])[0]}}),Tt("borderWidth",{parser:pt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Tt("float,cssFloat,styleFloat",{parser:function(e,t,i,r,n){var a=e.style,o="cssFloat"in a?"cssFloat":"styleFloat";return new dt(a,o,0,0,n,-1,i,!1,0,a[o],t)}});var Ut=function(e){var t,i=this.t,r=i.filter||K(this.data,"filter")||"",n=0|this.s+this.c*e;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),t=!K(this.data,"filter")):(i.filter=r.replace(x,""),t=!0)),t||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(R,"opacity="+n))};Tt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,a,o){var s=parseFloat(K(e,"opacity",n,!1,"1")),h=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),l&&1===s&&"hidden"===K(e,"visibility",n)&&0!==t&&(s=0),I?a=new dt(h,"opacity",s,t-s,a):(a=new dt(h,"opacity",100*s,100*(t-s),a),a.xn1=l?1:0,h.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=e,a.plugin=o,a.setRatio=Ut),l&&(a=new dt(h,"visibility",0,0,a,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit"),a.xs0="inherit",r._overwriteProps.push(a.n),r._overwriteProps.push(i)),a}});var Bt=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(b,"-$1").toLowerCase())):e.removeAttribute(t))},kt=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Bt(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Tt("className",{parser:function(e,t,r,a,o,s,h){var l,c,u,p,f,d=e.getAttribute("class")||"",E=e.style.cssText;if(o=a._classNamePT=new dt(e,r,0,0,o,2),o.setRatio=kt,o.pr=-11,i=!0,o.b=d,c=J(e,n),u=e._gsClassPT){for(p={},f=u.data;f;)p[f.p]=1,f=f._next;u.setRatio(1)}return e._gsClassPT=o,o.e="="!==t.charAt(1)?t:d.replace(RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",o.e),l=$(e,c,J(e),h,p),e.setAttribute("class",d),o.data=l.firstMPT,e.style.cssText=E,o=o.xfirst=a.parse(e,l.difs,o,s)}});var Ot=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,r,n,a,o=this.t.style,s=h.transform.parse;if("all"===this.e)o.cssText="",n=!0;else for(t=this.e.split(" ").join("").split(","),r=t.length;--r>-1;)i=t[r],h[i]&&(h[i].parse===s?n=!0:i="transformOrigin"===i?Ht:h[i].p),Bt(o,i);n&&(Bt(o,_t),a=this.t._gsTransform,a&&(a.svg&&this.t.removeAttribute("data-svg-origin"),delete this.t._gsTransform))}};for(Tt("clearProps",{parser:function(e,t,r,n,a){return a=new dt(e,r,0,0,a,2),a.setRatio=Ot,a.e=t,a.pr=-10,a.data=n._tween,i=!0,a}}),l="bezier,throwProps,physicsProps,physics2D".split(","),mt=l.length;mt--;)vt(l[mt]);l=o.prototype,l._firstPT=l._lastParsedTransform=l._transform=null,l._onInitTween=function(e,t,s){if(!e.nodeType)return!1;this._target=e,this._tween=s,this._vars=t,c=t.autoRound,i=!1,r=t.suffixMap||o.suffixMap,n=Y(e,""),a=this._overwriteProps;var l,f,E,m,g,T,v,y,R,x=e.style;if(u&&""===x.zIndex&&(l=K(e,"zIndex",n),("auto"===l||""===l)&&this._addLazySet(x,"zIndex",0)),"string"==typeof t&&(m=x.cssText,l=J(e,n),x.cssText=m+";"+t,l=$(e,l,J(e)).difs,!I&&_.test(t)&&(l.opacity=parseFloat(RegExp.$1)),t=l,x.cssText=m),this._firstPT=f=t.className?h.className.parse(e,t.className,"className",this,null,null,t):this.parse(e,t,null),this._transformType){for(R=3===this._transformType,_t?p&&(u=!0,""===x.zIndex&&(v=K(e,"zIndex",n),("auto"===v||""===v)&&this._addLazySet(x,"zIndex",0)),d&&this._addLazySet(x,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(R?"visible":"hidden"))):x.zoom=1,E=f;E&&E._next;)E=E._next;y=new dt(e,"transform",0,0,null,2),this._linkCSSP(y,null,E),y.setRatio=_t?Dt:Ft,y.data=this._transform||Lt(e,n,!0),y.tween=s,y.pr=-1,a.pop()}if(i){for(;f;){for(T=f._next,E=m;E&&E.pr>f.pr;)E=E._next;(f._prev=E?E._prev:g)?f._prev._next=f:m=f,(f._next=E)?E._prev=f:g=f,f=T}this._firstPT=m}return!0},l.parse=function(e,t,i,a){var o,s,l,u,p,f,d,E,m,g,T=e.style;for(o in t)f=t[o],s=h[o],s?i=s.parse(e,f,o,this,i,a,t):(p=K(e,o,n)+"",m="string"==typeof f,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||m&&H.test(f)?(m||(f=lt(f),f=(f.length>3?"rgba(":"rgb(")+f.join(",")+")"),i=Et(T,o,p,f,!0,"transparent",i,0,a)):!m||-1===f.indexOf(" ")&&-1===f.indexOf(",")?(l=parseFloat(p),d=l||0===l?p.substr((l+"").length):"",(""===p||"auto"===p)&&("width"===o||"height"===o?(l=it(e,o,n),d="px"):"left"===o||"top"===o?(l=Z(e,o,n),d="px"):(l="opacity"!==o?0:1,d="")),g=m&&"="===f.charAt(1),g?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),E=f.replace(y,"")):(u=parseFloat(f),E=m?f.replace(y,""):""),""===E&&(E=o in r?r[o]:d),f=u||0===u?(g?u+l:u)+E:t[o],d!==E&&""!==E&&(u||0===u)&&l&&(l=Q(e,o,l,d),"%"===E?(l/=Q(e,o,100,"%")/100,t.strictUnits!==!0&&(p=l+"%")):"em"===E?l/=Q(e,o,1,"em"):"px"!==E&&(u=Q(e,o,u,E),E="px"),g&&(u||0===u)&&(f=u+l+E)),g&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==T[o]&&(f||"NaN"!=f+""&&null!=f)?(i=new dt(T,o,u||l||0,0,i,-1,o,!1,0,p,f),i.xs0="none"!==f||"display"!==o&&-1===o.indexOf("Style")?f:p):W("invalid "+o+" tween value: "+t[o]):(i=new dt(T,o,l,u-l,i,0,o,c!==!1&&("px"===E||"zIndex"===o),0,p,f),i.xs0=E)):i=Et(T,o,p,f,!0,null,i,0,a)),a&&i&&!i.plugin&&(i.plugin=a);return i},l.setRatio=function(e){var t,i,r,n=this._firstPT,a=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;n;){if(t=n.c*e+n.s,n.r?t=Math.round(t):a>t&&t>-a&&(t=0),n.type)if(1===n.type)if(r=n.l,2===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+t+n.xs1,r=1;n.l>r;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;)2!==n.type?n.t[n.p]=n.e:n.setRatio(e),n=n._next},l._enableTransforms=function(e){this._transform=this._transform||Lt(this._target,n,!0),this._transformType=this._transform.svg&&yt||!e&&3!==this._transformType?2:3};var Vt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};l._addLazySet=function(e,t,i){var r=this._firstPT=new dt(e,t,0,0,this._firstPT,2);r.e=i,r.setRatio=Vt,r.data=this},l._linkCSSP=function(e,t,i,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),i?i._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},l._kill=function(t){var i,r,n,a=t;if(t.autoAlpha||t.alpha){a={};for(r in t)a[r]=t[r];a.opacity=1,a.autoAlpha&&(a.visibility=1)}return t.className&&(i=this._classNamePT)&&(n=i.xfirst,n&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),e.prototype._kill.call(this,a)};var zt=function(e,t,i){var r,n,a,o;if(e.slice)for(n=e.length;--n>-1;)zt(e[n],t,i);else for(r=e.childNodes,n=r.length;--n>-1;)a=r[n],o=a.type,a.style&&(t.push(J(a)),i&&i.push(a)),1!==o&&9!==o&&11!==o||!a.childNodes.length||zt(a,t,i)};return o.cascadeTo=function(e,i,r){var n,a,o,s,h=t.to(e,i,r),l=[h],c=[],u=[],p=[],f=t._internals.reservedProps;for(e=h._targets||h.target,zt(e,c,p),h.render(i,!0,!0),zt(e,u),h.render(0,!0,!0),h._enabled(!0),n=p.length;--n>-1;)if(a=$(p[n],c[n],u[n]),a.firstMPT){a=a.difs;for(o in r)f[o]&&(a[o]=r[o]);s={};for(o in a)s[o]=c[n][o];l.push(t.fromTo(p[n],i,s,a))}return l},e.activate([o]),o},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),t=e.prototype;t._onInitAllProps=function(){for(var e,t,i,r=this._tween,n=r.vars.roundProps instanceof Array?r.vars.roundProps:r.vars.roundProps.split(","),a=n.length,o={},s=r._propLookup.roundProps;--a>-1;)o[n[a]]=1;for(a=n.length;--a>-1;)for(e=n[a],t=r._firstPT;t;)i=t._next,t.pg?t.t._roundProps(o,!0):t.n===e&&(this._add(t.t,e,t.s,t.c),i&&(i._prev=t._prev),t._prev?t._prev._next=i:r._firstPT===t&&(r._firstPT=i),t._next=t._prev=null,r._propLookup[e]=s),t=i;return!1},t._add=function(e,t,i,r){this._addTween(e,t,i,i+r,t,!0),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(e,t){var i,r,n;if("function"!=typeof e.setAttribute)return!1;this._target=e,this._proxy={},this._start={},this._end={};for(i in t)this._start[i]=this._proxy[i]=r=e.getAttribute(i),n=this._addTween(this._proxy,i,parseFloat(r),t[i],i),this._end[i]=n?n.s+n.c:t[i],this._overwriteProps.push(i);return!0},set:function(e){this._super.setRatio.call(this,e);for(var t,i=this._overwriteProps,r=i.length,n=1===e?this._end:e?this._proxy:this._start;--r>-1;)t=i[r],this._target.setAttribute(t,n[t]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t){"object"!=typeof t&&(t={rotation:t}),this.finals={};var i,r,n,a,o,s,h=t.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in t)"useRadians"!==i&&(s=(t[i]+"").split("_"),r=s[0],n=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),a=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?n+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,o=a-n,s.length&&(r=s.join("_"),-1!==r.indexOf("short")&&(o%=h,o!==o%(h/2)&&(o=0>o?o+h:o-h)),-1!==r.indexOf("_cw")&&0>o?o=(o+9999999999*h)%h-(0|o/h)*h:-1!==r.indexOf("ccw")&&o>0&&(o=(o-9999999999*h)%h-(0|o/h)*h)),(o>l||-l>o)&&(this._addTween(e,i,n,n+o,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,r,n=_gsScope.GreenSockGlobals||_gsScope,a=n.com.greensock,o=2*Math.PI,s=Math.PI/2,h=a._class,l=function(t,i){var r=h("easing."+t,function(){},!0),n=r.prototype=new e;return n.constructor=r,n.getRatio=i,r},c=e.register||function(){},u=function(e,t,i,r){var n=h("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new r},!0);return c(n,e),n},p=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},f=function(t,i){var r=h("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),n=r.prototype=new e;return n.constructor=r,n.getRatio=i,n.config=function(e){return new r(e)},r},d=u("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return 1>(e*=2)?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),E=h("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),m=E.prototype=new e;return m.constructor=E,m.getRatio=function(e){var t=e+(.5-e)*this._p;return this._p1>e?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},E.ease=new E(.7,.7),m.config=E.config=function(e,t,i){return new E(e,t,i)},t=h("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),m=t.prototype=new e,m.constructor=t,m.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},m.config=t.config=function(e){return new t(e)},i=h("easing.RoughEase",function(t){t=t||{};for(var i,r,n,a,o,s,h=t.taper||"none",l=[],c=0,u=0|(t.points||20),f=u,d=t.randomize!==!1,E=t.clamp===!0,m=t.template instanceof e?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;--f>-1;)i=d?Math.random():1/u*f,r=m?m.getRatio(i):i,"none"===h?n=g:"out"===h?(a=1-i,n=a*a*g):"in"===h?n=i*i*g:.5>i?(a=2*i,n=.5*a*a*g):(a=2*(1-i),n=.5*a*a*g),d?r+=Math.random()*n-.5*n:f%2?r+=.5*n:r-=.5*n,E&&(r>1?r=1:0>r&&(r=0)),l[c++]={x:i,y:r};for(l.sort(function(e,t){return e.x-t.x}),s=new p(1,1,null),f=u;--f>-1;)o=l[f],s=new p(o.x,o.y,s);this._prev=new p(0,0,0!==s.t?s:s.next)},!0),m=i.prototype=new e,m.constructor=i,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&t.t>=e;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},m.config=function(e){return new i(e)},i.ease=new i,u("Bounce",l("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),l("BounceIn",function(e){return 1/2.75>(e=1-e)?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),l("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),u("Circ",l("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),l("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),l("CircInOut",function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),r=function(t,i,r){var n=h("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||r)/(1>e?e:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),a=n.prototype=new e;return a.constructor=n,a.getRatio=i,a.config=function(e,t){return new n(e,t)},n},u("Elastic",r("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),r("ElasticInOut",function(e){return 1>(e*=2)?-.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2):.5*this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)+1},.45)),u("Expo",l("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),l("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),l("ExpoInOut",function(e){return 1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),u("Sine",l("SineOut",function(e){return Math.sin(e*s)}),l("SineIn",function(e){return-Math.cos(e*s)+1}),l("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),h("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),c(n.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(t,"SteppedEase","ease,"),d},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var i=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!i.TweenLite){var r,n,a,o,s,h=function(e){var t,r=e.split("."),n=i;for(t=0;r.length>t;t++)n[r[t]]=n=n[r[t]]||{};return n},l=h("com.greensock"),c=1e-10,u=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},p=function(){},f=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&e.call(i)===t)}}(),d={},E=function(r,n,a,o){this.sc=d[r]?d[r].sc:[],d[r]=this,this.gsClass=null,this.func=a;var s=[];this.check=function(l){for(var c,u,p,f,m=n.length,g=m;--m>-1;)(c=d[n[m]]||new E(n[m],[])).gsClass?(s[m]=c.gsClass,g--):l&&c.sc.push(this);if(0===g&&a)for(u=("com.greensock."+r).split("."),p=u.pop(),f=h(u.join("."))[p]=this.gsClass=a.apply(a,s),o&&(i[p]=f,"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return f}):r===t&&"undefined"!=typeof module&&module.exports&&(module.exports=f)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=e._gsDefine=function(e,t,i,r){return new E(e,t,i,r)},g=l._class=function(e,t,i){return t=t||function(){},m(e,[],function(){return t},i),t};m.globals=i;var T=[0,0,1,1],v=[],y=g("easing.Ease",function(e,t,i,r){this._func=e,this._type=i||0,this._power=r||0,this._params=t?T.concat(t):T},!0),R=y.map={},_=y.register=function(e,t,i,r){for(var n,a,o,s,h=t.split(","),c=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(a=h[c],n=r?g("easing."+a,null,!0):l.easing[a]||{},o=u.length;--o>-1;)s=u[o],R[a+"."+s]=R[s+a]=n[s]=e.getRatio?e:e[s]||new e};for(a=y.prototype,a._calcEnd=!1,a.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,r=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===t?1-r:2===t?r:.5>e?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],n=r.length;--n>-1;)a=r[n]+",Power"+n,_(new y(null,null,1,n),a,"easeOut",!0),_(new y(null,null,2,n),a,"easeIn"+(0===n?",easeNone":"")),_(new y(null,null,3,n),a,"easeInOut");R.linear=l.easing.Linear.easeIn,R.swing=l.easing.Quad.easeInOut;var x=g("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});a=x.prototype,a.addEventListener=function(e,t,i,r,n){n=n||0;var a,h,l=this._listeners[e],c=0;for(null==l&&(this._listeners[e]=l=[]),h=l.length;--h>-1;)a=l[h],a.c===t&&a.s===i?l.splice(h,1):0===c&&n>a.pr&&(c=h+1);l.splice(c,0,{c:t,s:i,up:r,pr:n}),this!==o||s||o.wake()},a.removeEventListener=function(e,t){var i,r=this._listeners[e];if(r)for(i=r.length;--i>-1;)if(r[i].c===t)return void r.splice(i,1)},a.dispatchEvent=function(e){var t,i,r,n=this._listeners[e];if(n)for(t=n.length,i=this._eventTarget;--t>-1;)r=n[t],r&&(r.up?r.c.call(r.s||i,{type:e,target:i}):r.c.call(r.s||i))};var H=e.requestAnimationFrame,b=e.cancelAnimationFrame,w=Date.now||function(){return(new Date).getTime()},M=w();for(r=["ms","moz","webkit","o"],n=r.length;--n>-1&&!H;)H=e[r[n]+"RequestAnimationFrame"],b=e[r[n]+"CancelAnimationFrame"]||e[r[n]+"CancelRequestAnimationFrame"];g("Ticker",function(e,t){var i,r,n,a,h,l=this,u=w(),f=t!==!1&&H,d=500,E=33,m="tick",g=function(e){var t,o,s=w()-M;s>d&&(u+=s-E),M+=s,l.time=(M-u)/1e3,t=l.time-h,(!i||t>0||e===!0)&&(l.frame++,h+=t+(t>=a?.004:a-t),o=!0),e!==!0&&(n=r(g)),o&&l.dispatchEvent(m)};x.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(e,t){d=e||1/c,E=Math.min(t,d,0)},l.sleep=function(){null!=n&&(f&&b?b(n):clearTimeout(n),r=p,n=null,l===o&&(s=!1))},l.wake=function(){null!==n?l.sleep():l.frame>10&&(M=w()-d+5),r=0===i?p:f&&H?H:function(e){return setTimeout(e,0|1e3*(h-l.time)+1)},l===o&&(s=!0),g(2)},l.fps=function(e){return arguments.length?(i=e,a=1/(i||60),h=this.time+a,void l.wake()):i},l.useRAF=function(e){return arguments.length?(l.sleep(),f=e,void l.fps(i)):f},l.fps(e),setTimeout(function(){f&&5>l.frame&&l.useRAF(!1)},1500)}),a=l.Ticker.prototype=new l.events.EventDispatcher,a.constructor=l.Ticker;var S=g("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,G){s||o.wake();var i=this.vars.useFrames?I:G;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});o=S.ticker=new l.Ticker,a=S.prototype,a._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;var A=function(){s&&w()-M>2e3&&o.wake(),setTimeout(A,2e3)};A(),a.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},a.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},a.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},a.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},a.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},a.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},a.render=function(){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},a.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=i&&i+this.totalDuration()/this._timeScale>e},a._enabled=function(e,t){return s||o.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(){return this._enabled(!1,!1)},a.kill=function(e,t){return this._kill(e,t),this},a._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},a._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},a.eventCallback=function(e,t,i,r){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=f(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},a.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},a.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},a.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},a.totalTime=function(e,t,i){if(s||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(e>r&&!i&&(e=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(this.render(e,t,!1),D.length&&j())}return this},a.progress=a.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},a.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},a.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||c,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,i=t||0===t?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},a.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(e){if(!arguments.length)return this._paused;var t,i,r=this._timeline;return e!=this._paused&&r&&(s||e||o.wake(),t=r.rawTime(),i=t-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&this.render(r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,!0,!0)),this._gc&&!e&&this._enabled(!0,!1),this};var C=g("core.SimpleTimeline",function(e){S.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});a=C.prototype=new S,a.constructor=C,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(e,t){var i,r;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(r=e._startTime;i&&i._startTime>r;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._recent=e,this._timeline&&this._uncache(!0),this
},a._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(e,t,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)r=n._next,(n._active||e>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r},a.rawTime=function(){return s||o.wake(),this._totalTime};var P=g("TweenLite",function(t,i,r){if(S.call(this,i,r),this.render=P.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:P.selector(t)||t;var n,a,o,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?N[P.defaultOverwrite]:"number"==typeof h?h>>0:N[h],(s||t instanceof Array||t.push&&f(t))&&"number"!=typeof t[0])for(this._targets=o=u(t),this._propLookup=[],this._siblings=[],n=0;o.length>n;n++)a=o[n],a?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(u(a))):(this._siblings[n]=X(a,this,!1),1===h&&this._siblings[n].length>1&&Y(a,this,null,1,this._siblings[n])):(a=o[n--]=P.selector(a),"string"==typeof a&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=X(t,this,!1),1===h&&this._siblings.length>1&&Y(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),L=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},F=function(e,t){var i,r={};for(i in e)z[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!k[i]||k[i]&&k[i]._autoCSS)||(r[i]=e[i],delete e[i]);e.css=r};a=P.prototype=new S,a.constructor=P,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,P.version="1.16.1",P.defaultEase=a._ease=new y(null,null,1,1),P.defaultOverwrite="auto",P.ticker=o,P.autoSleep=120,P.lagSmoothing=function(e,t){o.lagSmoothing(e,t)},P.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(P.selector=i,i(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var D=[],U={},B=P._internals={isArray:f,isSelector:L,lazyTweens:D},k=P._plugins={},O=B.tweenLookup={},V=0,z=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},N={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},I=S._rootFramesTimeline=new C,G=S._rootTimeline=new C,W=30,j=B.lazyRender=function(){var e,t=D.length;for(U={};--t>-1;)e=D[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);D.length=0};G._startTime=o.time,I._startTime=o.frame,G._active=I._active=!0,setTimeout(j,1),S._updateRoot=P.render=function(){var e,t,i;if(D.length&&j(),G.render((o.time-G._startTime)*G._timeScale,!1,!1),I.render((o.frame-I._startTime)*I._timeScale,!1,!1),D.length&&j(),o.frame>=W){W=o.frame+(parseInt(P.autoSleep,10)||120);for(i in O){for(t=O[i].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete O[i]}if(i=G._first,(!i||i._paused)&&P.autoSleep&&!I._first&&1===o._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||o.sleep()}}},o.addEventListener("tick",S._updateRoot);var X=function(e,t,i){var r,n,a=e._gsTweenID;if(O[a||(e._gsTweenID=a="t"+V++)]||(O[a]={target:e,tweens:[]}),t&&(r=O[a].tweens,r[n=r.length]=t,i))for(;--n>-1;)r[n]===t&&r.splice(n,1);return O[a].tweens},q=function(e,t,i,r){var n,a,o=e.vars.onOverwrite;return o&&(n=o(e,t,i,r)),o=P.onOverwrite,o&&(a=o(e,t,i,r)),n!==!1&&a!==!1},Y=function(e,t,i,r,n){var a,o,s,h;if(1===r||r>=4){for(h=n.length,a=0;h>a;a++)if((s=n[a])!==t)s._gc||q(s,t)&&s._enabled(!1,!1)&&(o=!0);else if(5===r)break;return o}var l,u=t._startTime+c,p=[],f=0,d=0===t._duration;for(a=n.length;--a>-1;)(s=n[a])===t||s._gc||s._paused||(s._timeline!==t._timeline?(l=l||K(t,0,d),0===K(s,l,d)&&(p[f++]=s)):u>=s._startTime&&s._startTime+s.totalDuration()/s._timeScale>u&&((d||!s._initted)&&2e-10>=u-s._startTime||(p[f++]=s)));for(a=f;--a>-1;)if(s=p[a],2===r&&s._kill(i,e,t)&&(o=!0),2!==r||!s._firstPT&&s._initted){if(2!==r&&!q(s,t))continue;s._enabled(!1,!1)&&(o=!0)}return o},K=function(e,t,i){for(var r=e._timeline,n=r._timeScale,a=e._startTime;r._timeline;){if(a+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return a/=n,a>t?a-t:i&&a===t||!e._initted&&2*c>a-t?c:(a+=e.totalDuration()/e._timeScale/n)>t+c?0:a-t-c};a._init=function(){var e,t,i,r,n,a=this.vars,o=this._overwrittenProps,s=this._duration,h=!!a.immediateRender,l=a.ease;if(a.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(r in a.startAt)n[r]=a.startAt[r];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&a.lazy!==!1,n.startAt=n.delay=null,this._startAt=P.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==s)return}else if(a.runBackwards&&0!==s)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(h=!1),i={};for(r in a)z[r]&&"autoCSS"!==r||(i[r]=a[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&a.lazy!==!1,i.immediateRender=h,this._startAt=P.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof y?l:"function"==typeof l?new y(l,a.easeParams):R[l]||P.defaultEase:P.defaultEase,a.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o);if(t&&P._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},a._initProps=function(t,i,r,n){var a,o,s,h,l,c;if(null==t)return!1;U[t._gsTweenID]&&j(),this.vars.css||t.style&&t!==e&&t.nodeType&&k.css&&this.vars.autoCSS!==!1&&F(this.vars,t);for(a in this.vars){if(c=this.vars[a],z[a])c&&(c instanceof Array||c.push&&f(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[a]=c=this._swapSelfInParams(c,this));else if(k[a]&&(h=new k[a])._onInitTween(t,this.vars[a],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:a,pg:!0,pr:h._priority},o=h._overwriteProps.length;--o>-1;)i[h._overwriteProps[o]]=this._firstPT;(h._priority||h._onInitAllProps)&&(s=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[a]=l={_next:this._firstPT,t:t,p:a,f:"function"==typeof t[a],n:a,pg:!1,pr:0},l.s=l.f?t[a.indexOf("set")||"function"!=typeof t["get"+a.substr(3)]?a:"get"+a.substr(3)]():parseFloat(t[a]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,t)?this._initProps(t,i,r,n):this._overwrite>1&&this._firstPT&&r.length>1&&Y(t,this,i,this._overwrite,r)?(this._kill(i,t),this._initProps(t,i,r,n)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(U[t._gsTweenID]=!0),s)},a.render=function(e,t,i){var r,n,a,o,s=this._time,h=this._duration,l=this._rawPrevTime;if(e>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>l||l===c&&"isPause"!==this.data)&&l!==e&&(i=!0,l>c&&(n="onReverseComplete")),this._rawPrevTime=o=!t||e||l===e?e:c);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===h&&l>0)&&(n="onReverseComplete",r=this._reversed),0>e&&(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(l!==c||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=o=!t||e||l===e?e:c)),this._initted||(i=!0);else if(this._totalTime=this._time=e,this._easeType){var u=e/h,p=this._easeType,f=this._easePower;(1===p||3===p&&u>=.5)&&(u=1-u),3===p&&(u*=2),1===f?u*=u:2===f?u*=u*u:3===f?u*=u*u*u:4===f&&(u*=u*u*u*u),this.ratio=1===p?1-u:2===p?u:.5>e/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(e/h);if(this._time!==s||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=l,D.push(this),void(this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>e&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,i),t||(this._time!==s||r)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),n&&(!this._gc||i)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||v),0===h&&this._rawPrevTime===c&&o!==c&&(this._rawPrevTime=0))}},a._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:P.selector(t)||t;var r,n,a,o,s,h,l,c,u;if((f(t)||L(t))&&"number"!=typeof t[0])for(r=t.length;--r>-1;)this._kill(e,t[r])&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(t===this._targets[r]){s=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(l=e||s,c=e!==n&&"all"!==n&&e!==s&&("object"!=typeof e||!e._tempKill),i&&(P.onOverwrite||this.vars.onOverwrite)){for(a in l)s[a]&&(u||(u=[]),u.push(a));if(!q(this,i,t,u))return!1}for(a in l)(o=s[a])&&(o.pg&&o.t._kill(l)&&(h=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),c&&(n[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},a.invalidate=function(){return this._notifyPluginsOfEnabled&&P._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],S.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-c,this.render(-this._delay)),this},a._enabled=function(e,t){if(s||o.wake(),e&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=X(r[i],this,!0);else this._siblings=X(this.target,this,!0)}return S.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?P._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},P.to=function(e,t,i){return new P(e,t,i)},P.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new P(e,t,i)},P.fromTo=function(e,t,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new P(e,t,r)},P.delayedCall=function(e,t,i,r,n){return new P(t,0,{delay:e,onComplete:t,onCompleteParams:i,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},P.set=function(e,t){return new P(e,0,t)},P.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:P.selector(e)||e;var i,r,n,a;if((f(e)||L(e))&&"number"!=typeof e[0]){for(i=e.length,r=[];--i>-1;)r=r.concat(P.getTweensOf(e[i],t));for(i=r.length;--i>-1;)for(a=r[i],n=i;--n>-1;)a===r[n]&&r.splice(i,1)}else for(r=X(e).concat(),i=r.length;--i>-1;)(r[i]._gc||t&&!r[i].isActive())&&r.splice(i,1);return r},P.killTweensOf=P.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var r=P.getTweensOf(e,t),n=r.length;--n>-1;)r[n]._kill(i,e)};var Q=g("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=Q.prototype},!0);if(a=Q.prototype,Q.version="1.10.1",Q.API=2,a._firstPT=null,a._addTween=function(e,t,i,r,n,a){var o,s;return null!=r&&(o="number"==typeof r||"="!==r.charAt(1)?Number(r)-i:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=s={_next:this._firstPT,t:e,p:t,s:i,c:o,f:"function"==typeof e[t],n:n||t,r:a},s._next&&(s._next._prev=s),s):void 0},a.setRatio=function(e){for(var t,i=this._firstPT,r=1e-6;i;)t=i.c*e+i.s,i.r?t=Math.round(t):r>t&&t>-r&&(t=0),i.f?i.t[i.p](t):i.t[i.p]=t,i=i._next},a._kill=function(e){var t,i=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},a._roundProps=function(e,t){for(var i=this._firstPT;i;)(e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&(i.r=t),i=i._next},P._onPluginEvent=function(e,t){var i,r,n,a,o,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(o=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:a)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:a=s,s=o}s=t._firstPT=n}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(i=!0),s=s._next;return i},Q.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===Q.API&&(k[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,r=e.priority||0,n=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},o=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){Q.call(this,i,r),this._overwriteProps=n||[]},e.global===!0),s=o.prototype=new Q(i);s.constructor=o,o.API=e.API;for(t in a)"function"==typeof e[t]&&(s[a[t]]=e[t]);return o.version=e.version,Q.activate([o]),o},r=e._gsQueue){for(n=0;r.length>n;n++)r[n]();for(a in d)d[a].func||e.console.log("GSAP encountered missing dependency: com.greensock."+a)}s=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");